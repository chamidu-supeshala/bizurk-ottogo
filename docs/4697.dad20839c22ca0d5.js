(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4697],{4697:(N,l,s)=>{"use strict";s.r(l),s.d(l,{SecurityModule:()=>re});var i=s(6895),o=s(8008),t=s(3416),n=s(5433),r=s(8854),a=s(3709),c=s(655);const d=[{key:"login",label:"on-login"},{key:"payment",label:"payment"},{key:"activateStrategy",label:"activate-strategy"},{key:"bindExchange",label:"blind-exchange"}];var f=s(7154),e=s(4650),I=s(5939),p=s(6540),y=s(6065),M=s(9642),B=s(5915),U=s(413),E=s(7341);function O(g,F){if(1&g){const u=e.EpF();e.TgZ(0,"div",11)(1,"span",12),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ion-toggle",13),e.NdJ("ionChange",function(m){const R=e.CHM(u).$implicit,K=e.oxw(2);return e.KtG(K.toggleAuth(m,R.key))}),e.qZA()()}if(2&g){const u=F.$implicit,h=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,u.label)," "),e.xp6(2),e.Q6J("checked",h.securedMethods[u.key]||!1)}}function v(g,F){if(1&g){const u=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2",4),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"ion-icon",5),e.NdJ("click",function(){e.CHM(u);const m=e.oxw();return e.KtG(m.handleDismiss())}),e.qZA()()(),e.TgZ(7,"div",6),e.YNc(8,O,5,4,"div",7),e.qZA(),e.TgZ(9,"div",8)(10,"button",9),e.NdJ("click",function(){e.CHM(u);const m=e.oxw();return e.KtG(m.handleDismiss())}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"button",10),e.NdJ("click",function(){e.CHM(u);const m=e.oxw();return e.KtG(m.onConfirmAuth())}),e._uU(14),e.ALo(15,"translate"),e.qZA()()()}if(2&g){const u=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,5,"two-factor-authentication")," "),e.xp6(4),e.Q6J("ngForOf",u.securableMethods),e.xp6(3),e.hij(" ",e.lcZ(12,7,"cancel")," "),e.xp6(2),e.Q6J("disabled",!u.isChanged),e.xp6(1),e.hij(" ",e.lcZ(15,9,"confirm")," ")}}let T=(()=>{class g extends E.u{constructor(){super(),this.handleTwoFactorAuth=new e.vpe,this.securableMethods=d}get isChanged(){return JSON.stringify(this._securedMethods)!==JSON.stringify(this.securedMethods)}ngOnChanges(u){var h,m;(null===(h=u.securedMethods)||void 0===h?void 0:h.currentValue)!==(null===(m=u.securedMethods)||void 0===m?void 0:m.previousValue)&&(this._securedMethods=Object.assign({},this.securedMethods))}toggleAuth(u,h){this._securedMethods[h]=u.detail.checked}onConfirmAuth(){this.handleTwoFactorAuth.emit(this._securedMethods)}}return g.\u0275fac=function(u){return new(u||g)},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-two-factor-modal"]],inputs:{securedMethods:"securedMethods"},outputs:{handleTwoFactorAuth:"handleTwoFactorAuth"},standalone:!0,features:[e.qOj,e.TTD,e.jDz],decls:2,vars:1,consts:[[1,"theme-modal",3,"isOpen","didDismiss"],[1,"flex","flex-col","p-2","h-full"],[1,"modal-header","flex","flex-col","items-center"],[1,"relative","w-full"],[1,"text-2xl","sm:text-3xl","text-text-strong","font-medium","text-left","sm:text-center","ml-1","sm:ml-0","sm:my-2"],["name","close-outline",1,"absolute","right-0","top-0","w-8","h-8","sm:w-10","sm:h-10","cursor-pointer","sm:m-1",3,"click"],[1,"modal-content","mb-8","px-1","sm:px-3"],["class","w-full flex items-center justify-between pb-3 my-4 border-b border-main-border",4,"ngFor","ngForOf"],[1,"modal-footer","flex","flex-col-reverse","xs:flex-row","gap-2","xs:gap-0","justify-between","px-1","sm:px-3"],["appRippleEffect","",1,"btn-medium","w-full","xs:w-32","sm:w-44",3,"click"],["appRippleEffect","",1,"btn-blue","font-medium","w-full","xs:w-32","sm:w-44",3,"disabled","click"],[1,"w-full","flex","items-center","justify-between","pb-3","my-4","border-b","border-main-border"],[1,"text-lg","font-medium","text-text-strong"],[3,"checked","ionChange"]],template:function(u,h){1&u&&(e.TgZ(0,"ion-modal",0),e.NdJ("didDismiss",function(){return h.handleDismiss()}),e.YNc(1,v,16,11,"ng-template"),e.qZA()),2&u&&e.Q6J("isOpen",h.isOpen)},dependencies:[i.ez,i.sg,o.Pc,o.gu,o.ho,o.ki,o.w,t.aw,t.X$,r.T,y.R],styles:["ion-modal[_ngcontent-%COMP%]{--width: 480px;--height: auto}ion-toggle[_ngcontent-%COMP%]{height:32px;width:65px;padding:0;--handle-width: 28px;--handle-height: 28px;--background: rgb(54, 55, 83);--background-checked: var(--accent-blue);--handle-background: rgb(107, 107, 143);--handle-background-checked: var(--main-blue);--handle-spacing: 2px;--border-radius: 16px}.modal-header[_ngcontent-%COMP%]{margin-bottom:.5rem}@media (min-width: 640px){.modal-header[_ngcontent-%COMP%]{margin-bottom:.85rem}}.modal-content[_ngcontent-%COMP%]{margin-bottom:1.1rem}@media (min-width: 640px){.modal-content[_ngcontent-%COMP%]{margin-bottom:1.6rem}}.modal-footer[_ngcontent-%COMP%]{margin-bottom:.35rem}@media (min-width: 640px){.modal-footer[_ngcontent-%COMP%]{margin-bottom:.85rem}}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:3rem;border-radius:.375rem;border-width:1px;border-style:solid;font-size:1.25rem;line-height:1.75rem}@media (min-width: 640px){.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:3.5rem;font-size:1.5rem;line-height:2rem}}  .light-mode ion-toggle{--background: var(--grey-3);--handle-background: rgb(53, 53, 68, .34)}  .dark-mode ion-toggle{--background: #363753;--background-checked: #00328f;--handle-background: rgb(107, 107, 143)}"]}),g})();var L=s(4006),J=s(3259),w=s(5195),x=s(6339);function A(g,F){if(1&g){const u=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2",4),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"ion-icon",5),e.NdJ("click",function(){e.CHM(u);const m=e.oxw();return e.KtG(m.handleDismiss())}),e.qZA()()(),e.TgZ(7,"div",6)(8,"div",7),e._UZ(9,"img",8),e.TgZ(10,"p",9),e._uU(11," Scan the QR Code with your "),e.TgZ(12,"a",10),e._uU(13," Google Authenticator app "),e.qZA(),e._uU(14," . "),e.qZA(),e.TgZ(15,"div",11)(16,"ion-input",12),e.NdJ("ngModelChange",function(m){e.CHM(u);const k=e.oxw();return e.KtG(k.authCode=m)}),e.ALo(17,"translate"),e.qZA()()()(),e.TgZ(18,"div",13)(19,"button",14),e.NdJ("click",function(){e.CHM(u);const m=e.oxw();return e.KtG(m.handleDismiss())}),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"button",15),e.NdJ("click",function(){e.CHM(u);const m=e.oxw();return e.KtG(m.onNext())}),e._uU(23),e.ALo(24,"translate"),e.qZA()()()}if(2&g){const u=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,8,"google-auth")," "),e.xp6(5),e.Q6J("src",u.qrcode,e.LSH),e.xp6(3),e.Q6J("href",u.googleAuthDownloadURL,e.LSH),e.xp6(4),e.s9C("placeholder",e.lcZ(17,10,"enter-code")),e.Q6J("ngModel",u.authCode),e.xp6(4),e.hij(" ",e.lcZ(21,12,"cancel")," "),e.xp6(2),e.Q6J("disabled",""===u.authCode),e.xp6(1),e.hij(" ",e.lcZ(24,14,"next")," ")}}let _=(()=>{class g extends E.u{constructor(u,h){super(),this.platform=u,this.walletService=h,this.handleSuccess=new e.vpe,this.googleAuthDownloadURL="",this.authCode="",this.platform.ready().then(()=>{const m=w.aN.findIndex(k=>"Google Auth"===k.name);this.googleAuthDownloadURL=this.getGoogleAuthUrl(w.aN[m].url)})}ngOnInit(){this.getGoogleUrl()}getGoogleUrl(){this.walletService.getQrCode().pipe().subscribe(u=>(0,c.mG)(this,void 0,void 0,function*(){0===u.code&&(this.secretKey=u.data.secret,J.toDataURL(u.data.qrCode).then(h=>{console.log(h),this.qrcode=h}))}))}getGoogleAuthUrl(u){return Array.isArray(u)?u[this.platform.is("ios")?1:0]:u}onNext(){this.walletService.sendCode({code:this.authCode,secret:this.secretKey}).pipe().subscribe(u=>(0,c.mG)(this,void 0,void 0,function*(){0===u.code?setTimeout(()=>{this.toast.toastSuccess("Google Auth Setup Successfully"),this.handleSuccess.emit()},500):this.toast.toastError(u.message)}))}}return g.\u0275fac=function(u){return new(u||g)(e.Y36(o.t4),e.Y36(x.X))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-google-auth-modal"]],outputs:{handleSuccess:"handleSuccess"},standalone:!0,features:[e.qOj,e.jDz],decls:2,vars:1,consts:[[1,"theme-modal",3,"isOpen","didDismiss"],[1,"flex","flex-col","p-2","h-full"],[1,"modal-header","flex","flex-col","items-center"],[1,"relative","w-full"],[1,"text-2xl","sm:text-3xl","text-text-strong","font-medium","text-left","sm:text-center","ml-1","sm:ml-0","sm:my-2"],["name","close-outline",1,"absolute","right-0","top-0","w-8","h-8","sm:w-10","sm:h-10","cursor-pointer","sm:m-1",3,"click"],[1,"modal-content","flex","flex-col","items-center","justify-center","mb-8","px-1","sm:px-3"],[1,"w-4/5"],["alt","",1,"w-full",3,"src"],[1,"align-middle","text-text-strong","my-4"],[1,"text-main-blue",3,"href"],[1,"rounded-md","border-border-input","border","flex","items-center","bg-bg-input","px-2","text-text-strong"],[3,"placeholder","ngModel","ngModelChange"],[1,"modal-footer","flex","flex-col-reverse","xs:flex-row","gap-2","xs:gap-0","justify-between","px-1","sm:px-3"],["appRippleEffect","",1,"btn-medium","w-full","xs:w-32","sm:w-44",3,"click"],["appRippleEffect","",1,"btn-blue","font-medium","capitalize","w-full","xs:w-32","sm:w-44",3,"disabled","click"]],template:function(u,h){1&u&&(e.TgZ(0,"ion-modal",0),e.NdJ("didDismiss",function(){return h.handleDismiss()}),e.YNc(1,A,25,16,"ng-template"),e.qZA()),2&u&&e.Q6J("isOpen",h.isOpen)},dependencies:[i.ez,L.u5,L.JJ,L.On,L.UX,t.aw,t.X$,o.Pc,o.gu,o.pK,o.ki,o.j9,r.T,y.R],styles:["ion-modal[_ngcontent-%COMP%]{--width: 480px;--height: auto}ion-input[_ngcontent-%COMP%]{--placeholder-color: var(--input-placeholder);--placeholder-weight: 500}.modal-header[_ngcontent-%COMP%]{margin-bottom:.5rem}@media (min-width: 640px){.modal-header[_ngcontent-%COMP%]{margin-bottom:.85rem}}.modal-content[_ngcontent-%COMP%]{margin-bottom:1.1rem}@media (min-width: 640px){.modal-content[_ngcontent-%COMP%]{margin-bottom:1.6rem}}.modal-footer[_ngcontent-%COMP%]{margin-bottom:.35rem}@media (min-width: 640px){.modal-footer[_ngcontent-%COMP%]{margin-bottom:.85rem}}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:3rem;border-radius:.375rem;border-width:1px;border-style:solid;font-size:1.25rem;line-height:1.75rem}@media (min-width: 640px){.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:3.5rem;font-size:1.5rem;line-height:2rem}}"]}),g})();var P=s(2738);let b=(()=>{class g{transform(u){const[h,m]=u.split("@"),k=h.slice(0,3)+"*".repeat(3);return m.slice(0,3),"*".repeat(3),m.slice(-3),`${k}@${m}`}}return g.\u0275fac=function(u){return new(u||g)},g.\u0275pipe=e.Yjl({name:"emailMask",type:g,pure:!0}),g})();function C(g,F){1&g&&(e.TgZ(0,"div",49),e._uU(1),e.qZA()),2&g&&(e.xp6(1),e.hij(" ","****"," "))}function Z(g,F){if(1&g){const u=e.EpF();e.TgZ(0,"div",38)(1,"button",39),e.NdJ("click",function(){e.CHM(u);const m=e.oxw(3);return m.isOpenTradingPINModal=!0,e.KtG(m.step=1)}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&g&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"bind-now")," "))}function S(g,F){if(1&g){const u=e.EpF();e.TgZ(0,"div",40),e._UZ(1,"div",41),e.TgZ(2,"button",39),e.NdJ("click",function(){e.CHM(u);const m=e.oxw(3);return m.isOpenTradingPINModal=!0,e.KtG(m.step=0)}),e._uU(3),e.ALo(4,"translate"),e.qZA()()}2&g&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"change-password")," "))}function j(g,F){if(1&g&&(e.TgZ(0,"div",37),e.YNc(1,C,2,1,"div",46),e.YNc(2,Z,4,3,"ng-template",null,47,e.W1O),e.YNc(4,S,5,3,"div",48),e.qZA()),2&g){const u=e.MAs(3),h=e.oxw().ngIf;e.xp6(1),e.Q6J("ngIf",h.paymentPassword)("ngIfElse",u),e.xp6(3),e.Q6J("ngIf",h.paymentPassword)}}function H(g,F){if(1&g){const u=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){e.CHM(u);const m=e.oxw(2);return m.isOpenTradingPINModal=!0,e.KtG(m.step=1)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&g&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"not-set")," "))}function oe(g,F){1&g&&e._UZ(0,"ion-icon",36)}function ee(g,F){if(1&g){const u=e.EpF();e.TgZ(0,"div",37)(1,"div",49),e._uU(2),e.ALo(3,"emailMask"),e.qZA(),e.TgZ(4,"div",40),e._UZ(5,"div",41),e.TgZ(6,"button",39),e.NdJ("click",function(){e.CHM(u);const m=e.oxw(2);return e.KtG(m.isOpenEditEmailModal=!0)}),e._uU(7),e.ALo(8,"translate"),e.qZA()()()}if(2&g){const u=e.oxw().ngIf;e.xp6(2),e.hij(" ",e.lcZ(3,2,u.email)," "),e.xp6(5),e.hij(" ",e.lcZ(8,4,"security-change-email")," ")}}function ie(g,F){if(1&g){const u=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){e.CHM(u);const m=e.oxw(2);return e.KtG(m.isOpenEditEmailModal=!0)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&g&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bind-now")," "))}function Q(g,F){1&g&&(e.TgZ(0,"span"),e._uU(1," , "),e.qZA())}function Y(g,F){if(1&g&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.YNc(3,Q,2,0,"span",55),e.qZA()),2&g){const u=F.$implicit,h=F.index,m=e.oxw(3);e.xp6(1),e.hij(" ",e.lcZ(2,2,u)," "),e.xp6(2),e.Q6J("ngIf",h!==m.securedMethodsWith2FA.length-1)}}function te(g,F){if(1&g){const u=e.EpF();e.TgZ(0,"div",50)(1,"div",51),e.YNc(2,Y,4,4,"span",52),e.qZA(),e.TgZ(3,"div",53),e._UZ(4,"div",54),e.TgZ(5,"button",45),e.NdJ("click",function(){e.CHM(u);const m=e.oxw(2);return e.KtG(m.isOpenTwoFactorAuthModal=!0)}),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}if(2&g){const u=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",u.securedMethodsWith2FA),e.xp6(4),e.hij(" ",e.lcZ(7,2,"update-2FA")," ")}}function V(g,F){if(1&g){const u=e.EpF();e.TgZ(0,"div",38)(1,"button",45),e.NdJ("click",function(){e.CHM(u);const m=e.oxw(2);return e.KtG(m.isOpenTwoFactorAuthModal=!0)}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&g&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"not-set")," "))}const q=function(g){return[g]};function W(g,F){if(1&g){const u=e.EpF();e.TgZ(0,"div",23)(1,"div",24)(2,"div",25)(3,"div",26)(4,"div",27),e._UZ(5,"ion-icon",28),e.qZA()(),e.TgZ(6,"div",29)(7,"div",30),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div",31),e.YNc(11,j,5,3,"div",32),e.YNc(12,H,3,3,"ng-template",null,33,e.W1O),e.qZA()(),e.TgZ(14,"div",25)(15,"div",26)(16,"div",27),e.YNc(17,oe,1,0,"ion-icon",34),e.qZA()(),e.TgZ(18,"div",29)(19,"div",30),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",31),e.YNc(23,ee,9,6,"div",32),e.YNc(24,ie,3,3,"ng-template",null,35,e.W1O),e.qZA()(),e.TgZ(26,"div",25)(27,"div",26)(28,"div",27),e._UZ(29,"ion-icon",36),e.qZA()(),e.TgZ(30,"div",29)(31,"div",30),e._uU(32),e.ALo(33,"translate"),e.qZA()(),e.TgZ(34,"div",31)(35,"div",37)(36,"div",38)(37,"button",39),e.NdJ("click",function(){e.CHM(u);const m=e.oxw();return e.KtG(m.isOpenLoginPasswordModal=!0)}),e._uU(38),e.ALo(39,"translate"),e.qZA()(),e.TgZ(40,"div",40),e._UZ(41,"div",41),e.TgZ(42,"button",39),e.NdJ("click",function(){e.CHM(u);const m=e.oxw();return e.KtG(m.userService.toggleForGorPasswordModal(!0))}),e._uU(43),e.ALo(44,"translate"),e.qZA()()()()(),e.TgZ(45,"div",25)(46,"div",26)(47,"div",27),e._UZ(48,"ion-icon",28),e.qZA()(),e.TgZ(49,"div",29)(50,"div",30),e._uU(51),e.ALo(52,"translate"),e.qZA()(),e.TgZ(53,"div",31),e.YNc(54,te,8,4,"div",42),e.YNc(55,V,4,3,"ng-template",null,43,e.W1O),e.qZA()(),e.TgZ(57,"div",25)(58,"div",26)(59,"div",27),e._UZ(60,"ion-icon",28),e.qZA()(),e.TgZ(61,"div",29)(62,"div",30),e._uU(63),e.ALo(64,"translate"),e.qZA()(),e.TgZ(65,"div",31)(66,"div",44)(67,"button",45),e.NdJ("click",function(){e.CHM(u);const m=e.oxw();return e.KtG(m.isOpenGoogleAuthModal=!0)}),e._uU(68),e.ALo(69,"translate"),e.qZA()()()()()()}if(2&g){const u=F.ngIf,h=e.MAs(13),m=e.MAs(25),k=e.MAs(56),R=e.oxw();e.xp6(5),e.Q6J("ngClass",e.VKq(34,q,u.paymentPassword?"text-main-green":"text-grey-2")),e.xp6(3),e.hij(" ",e.lcZ(9,18,"trading-password")," "),e.xp6(3),e.Q6J("ngIf",u.paymentPassword)("ngIfElse",h),e.xp6(6),e.Q6J("ngIf",u.email),e.xp6(3),e.hij(" ",e.lcZ(21,20,"email")," "),e.xp6(3),e.Q6J("ngIf",u.email)("ngIfElse",m),e.xp6(9),e.hij(" ",e.lcZ(33,22,"login-password")," "),e.xp6(6),e.hij(" ",e.lcZ(39,24,"change-password")," "),e.xp6(5),e.hij(" ",e.lcZ(44,26,"forgot-password")," "),e.xp6(5),e.Q6J("ngClass",e.VKq(36,q,R.securedMethodsWith2FA.length>0?"text-main-green":"text-grey-2")),e.xp6(3),e.hij(" ",e.lcZ(52,28,"require-2FA")," "),e.xp6(3),e.Q6J("ngIf",R.securedMethodsWith2FA.length>0)("ngIfElse",k),e.xp6(6),e.Q6J("ngClass",e.VKq(38,q,u.googleAuthSecret.length>0?"text-main-green":"text-grey-2")),e.xp6(3),e.hij(" ",e.lcZ(64,30,"google-auth")," "),e.xp6(5),e.hij(" ",e.lcZ(69,32,"set-up")," ")}}const ne=function(g){return{"background-image":g}},D=[{path:"",component:(()=>{class g extends f.H{constructor(u,h){super(),this.userService=u,this.authService=h,this.isOpenTradingPINModal=!1,this.isOpenChangePhoneModal=!1,this.isOpenEditEmailModal=!1,this.isOpenLoginPasswordModal=!1,this.isOpenTwoFactorAuthModal=!1,this.isOpenForgotPasswordModal=!1,this.isOpenGoogleAuthModal=!1,this.securedMethods={login:!1,payment:!1,activateStrategy:!1,bindExchange:!1},this.securedMethodsWith2FA=[],this.hasGoogleAuthenticator=!1,this.step=0}ngOnInit(){this.get2FAStatus()}get securityLevel(){let u=1;return this.userService._userInfo&&(this.userService._userInfo.paymentPassword&&u++,this.userService._userInfo.email&&u++,this.userService._userInfo.phone&&u++,this.securedMethodsWith2FA.length>0&&u++,this.userService._userInfo.googleAuthSecret.length>0&&u++),u}get securityLevelBackground(){return`conic-gradient(var(--main-green) 0 ${60*this.securityLevel}deg, var(--security-level) 0 288deg)`}get2FAStatus(){this.authService.getTwoFactorAuth().pipe().subscribe(u=>(0,c.mG)(this,void 0,void 0,function*(){if(0!==u.code)return;const m=Object.entries(u.data[0]).filter(([k,R])=>!0===R).map(([k,R])=>k);this.securedMethodsWith2FA=m;for(const k of m)this.securedMethods.hasOwnProperty(k)&&(this.securedMethods[k]=!0)}))}handleChangeEmailNumber(u){console.log(u),this.authService.bindEmail({email:u.email,emailCode:u.verificationCode}).pipe().subscribe(h=>(0,c.mG)(this,void 0,void 0,function*(){0===h.code?(yield this.userService.updateUserInfo(),this.toast.toastSuccess("\u4fee\u6539\u6210\u529f"),this.isOpenEditEmailModal=!1):this.toast.toastError(h.message)}))}onChangePhoneNumber(u){this.authService.bindMobile({smsCode:u.verificationCode,mobileArea:u.countryCode?u.countryCode:"+86",mobile:u.phoneNumber}).pipe().subscribe(h=>(0,c.mG)(this,void 0,void 0,function*(){0===h.code?(yield this.userService.updateUserInfo(),this.toast.toastSuccess("\u4fee\u6539\u6210\u529f"),this.isOpenChangePhoneModal=!1):this.toast.toastError(h.message)}))}onChangeTwoFactorAuth(u){this.securedMethods=u;const h=Object.keys(this.securedMethods).filter(R=>this.securedMethods[R]);this.securedMethodsWith2FA=h.map(R=>{const K=d.find(X=>X.key===R);return K?K.key:""}),console.log("this.securedMethods",this.securedMethods),console.log("this.securedMethodsWith2FA",this.securedMethodsWith2FA);const k=[{type:1,login:!1,payment:!1,activateStrategy:!1,bindExchange:!1},{type:2,login:!1,payment:!1,activateStrategy:!1,bindExchange:!1}].map(R=>{if(1===R.type){const K={};for(const X in R)K[X]=!!this.securedMethodsWith2FA.includes(X);return K.type=1,K}return R});console.log("authFields",k),this.authService.twoFactorAuth({factorFields:k}).subscribe(R=>(0,c.mG)(this,void 0,void 0,function*(){0===R.code?(yield this.userService.updateUserInfo(),this.toast.toastSuccess("\u4fee\u6539\u6210\u529f")):this.toast.toastError(R.message)})),this.isOpenTwoFactorAuthModal=!1}onGoogleAuthSetup(){return(0,c.mG)(this,void 0,void 0,function*(){this.hasGoogleAuthenticator=!0,yield this.userService.updateUserInfo(),setTimeout(()=>{this.isOpenGoogleAuthModal=!1},500)})}}return g.\u0275fac=function(u){return new(u||g)(e.Y36(I.K),e.Y36(p.e))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-security"]],features:[e.qOj],decls:36,vars:37,consts:[[1,"flex","flex-col","w-full","sm:px-5","py-4"],[1,"flex","flex-auto","items-center","sm:justify-between","w-full"],[1,"block","sm:hidden","mr-1","cursor-pointer","w-8","h-8",3,"routerLink"],["name","chevron-back-outline",1,"w-8","h-8"],[1,"text-lg","xs:text-2xl","text-text-strong","font-medium"],[1,"security"],[1,"security__level"],[1,"flex","items-center","gap-x-2"],[1,"relative","w-14","h-14","rounded-full","bg-main-bg"],[1,"absolute","rounded-full","w-full","h-full",3,"ngStyle"],[1,"security-circle","absolute","flex","items-center","justify-center","inset-0","w-11","h-11","m-auto","rounded-full"],[1,"text-3xl","icon-shieldok","text-main-green"],[1,"flex","flex-col"],[1,"text-2xl","text-text-strong","font-medium"],[1,"text-sm","font-medium","text-red-1"],[1,"text-sm","font-medium","text-main-yellow"],[1,"text-sm","font-medium","text-main-green"],["class","px-2 sm:px-0 sm:ml-5 sm:table sm:table-auto w-full font-medium sm:max-w-fit",4,"ngIf"],[3,"step","isOpen","isOpenChange"],[3,"isOpen","isOpenChange"],[3,"securedMethods","isOpen","handleTwoFactorAuth","isOpenChange"],[3,"isOpen","isOpenChange","handleChangeEmailNumber"],[3,"isOpen","isOpenChange","handleSuccess"],[1,"px-2","sm:px-0","sm:ml-5","sm:table","sm:table-auto","w-full","font-medium","sm:max-w-fit"],[1,"block","sm:table-row-group"],[1,"block","sm:table-row","mb-4","sm:mb-0","border-b","border-main-border"],[1,"security-level-cell"],[1,"flex","items-center"],["name","checkmark-circle-outline",1,"w-8","h-8",3,"ngClass"],[1,"security-info-key-cell"],[1,"flex","items-center","h-full","justify-end"],[1,"security-info-value-cell"],["class","flex w-full",4,"ngIf","ngIfElse"],["setTradingPasswordTemplate",""],["class","text-main-green w-8 h-8","name","checkmark-circle-outline",4,"ngIf"],["setUserEmailTemplate",""],["name","checkmark-circle-outline",1,"text-main-green","w-8","h-8"],[1,"flex","w-full"],[1,"w-1/2","pr-4","md:pr-6"],[1,"primary-btn","w-full",3,"click"],[1,"flex","w-1/2"],[1,"border-l","border-main-border","pr-4","md:pr-6","my-1"],["class","flex w-full max-w-sm sm:max-w-none",4,"ngIf","ngIfElse"],["setTwoFactorTemplate",""],[1,"flex","w-1/2","max-w-sm","sm:max-w-none","pr-4","md-pr-6"],["appRippleEffect","",1,"primary-btn","w-full",3,"click"],["class","flex items-center select-none w-1/2",4,"ngIf","ngIfElse"],["noPassword",""],["class","flex w-1/2",4,"ngIf"],[1,"flex","items-center","select-none","w-1/2"],[1,"flex","w-full","max-w-sm","sm:max-w-none"],[1,"flex","items-center","w-1/2"],[4,"ngFor","ngForOf"],[1,"flex","w-1/2","items-center"],[1,"border-l","border-main-border","pr-4","md:pr-6","my-1","h-9"],[4,"ngIf"]],template:function(u,h){1&u&&(e.TgZ(0,"ng-scrollbar")(1,"div",0)(2,"div",1)(3,"div",2),e._UZ(4,"ion-icon",3),e.qZA(),e.TgZ(5,"h1",4),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8),e._UZ(12,"div",9),e.TgZ(13,"div",10),e._UZ(14,"i",11),e.qZA()(),e.TgZ(15,"div",12)(16,"h2",13),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"span",14),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"span",15),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"span",16),e._uU(26),e.ALo(27,"translate"),e.qZA()()()(),e.YNc(28,W,70,40,"div",17),e.ALo(29,"async"),e.qZA()(),e.TgZ(30,"app-trading-password-modal",18),e.NdJ("isOpenChange",function(k){return h.isOpenTradingPINModal=k}),e.qZA(),e.TgZ(31,"app-edit-phone-modal",19),e.NdJ("isOpenChange",function(k){return h.isOpenChangePhoneModal=k}),e.qZA(),e.TgZ(32,"app-change-password-modal",19),e.NdJ("isOpenChange",function(k){return h.isOpenLoginPasswordModal=k}),e.qZA(),e.TgZ(33,"app-two-factor-modal",20),e.NdJ("handleTwoFactorAuth",function(k){return h.onChangeTwoFactorAuth(k)})("isOpenChange",function(k){return h.isOpenTwoFactorAuthModal=k}),e.qZA(),e.TgZ(34,"app-edit-email-modal",21),e.NdJ("isOpenChange",function(k){return h.isOpenEditEmailModal=k})("handleChangeEmailNumber",function(k){return h.handleChangeEmailNumber(k)}),e.qZA(),e.TgZ(35,"app-google-auth-modal",22),e.NdJ("isOpenChange",function(k){return h.isOpenGoogleAuthModal=k})("handleSuccess",function(){return h.onGoogleAuthSetup()}),e.qZA()()),2&u&&(e.xp6(3),e.Q6J("routerLink","/settings"),e.xp6(3),e.hij(" ",e.lcZ(7,23,"security")," "),e.xp6(6),e.Q6J("ngStyle",e.VKq(35,ne,h.securityLevelBackground)),e.xp6(5),e.AsE(" ",e.lcZ(18,25,"security-level")," ",h.securityLevel,"/6 "),e.xp6(2),e.ekj("hidden",h.securityLevel>3),e.xp6(1),e.hij(" ",e.lcZ(21,27,"low-security")," "),e.xp6(2),e.ekj("hidden",h.securityLevel>5||h.securityLevel<4),e.xp6(1),e.hij(" ",e.lcZ(24,29,"medium-security")," "),e.xp6(2),e.ekj("hidden",h.securityLevel<6),e.xp6(1),e.hij(" ",e.lcZ(27,31,"full-secured"),"! "),e.xp6(2),e.Q6J("ngIf",e.lcZ(29,33,h.userService.userInfo$)),e.xp6(2),e.Q6J("step",h.step)("isOpen",h.isOpenTradingPINModal),e.xp6(1),e.Q6J("isOpen",h.isOpenChangePhoneModal),e.xp6(1),e.Q6J("isOpen",h.isOpenLoginPasswordModal),e.xp6(1),e.Q6J("securedMethods",h.securedMethods)("isOpen",h.isOpenTwoFactorAuthModal),e.xp6(1),e.Q6J("isOpen",h.isOpenEditEmailModal),e.xp6(1),e.Q6J("isOpen",h.isOpenGoogleAuthModal))},dependencies:[i.mk,i.sg,i.O5,i.PC,o.gu,o.YI,n.KC,a.rH,y.R,M.i,B.q,U.N,T,_,P.T,i.Ov,t.X$,b],styles:[".dark-mode .security__level{background-color:rgba(41,42,63,.59);border:2px solid rgba(70,70,97,.231372549)}  .dark-mode .security-circle{background-color:var(--grey-4)}  .light-mode .security__level{border-width:2px;border-color:var(--grey-3);--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}  .light-mode .security-circle{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}button.primary-btn[_ngcontent-%COMP%]{max-width:176px}.security[_ngcontent-%COMP%]{margin-top:.25rem;display:flex;flex-direction:column;padding-left:.625rem;padding-right:.625rem}@media (min-width: 640px){.security[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}.security__level[_ngcontent-%COMP%]{margin-top:.75rem;margin-bottom:.75rem;display:flex;align-items:center;justify-content:space-between;border-radius:.375rem;padding:1.75rem .5rem}@media (min-width: 340px){.security__level[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}}.security-level-cell[_ngcontent-%COMP%]{display:none;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;padding-left:0;padding-right:0;vertical-align:middle}@media (min-width: 640px){.security-level-cell[_ngcontent-%COMP%]{display:table-cell;padding-left:.5rem;padding-right:.5rem}}@media (min-width: 1024px){.security-level-cell[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}}.security-info-key-cell[_ngcontent-%COMP%]{display:block;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;padding-left:0;padding-right:0;text-align:right;font-size:1.25rem;line-height:1.75rem;font-weight:500}@media (min-width: 640px){.security-info-key-cell[_ngcontent-%COMP%]{display:table-cell;padding-left:.5rem;padding-right:.5rem;font-size:1rem;line-height:1.5rem}}@media (min-width: 768px){.security-info-key-cell[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:1.5rem}}@media (min-width: 640px){.security-info-key-cell[_ngcontent-%COMP%]{height:60px}}@media (min-width: 768px){.security-info-key-cell[_ngcontent-%COMP%]{height:68px}}.security-info-value-cell[_ngcontent-%COMP%]{display:block;width:100%;padding-top:.5rem;padding-bottom:.5rem;vertical-align:middle;color:var(--text-strong)}@media (min-width: 640px){.security-info-value-cell[_ngcontent-%COMP%]{display:table-cell}}@media (min-width: 768px){.security-info-value-cell[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem}}@media (min-width: 640px){.security-info-value-cell[_ngcontent-%COMP%]{height:68px;width:400px}}"]}),g})()}];let z=(()=>{class g{}return g.\u0275fac=function(u){return new(u||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[a.Bz.forChild(D),a.Bz]}),g})();var $=s(7644);let re=(()=>{class g{}return g.\u0275fac=function(u){return new(u||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[i.ez,o.Pc,t.aw,n.kb,z,r.T,M.i,B.q,U.N,T,$.I,_,P.T]}),g})()},4901:N=>{"use strict";var l={single_source_shortest_paths:function(s,i,o){var t={},n={};n[i]=0;var a,c,d,f,e,p,r=l.PriorityQueue.make();for(r.push(i,0);!r.empty();)for(d in f=(a=r.pop()).cost,e=s[c=a.value]||{})e.hasOwnProperty(d)&&(p=f+e[d],(typeof n[d]>"u"||n[d]>p)&&(n[d]=p,r.push(d,p),t[d]=c));if(typeof o<"u"&&typeof n[o]>"u"){var B=["Could not find a path from ",i," to ",o,"."].join("");throw new Error(B)}return t},extract_shortest_path_from_predecessor_list:function(s,i){for(var o=[],t=i;t;)o.push(t),t=s[t];return o.reverse(),o},find_path:function(s,i,o){var t=l.single_source_shortest_paths(s,i,o);return l.extract_shortest_path_from_predecessor_list(t,o)},PriorityQueue:{make:function(s){var t,i=l.PriorityQueue,o={};for(t in s=s||{},i)i.hasOwnProperty(t)&&(o[t]=i[t]);return o.queue=[],o.sorter=s.sorter||i.default_sorter,o},default_sorter:function(s,i){return s.cost-i.cost},push:function(s,i){this.queue.push({value:s,cost:i}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};N.exports=l},8419:N=>{"use strict";N.exports=function(s){for(var i=[],o=s.length,t=0;t<o;t++){var n=s.charCodeAt(t);if(n>=55296&&n<=56319&&o>t+1){var r=s.charCodeAt(t+1);r>=56320&&r<=57343&&(n=1024*(n-55296)+r-56320+65536,t+=1)}n<128?i.push(n):n<2048?(i.push(n>>6|192),i.push(63&n|128)):n<55296||n>=57344&&n<65536?(i.push(n>>12|224),i.push(n>>6&63|128),i.push(63&n|128)):n>=65536&&n<=1114111?(i.push(n>>18|240),i.push(n>>12&63|128),i.push(n>>6&63|128),i.push(63&n|128)):i.push(239,191,189)}return new Uint8Array(i).buffer}},3259:(N,l,s)=>{const i=s(8695),o=s(1465),t=s(3210),n=s(2334);function r(a,c,d,f,e){const I=[].slice.call(arguments,1),p=I.length,y="function"==typeof I[p-1];if(!y&&!i())throw new Error("Callback required as last argument");if(!y){if(p<1)throw new Error("Too few arguments provided");return 1===p?(d=c,c=f=void 0):2===p&&!c.getContext&&(f=d,d=c,c=void 0),new Promise(function(M,B){try{const U=o.create(d,f);M(a(U,c,f))}catch(U){B(U)}})}if(p<2)throw new Error("Too few arguments provided");2===p?(e=d,d=c,c=f=void 0):3===p&&(c.getContext&&typeof e>"u"?(e=f,f=void 0):(e=f,f=d,d=c,c=void 0));try{const M=o.create(d,f);e(null,a(M,c,f))}catch(M){e(M)}}l.create=o.create,l.toCanvas=r.bind(null,t.render),l.toDataURL=r.bind(null,t.renderToDataURL),l.toString=r.bind(null,function(a,c,d){return n.render(a,d)})},8695:N=>{N.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},6221:(N,l,s)=>{const i=s(4792).getSymbolSize;l.getRowColCoords=function(t){if(1===t)return[];const n=Math.floor(t/7)+2,r=i(t),a=145===r?26:2*Math.ceil((r-13)/(2*n-2)),c=[r-7];for(let d=1;d<n-1;d++)c[d]=c[d-1]-a;return c.push(6),c.reverse()},l.getPositions=function(t){const n=[],r=l.getRowColCoords(t),a=r.length;for(let c=0;c<a;c++)for(let d=0;d<a;d++)0===c&&0===d||0===c&&d===a-1||c===a-1&&0===d||n.push([r[c],r[d]]);return n}},2424:(N,l,s)=>{const i=s(4016),o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(n){this.mode=i.ALPHANUMERIC,this.data=n}t.getBitsLength=function(r){return 11*Math.floor(r/2)+r%2*6},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){let a;for(a=0;a+2<=this.data.length;a+=2){let c=45*o.indexOf(this.data[a]);c+=o.indexOf(this.data[a+1]),r.put(c,11)}this.data.length%2&&r.put(o.indexOf(this.data[a]),6)},N.exports=t},2118:N=>{function l(){this.buffer=[],this.length=0}l.prototype={get:function(s){const i=Math.floor(s/8);return 1==(this.buffer[i]>>>7-s%8&1)},put:function(s,i){for(let o=0;o<i;o++)this.putBit(1==(s>>>i-o-1&1))},getLengthInBits:function(){return this.length},putBit:function(s){const i=Math.floor(this.length/8);this.buffer.length<=i&&this.buffer.push(0),s&&(this.buffer[i]|=128>>>this.length%8),this.length++}},N.exports=l},4425:N=>{function l(s){if(!s||s<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=s,this.data=new Uint8Array(s*s),this.reservedBit=new Uint8Array(s*s)}l.prototype.set=function(s,i,o,t){const n=s*this.size+i;this.data[n]=o,t&&(this.reservedBit[n]=!0)},l.prototype.get=function(s,i){return this.data[s*this.size+i]},l.prototype.xor=function(s,i,o){this.data[s*this.size+i]^=o},l.prototype.isReserved=function(s,i){return this.reservedBit[s*this.size+i]},N.exports=l},5663:(N,l,s)=>{const i=s(8419),o=s(4016);function t(n){this.mode=o.BYTE,"string"==typeof n&&(n=i(n)),this.data=new Uint8Array(n)}t.getBitsLength=function(r){return 8*r},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){for(let r=0,a=this.data.length;r<a;r++)n.put(this.data[r],8)},N.exports=t},4655:(N,l,s)=>{const i=s(2259),o=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];l.getBlocksCount=function(r,a){switch(a){case i.L:return o[4*(r-1)+0];case i.M:return o[4*(r-1)+1];case i.Q:return o[4*(r-1)+2];case i.H:return o[4*(r-1)+3];default:return}},l.getTotalCodewordsCount=function(r,a){switch(a){case i.L:return t[4*(r-1)+0];case i.M:return t[4*(r-1)+1];case i.Q:return t[4*(r-1)+2];case i.H:return t[4*(r-1)+3];default:return}}},2259:(N,l)=>{l.L={bit:1},l.M={bit:0},l.Q={bit:3},l.H={bit:2},l.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},l.from=function(o,t){if(l.isValid(o))return o;try{return function s(i){if("string"!=typeof i)throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return l.L;case"m":case"medium":return l.M;case"q":case"quartile":return l.Q;case"h":case"high":return l.H;default:throw new Error("Unknown EC Level: "+i)}}(o)}catch(n){return t}}},3114:(N,l,s)=>{const i=s(4792).getSymbolSize;l.getPositions=function(n){const r=i(n);return[[0,0],[r-7,0],[0,r-7]]}},7078:(N,l,s)=>{const i=s(4792),n=i.getBCHDigit(1335);l.getEncodedBits=function(a,c){const d=a.bit<<3|c;let f=d<<10;for(;i.getBCHDigit(f)-n>=0;)f^=1335<<i.getBCHDigit(f)-n;return 21522^(d<<10|f)}},5339:(N,l)=>{const s=new Uint8Array(512),i=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)s[n]=t,i[t]=n,t<<=1,256&t&&(t^=285);for(let n=255;n<512;n++)s[n]=s[n-255]})(),l.log=function(t){if(t<1)throw new Error("log("+t+")");return i[t]},l.exp=function(t){return s[t]},l.mul=function(t,n){return 0===t||0===n?0:s[i[t]+i[n]]}},449:(N,l,s)=>{const i=s(4016),o=s(4792);function t(n){this.mode=i.KANJI,this.data=n}t.getBitsLength=function(r){return 13*r},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){let r;for(r=0;r<this.data.length;r++){let a=o.toSJIS(this.data[r]);if(a>=33088&&a<=40956)a-=33088;else{if(!(a>=57408&&a<=60351))throw new Error("Invalid SJIS character: "+this.data[r]+"\nMake sure your charset is UTF-8");a-=49472}a=192*(a>>>8&255)+(255&a),n.put(a,13)}},N.exports=t},3667:(N,l)=>{l.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function i(o,t,n){switch(o){case l.Patterns.PATTERN000:return(t+n)%2==0;case l.Patterns.PATTERN001:return t%2==0;case l.Patterns.PATTERN010:return n%3==0;case l.Patterns.PATTERN011:return(t+n)%3==0;case l.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case l.Patterns.PATTERN101:return t*n%2+t*n%3==0;case l.Patterns.PATTERN110:return(t*n%2+t*n%3)%2==0;case l.Patterns.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+o)}}l.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},l.from=function(t){return l.isValid(t)?parseInt(t,10):void 0},l.getPenaltyN1=function(t){const n=t.size;let r=0,a=0,c=0,d=null,f=null;for(let e=0;e<n;e++){a=c=0,d=f=null;for(let I=0;I<n;I++){let p=t.get(e,I);p===d?a++:(a>=5&&(r+=a-5+3),d=p,a=1),p=t.get(I,e),p===f?c++:(c>=5&&(r+=c-5+3),f=p,c=1)}a>=5&&(r+=a-5+3),c>=5&&(r+=c-5+3)}return r},l.getPenaltyN2=function(t){const n=t.size;let r=0;for(let a=0;a<n-1;a++)for(let c=0;c<n-1;c++){const d=t.get(a,c)+t.get(a,c+1)+t.get(a+1,c)+t.get(a+1,c+1);(4===d||0===d)&&r++}return 3*r},l.getPenaltyN3=function(t){const n=t.size;let r=0,a=0,c=0;for(let d=0;d<n;d++){a=c=0;for(let f=0;f<n;f++)a=a<<1&2047|t.get(d,f),f>=10&&(1488===a||93===a)&&r++,c=c<<1&2047|t.get(f,d),f>=10&&(1488===c||93===c)&&r++}return 40*r},l.getPenaltyN4=function(t){let n=0;const r=t.data.length;for(let c=0;c<r;c++)n+=t.data[c];return 10*Math.abs(Math.ceil(100*n/r/5)-10)},l.applyMask=function(t,n){const r=n.size;for(let a=0;a<r;a++)for(let c=0;c<r;c++)n.isReserved(c,a)||n.xor(c,a,i(t,c,a))},l.getBestMask=function(t,n){const r=Object.keys(l.Patterns).length;let a=0,c=1/0;for(let d=0;d<r;d++){n(d),l.applyMask(d,t);const f=l.getPenaltyN1(t)+l.getPenaltyN2(t)+l.getPenaltyN3(t)+l.getPenaltyN4(t);l.applyMask(d,t),f<c&&(c=f,a=d)}return a}},4016:(N,l,s)=>{const i=s(4406),o=s(2699);l.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},l.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},l.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},l.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},l.MIXED={bit:-1},l.getCharCountIndicator=function(r,a){if(!r.ccBits)throw new Error("Invalid mode: "+r);if(!i.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?r.ccBits[0]:a<27?r.ccBits[1]:r.ccBits[2]},l.getBestModeForData=function(r){return o.testNumeric(r)?l.NUMERIC:o.testAlphanumeric(r)?l.ALPHANUMERIC:o.testKanji(r)?l.KANJI:l.BYTE},l.toString=function(r){if(r&&r.id)return r.id;throw new Error("Invalid mode")},l.isValid=function(r){return r&&r.bit&&r.ccBits},l.from=function(r,a){if(l.isValid(r))return r;try{return function t(n){if("string"!=typeof n)throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return l.NUMERIC;case"alphanumeric":return l.ALPHANUMERIC;case"kanji":return l.KANJI;case"byte":return l.BYTE;default:throw new Error("Unknown mode: "+n)}}(r)}catch(c){return a}}},7783:(N,l,s)=>{const i=s(4016);function o(t){this.mode=i.NUMERIC,this.data=t.toString()}o.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(n){let r,a,c;for(r=0;r+3<=this.data.length;r+=3)a=this.data.substr(r,3),c=parseInt(a,10),n.put(c,10);const d=this.data.length-r;d>0&&(a=this.data.substr(r),c=parseInt(a,10),n.put(c,3*d+1))},N.exports=o},1106:(N,l,s)=>{const i=s(5339);l.mul=function(t,n){const r=new Uint8Array(t.length+n.length-1);for(let a=0;a<t.length;a++)for(let c=0;c<n.length;c++)r[a+c]^=i.mul(t[a],n[c]);return r},l.mod=function(t,n){let r=new Uint8Array(t);for(;r.length-n.length>=0;){const a=r[0];for(let d=0;d<n.length;d++)r[d]^=i.mul(n[d],a);let c=0;for(;c<r.length&&0===r[c];)c++;r=r.slice(c)}return r},l.generateECPolynomial=function(t){let n=new Uint8Array([1]);for(let r=0;r<t;r++)n=l.mul(n,new Uint8Array([1,i.exp(r)]));return n}},1465:(N,l,s)=>{const i=s(4792),o=s(2259),t=s(2118),n=s(4425),r=s(6221),a=s(3114),c=s(3667),d=s(4655),f=s(2636),e=s(2088),I=s(7078),p=s(4016),y=s(2033);function O(w,x,A){const _=w.size,P=I.getEncodedBits(x,A);let b,C;for(b=0;b<15;b++)C=1==(P>>b&1),w.set(b<6?b:b<8?b+1:_-15+b,8,C,!0),w.set(8,b<8?_-b-1:b<9?15-b-1+1:15-b-1,C,!0);w.set(_-8,8,1,!0)}function J(w,x,A,_){let P;if(Array.isArray(w))P=y.fromArray(w);else{if("string"!=typeof w)throw new Error("Invalid data");{let j=x;if(!j){const H=y.rawSplit(w);j=e.getBestVersionForData(H,A)}P=y.fromString(w,j||40)}}const b=e.getBestVersionForData(P,A);if(!b)throw new Error("The amount of data is too big to be stored in a QR Code");if(x){if(x<b)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+b+".\n")}else x=b;const C=function T(w,x,A){const _=new t;A.forEach(function(S){_.put(S.mode.bit,4),_.put(S.getLength(),p.getCharCountIndicator(S.mode,w)),S.write(_)});const C=8*(i.getSymbolTotalCodewords(w)-d.getTotalCodewordsCount(w,x));for(_.getLengthInBits()+4<=C&&_.put(0,4);_.getLengthInBits()%8!=0;)_.putBit(0);const Z=(C-_.getLengthInBits())/8;for(let S=0;S<Z;S++)_.put(S%2?17:236,8);return function L(w,x,A){const _=i.getSymbolTotalCodewords(x),b=_-d.getTotalCodewordsCount(x,A),C=d.getBlocksCount(x,A),S=C-_%C,j=Math.floor(_/C),H=Math.floor(b/C),oe=H+1,ee=j-H,ie=new f(ee);let Q=0;const Y=new Array(C),te=new Array(C);let V=0;const q=new Uint8Array(w.buffer);for(let z=0;z<C;z++){const $=z<S?H:oe;Y[z]=q.slice(Q,Q+$),te[z]=ie.encode(Y[z]),Q+=$,V=Math.max(V,$)}const W=new Uint8Array(_);let G,D,ne=0;for(G=0;G<V;G++)for(D=0;D<C;D++)G<Y[D].length&&(W[ne++]=Y[D][G]);for(G=0;G<ee;G++)for(D=0;D<C;D++)W[ne++]=te[D][G];return W}(_,w,x)}(x,A,P),Z=i.getSymbolSize(x),S=new n(Z);return function M(w,x){const A=w.size,_=a.getPositions(x);for(let P=0;P<_.length;P++){const b=_[P][0],C=_[P][1];for(let Z=-1;Z<=7;Z++)if(!(b+Z<=-1||A<=b+Z))for(let S=-1;S<=7;S++)C+S<=-1||A<=C+S||w.set(b+Z,C+S,Z>=0&&Z<=6&&(0===S||6===S)||S>=0&&S<=6&&(0===Z||6===Z)||Z>=2&&Z<=4&&S>=2&&S<=4,!0)}}(S,x),function B(w){const x=w.size;for(let A=8;A<x-8;A++){const _=A%2==0;w.set(A,6,_,!0),w.set(6,A,_,!0)}}(S),function U(w,x){const A=r.getPositions(x);for(let _=0;_<A.length;_++){const P=A[_][0],b=A[_][1];for(let C=-2;C<=2;C++)for(let Z=-2;Z<=2;Z++)w.set(P+C,b+Z,-2===C||2===C||-2===Z||2===Z||0===C&&0===Z,!0)}}(S,x),O(S,A,0),x>=7&&function E(w,x){const A=w.size,_=e.getEncodedBits(x);let P,b,C;for(let Z=0;Z<18;Z++)P=Math.floor(Z/3),b=Z%3+A-8-3,C=1==(_>>Z&1),w.set(P,b,C,!0),w.set(b,P,C,!0)}(S,x),function v(w,x){const A=w.size;let _=-1,P=A-1,b=7,C=0;for(let Z=A-1;Z>0;Z-=2)for(6===Z&&Z--;;){for(let S=0;S<2;S++)if(!w.isReserved(P,Z-S)){let j=!1;C<x.length&&(j=1==(x[C]>>>b&1)),w.set(P,Z-S,j),b--,-1===b&&(C++,b=7)}if(P+=_,P<0||A<=P){P-=_,_=-_;break}}}(S,C),isNaN(_)&&(_=c.getBestMask(S,O.bind(null,S,A))),c.applyMask(_,S),O(S,A,_),{modules:S,version:x,errorCorrectionLevel:A,maskPattern:_,segments:P}}l.create=function(x,A){if(typeof x>"u"||""===x)throw new Error("No input text");let P,b,_=o.M;return typeof A<"u"&&(_=o.from(A.errorCorrectionLevel,o.M),P=e.from(A.version),b=c.from(A.maskPattern),A.toSJISFunc&&i.setToSJISFunction(A.toSJISFunc)),J(x,P,_,b)}},2636:(N,l,s)=>{const i=s(1106);function o(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}o.prototype.initialize=function(n){this.degree=n,this.genPoly=i.generateECPolynomial(this.degree)},o.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(n.length+this.degree);r.set(n);const a=i.mod(r,this.genPoly),c=this.degree-a.length;if(c>0){const d=new Uint8Array(this.degree);return d.set(a,c),d}return a},N.exports=o},2699:(N,l)=>{const s="[0-9]+";let o="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";o=o.replace(/u/g,"\\u");const t="(?:(?![A-Z0-9 $%*+\\-./:]|"+o+")(?:.|[\r\n]))+";l.KANJI=new RegExp(o,"g"),l.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),l.BYTE=new RegExp(t,"g"),l.NUMERIC=new RegExp(s,"g"),l.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const n=new RegExp("^"+o+"$"),r=new RegExp("^"+s+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");l.testKanji=function(d){return n.test(d)},l.testNumeric=function(d){return r.test(d)},l.testAlphanumeric=function(d){return a.test(d)}},2033:(N,l,s)=>{const i=s(4016),o=s(7783),t=s(2424),n=s(5663),r=s(449),a=s(2699),c=s(4792),d=s(4901);function f(E){return unescape(encodeURIComponent(E)).length}function e(E,O,v){const T=[];let L;for(;null!==(L=E.exec(v));)T.push({data:L[0],index:L.index,mode:O,length:L[0].length});return T}function I(E){const O=e(a.NUMERIC,i.NUMERIC,E),v=e(a.ALPHANUMERIC,i.ALPHANUMERIC,E);let T,L;return c.isKanjiModeEnabled()?(T=e(a.BYTE,i.BYTE,E),L=e(a.KANJI,i.KANJI,E)):(T=e(a.BYTE_KANJI,i.BYTE,E),L=[]),O.concat(v,T,L).sort(function(w,x){return w.index-x.index}).map(function(w){return{data:w.data,mode:w.mode,length:w.length}})}function p(E,O){switch(O){case i.NUMERIC:return o.getBitsLength(E);case i.ALPHANUMERIC:return t.getBitsLength(E);case i.KANJI:return r.getBitsLength(E);case i.BYTE:return n.getBitsLength(E)}}function U(E,O){let v;const T=i.getBestModeForData(E);if(v=i.from(O,T),v!==i.BYTE&&v.bit<T.bit)throw new Error('"'+E+'" cannot be encoded with mode '+i.toString(v)+".\n Suggested mode is: "+i.toString(T));switch(v===i.KANJI&&!c.isKanjiModeEnabled()&&(v=i.BYTE),v){case i.NUMERIC:return new o(E);case i.ALPHANUMERIC:return new t(E);case i.KANJI:return new r(E);case i.BYTE:return new n(E)}}l.fromArray=function(O){return O.reduce(function(v,T){return"string"==typeof T?v.push(U(T,null)):T.data&&v.push(U(T.data,T.mode)),v},[])},l.fromString=function(O,v){const L=function M(E){const O=[];for(let v=0;v<E.length;v++){const T=E[v];switch(T.mode){case i.NUMERIC:O.push([T,{data:T.data,mode:i.ALPHANUMERIC,length:T.length},{data:T.data,mode:i.BYTE,length:T.length}]);break;case i.ALPHANUMERIC:O.push([T,{data:T.data,mode:i.BYTE,length:T.length}]);break;case i.KANJI:O.push([T,{data:T.data,mode:i.BYTE,length:f(T.data)}]);break;case i.BYTE:O.push([{data:T.data,mode:i.BYTE,length:f(T.data)}])}}return O}(I(O,c.isKanjiModeEnabled())),J=function B(E,O){const v={},T={start:{}};let L=["start"];for(let J=0;J<E.length;J++){const w=E[J],x=[];for(let A=0;A<w.length;A++){const _=w[A],P=""+J+A;x.push(P),v[P]={node:_,lastCount:0},T[P]={};for(let b=0;b<L.length;b++){const C=L[b];v[C]&&v[C].node.mode===_.mode?(T[C][P]=p(v[C].lastCount+_.length,_.mode)-p(v[C].lastCount,_.mode),v[C].lastCount+=_.length):(v[C]&&(v[C].lastCount=_.length),T[C][P]=p(_.length,_.mode)+4+i.getCharCountIndicator(_.mode,O))}}L=x}for(let J=0;J<L.length;J++)T[L[J]].end=0;return{map:T,table:v}}(L,v),w=d.find_path(J.map,"start","end"),x=[];for(let A=1;A<w.length-1;A++)x.push(J.table[w[A]].node);return l.fromArray(function y(E){return E.reduce(function(O,v){const T=O.length-1>=0?O[O.length-1]:null;return T&&T.mode===v.mode?(O[O.length-1].data+=v.data,O):(O.push(v),O)},[])}(x))},l.rawSplit=function(O){return l.fromArray(I(O,c.isKanjiModeEnabled()))}},4792:(N,l)=>{let s;const i=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];l.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},l.getSymbolTotalCodewords=function(t){return i[t]},l.getBCHDigit=function(o){let t=0;for(;0!==o;)t++,o>>>=1;return t},l.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');s=t},l.isKanjiModeEnabled=function(){return typeof s<"u"},l.toSJIS=function(t){return s(t)}},4406:(N,l)=>{l.isValid=function(i){return!isNaN(i)&&i>=1&&i<=40}},2088:(N,l,s)=>{const i=s(4792),o=s(4655),t=s(2259),n=s(4016),r=s(4406),c=i.getBCHDigit(7973);function f(p,y){return n.getCharCountIndicator(p,y)+4}function e(p,y){let M=0;return p.forEach(function(B){const U=f(B.mode,y);M+=U+B.getBitsLength()}),M}l.from=function(y,M){return r.isValid(y)?parseInt(y,10):M},l.getCapacity=function(y,M,B){if(!r.isValid(y))throw new Error("Invalid QR Code version");typeof B>"u"&&(B=n.BYTE);const O=8*(i.getSymbolTotalCodewords(y)-o.getTotalCodewordsCount(y,M));if(B===n.MIXED)return O;const v=O-f(B,y);switch(B){case n.NUMERIC:return Math.floor(v/10*3);case n.ALPHANUMERIC:return Math.floor(v/11*2);case n.KANJI:return Math.floor(v/13);default:return Math.floor(v/8)}},l.getBestVersionForData=function(y,M){let B;const U=t.from(M,t.M);if(Array.isArray(y)){if(y.length>1)return function I(p,y){for(let M=1;M<=40;M++)if(e(p,M)<=l.getCapacity(M,y,n.MIXED))return M}(y,U);if(0===y.length)return 1;B=y[0]}else B=y;return function d(p,y,M){for(let B=1;B<=40;B++)if(y<=l.getCapacity(B,M,p))return B}(B.mode,B.getLength(),U)},l.getEncodedBits=function(y){if(!r.isValid(y)||y<7)throw new Error("Invalid QR Code version");let M=y<<12;for(;i.getBCHDigit(M)-c>=0;)M^=7973<<i.getBCHDigit(M)-c;return y<<12|M}},3210:(N,l,s)=>{const i=s(6355);l.render=function(r,a,c){let d=c,f=a;typeof d>"u"&&(!a||!a.getContext)&&(d=a,a=void 0),a||(f=function t(){try{return document.createElement("canvas")}catch(n){throw new Error("You need to specify a canvas element")}}()),d=i.getOptions(d);const e=i.getImageWidth(r.modules.size,d),I=f.getContext("2d"),p=I.createImageData(e,e);return i.qrToImageData(p.data,r,d),function o(n,r,a){n.clearRect(0,0,r.width,r.height),r.style||(r.style={}),r.height=a,r.width=a,r.style.height=a+"px",r.style.width=a+"px"}(I,f,e),I.putImageData(p,0,0),f},l.renderToDataURL=function(r,a,c){let d=c;return typeof d>"u"&&(!a||!a.getContext)&&(d=a,a=void 0),d||(d={}),l.render(r,a,d).toDataURL(d.type||"image/png",(d.rendererOpts||{}).quality)}},2334:(N,l,s)=>{const i=s(6355);function o(r,a){const c=r.a/255,d=a+'="'+r.hex+'"';return c<1?d+" "+a+'-opacity="'+c.toFixed(2).slice(1)+'"':d}function t(r,a,c){let d=r+a;return typeof c<"u"&&(d+=" "+c),d}l.render=function(a,c,d){const f=i.getOptions(c),e=a.modules.size,I=a.modules.data,p=e+2*f.margin,y=f.color.light.a?"<path "+o(f.color.light,"fill")+' d="M0 0h'+p+"v"+p+'H0z"/>':"",M="<path "+o(f.color.dark,"stroke")+' d="'+function n(r,a,c){let d="",f=0,e=!1,I=0;for(let p=0;p<r.length;p++){const y=Math.floor(p%a),M=Math.floor(p/a);!y&&!e&&(e=!0),r[p]?(I++,p>0&&y>0&&r[p-1]||(d+=e?t("M",y+c,.5+M+c):t("m",f,0),f=0,e=!1),y+1<a&&r[p+1]||(d+=t("h",I),I=0)):f++}return d}(I,e,f.margin)+'"/>',E='<svg xmlns="http://www.w3.org/2000/svg" '+(f.width?'width="'+f.width+'" height="'+f.width+'" ':"")+'viewBox="0 0 '+p+" "+p+'" shape-rendering="crispEdges">'+y+M+"</svg>\n";return"function"==typeof d&&d(null,E),E}},6355:(N,l)=>{function s(i){if("number"==typeof i&&(i=i.toString()),"string"!=typeof i)throw new Error("Color should be defined as hex string");let o=i.slice().replace("#","").split("");if(o.length<3||5===o.length||o.length>8)throw new Error("Invalid hex color: "+i);(3===o.length||4===o.length)&&(o=Array.prototype.concat.apply([],o.map(function(n){return[n,n]}))),6===o.length&&o.push("F","F");const t=parseInt(o.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:255&t,hex:"#"+o.slice(0,6).join("")}}l.getOptions=function(o){o||(o={}),o.color||(o.color={});const n=o.width&&o.width>=21?o.width:void 0;return{width:n,scale:n?4:o.scale||4,margin:typeof o.margin>"u"||null===o.margin||o.margin<0?4:o.margin,color:{dark:s(o.color.dark||"#000000ff"),light:s(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},l.getScale=function(o,t){return t.width&&t.width>=o+2*t.margin?t.width/(o+2*t.margin):t.scale},l.getImageWidth=function(o,t){const n=l.getScale(o,t);return Math.floor((o+2*t.margin)*n)},l.qrToImageData=function(o,t,n){const r=t.modules.size,a=t.modules.data,c=l.getScale(r,n),d=Math.floor((r+2*n.margin)*c),f=n.margin*c,e=[n.color.light,n.color.dark];for(let I=0;I<d;I++)for(let p=0;p<d;p++){let y=4*(I*d+p),M=n.color.light;I>=f&&p>=f&&I<d-f&&p<d-f&&(M=e[a[Math.floor((I-f)/c)*r+Math.floor((p-f)/c)]?1:0]),o[y++]=M.r,o[y++]=M.g,o[y++]=M.b,o[y]=M.a}}}}]);