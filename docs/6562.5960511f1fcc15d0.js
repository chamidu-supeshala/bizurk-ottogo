"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6562],{7425:(w,O,r)=>{r.d(O,{I:()=>X});var m=r(655),l=r(7154),n=r(1150),e=r(4650),d=r(8008),E=r(5379),x=r(3416),C=r(2472),v=r(6895),b=r(2635),M=r(5433),T=r(6109),Z=r(3709),A=r(1896);const k=["popover"],U=["searchInput"];function L(o,g){1&o&&(e.TgZ(0,"div",48)(1,"div")(2,"p",49),e._uU(3),e.ALo(4,"translate"),e.qZA()()()),2&o&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"no-data-found")," "))}function I(o,g){}function D(o,g){}function p(o,g){if(1&o&&(e.ynx(0),e.YNc(1,D,0,0,"ng-template",53),e.BQk()),2&o){e.oxw();const t=e.MAs(11);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function u(o,g){}function i(o,g){}function _(o,g){if(1&o&&(e.TgZ(0,"tr",60),e.YNc(1,u,0,0,"ng-template",53),e.YNc(2,i,0,0,"ng-template",53),e.qZA()),2&o){e.oxw();const t=e.MAs(9),a=e.MAs(11);e.xp6(1),e.Q6J("ngTemplateOutlet",t),e.xp6(1),e.Q6J("ngTemplateOutlet",a)}}function s(o,g){if(1&o&&(e.TgZ(0,"td",61),e.ALo(1,"translate"),e.TgZ(2,"div",62),e._uU(3),e.qZA()(),e.TgZ(4,"td",63),e.ALo(5,"translate"),e.TgZ(6,"div",64),e._UZ(7,"img",19),e.TgZ(8,"div",34),e._uU(9),e.qZA()()()),2&o){const t=e.oxw(2).$implicit,a=e.oxw(4);e.uIk("data-label",e.lcZ(1,8,"nickname")),e.xp6(3),e.hij(" ",t.nickname," "),e.xp6(1),e.uIk("data-label",e.lcZ(5,10,"exchange")),e.xp6(3),e.Tol("okx"===t.exchangePlatform.exchange&&"dark"!==a.theme?"h-5 filter":"h-5"),e.Q6J("src",t.exchangePlatform.imgURL,e.LSH)("alt",t.exchangePlatform.name),e.xp6(2),e.hij(" ",t.exchangePlatform.name," ")}}function f(o,g){if(1&o&&(e.TgZ(0,"div",82),e._uU(1),e.qZA()),2&o){const t=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",t.strategy," ")}}function K(o,g){1&o&&(e.TgZ(0,"div",74),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"not-currently-in-use")," "))}function B(o,g){if(1&o){const t=e.EpF();e.TgZ(0,"div",83)(1,"div",84),e.NdJ("click",function(){e.CHM(t);const c=e.oxw(3).$implicit,h=e.oxw(4);return e.KtG(h.disconnectAccount(c))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&o&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"disconnect-account")," "))}function Q(o,g){if(1&o){const t=e.EpF();e.TgZ(0,"td",65),e.ALo(1,"translate"),e.TgZ(2,"div",66),e.NdJ("copied",function(c){e.CHM(t);const h=e.oxw(6);return e.KtG(h.onCopied(c))}),e.TgZ(3,"p",67),e._uU(4),e.qZA(),e._UZ(5,"app-copy",68)(6,"i",69),e.qZA()(),e.TgZ(7,"td",70),e.ALo(8,"translate"),e.YNc(9,f,2,1,"div",71),e.YNc(10,K,3,3,"ng-template",null,72,e.W1O),e.qZA(),e.TgZ(12,"td",73),e.ALo(13,"translate"),e.TgZ(14,"p",74),e._uU(15),e.ALo(16,"date"),e.qZA()(),e.TgZ(17,"td",75)(18,"div",76),e._UZ(19,"i",77),e.TgZ(20,"ion-popover",78),e.YNc(21,B,4,3,"ng-template"),e.qZA()(),e.TgZ(22,"div",79)(23,"button",80)(24,"span",81),e._uU(25),e.ALo(26,"translate"),e.qZA()()()()}if(2&o){const t=e.MAs(11),a=e.oxw(2),c=a.$implicit,h=a.index;e.uIk("data-label",e.lcZ(1,11,"accountId")),e.xp6(2),e.Q6J("appCopying",c.user_id),e.xp6(2),e.Oqu(c.user_id),e.xp6(3),e.uIk("data-label",e.lcZ(8,13,"strategy")),e.xp6(2),e.Q6J("ngIf",c.strategy)("ngIfElse",t),e.xp6(3),e.uIk("data-label",e.lcZ(13,15,"status")),e.xp6(3),e.hij(" ",e.xi3(16,17,c.gmtModified,"MM/dd/yyyy, h:mm")," "),e.xp6(4),e.Q6J("id","click-trigger-"+h),e.xp6(1),e.Q6J("trigger","click-trigger-"+h),e.xp6(5),e.hij(" ",e.lcZ(26,20,"disconnect-account")," ")}}const q=function(o){return{"expanded-row":o}},j=function(o){return{"rotate-180":o}};function R(o,g){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",52),e.NdJ("click",function(){e.CHM(t);const c=e.oxw().index,h=e.oxw(4);return e.KtG(h.onClickTableRow(c))}),e.YNc(2,I,0,0,"ng-template",53),e.TgZ(3,"td",54)(4,"div",55),e._UZ(5,"ion-icon",56),e.qZA()(),e.YNc(6,p,2,1,"ng-container",51),e.qZA(),e.YNc(7,_,3,2,"tr",57),e.YNc(8,s,10,12,"ng-template",null,58,e.W1O),e.YNc(10,Q,27,22,"ng-template",null,59,e.W1O),e.BQk()}if(2&o){const t=e.MAs(9),a=e.oxw().index,c=e.oxw(4);e.xp6(1),e.Q6J("ngClass",e.VKq(5,q,c.expanded[a])),e.xp6(1),e.Q6J("ngTemplateOutlet",t),e.xp6(3),e.Q6J("ngClass",e.VKq(7,j,c.expanded[a])),e.xp6(1),e.Q6J("ngIf",!c.isMobile),e.xp6(1),e.Q6J("ngIf",c.expanded[a]&&c.isMobile)}}function W(o,g){if(1&o&&(e.ynx(0),e.YNc(1,R,12,9,"ng-container",51),e.BQk()),2&o){const t=g.$implicit,a=e.oxw(4);e.xp6(1),e.Q6J("ngIf",a.showOnlyActiveStrategy&&t.strategy||!a.showOnlyActiveStrategy)}}function Y(o,g){if(1&o&&e.YNc(0,W,2,1,"ng-container",50),2&o){const t=e.oxw().rows;e.Q6J("ngForOf",t)}}function G(o,g){if(1&o&&(e.TgZ(0,"table",36)(1,"thead")(2,"tr",37)(3,"th",38),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th",39),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",40),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th",41),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"th",42),e._uU(16),e.ALo(17,"translate"),e.qZA(),e._UZ(18,"th",43)(19,"th",44),e.qZA()(),e.TgZ(20,"tbody",45),e.YNc(21,L,5,3,"div",46),e.YNc(22,Y,1,1,"ng-template",null,47,e.W1O),e.qZA()()),2&o){const t=g.total,a=g.isInitialized,c=e.MAs(23);e.xp6(4),e.hij(" ",e.lcZ(5,7,"nickname")," "),e.xp6(3),e.hij(" ",e.lcZ(8,9,"exchange")," "),e.xp6(3),e.hij(" ",e.lcZ(11,11,"accountId")," "),e.xp6(3),e.hij(" ",e.lcZ(14,13,"strategy")," "),e.xp6(3),e.hij(" ",e.lcZ(17,15,"status")," "),e.xp6(5),e.Q6J("ngIf",a&&!t)("ngIfElse",c)}}function H(o,g){if(1&o){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),e._UZ(4,"ion-icon",8),e.qZA(),e.TgZ(5,"div")(6,"h1",9),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"h2",10),e._uU(10),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",11)(13,"div",12)(14,"ion-button",13),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.isOpenConnectExchangeModal=!0)}),e._UZ(15,"ion-icon",14),e._uU(16),e.ALo(17,"translate"),e.qZA()()()(),e.TgZ(18,"div",15)(19,"div",16)(20,"div",17),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"button",18),e.NdJ("click",function(c){e.CHM(t);const h=e.oxw();return e.KtG(h.handleSelectOpen(c))}),e._UZ(24,"img",19)(25,"ion-icon",20),e.qZA()(),e.TgZ(26,"div",21)(27,"div",22),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.handleFocusSearchInput())}),e._UZ(28,"div",23)(29,"ion-icon",24),e.TgZ(30,"div",25)(31,"input",26,27),e.NdJ("blur",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.isSearchInputClosed=!0)}),e.qZA()()()()(),e.TgZ(33,"div",28)(34,"div",29)(35,"div",30)(36,"div",31)(37,"div",32),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"button",33),e.NdJ("click",function(c){e.CHM(t);const h=e.oxw();return e.KtG(h.handleSelectOpen(c))}),e._UZ(41,"img",19),e.TgZ(42,"div",34),e._uU(43),e.qZA(),e._UZ(44,"ion-icon",20),e.qZA()()()(),e.TgZ(45,"app-base-table",35),e.YNc(46,G,24,17,"ng-template"),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("routerLink","/settings"),e.xp6(4),e.hij(" ",e.lcZ(8,20,"connected-exchanges")," "),e.xp6(3),e.AsE(" ",t.connectedCount," ",e.lcZ(11,22,"connected-accounts")," "),e.xp6(6),e.hij(" ",e.lcZ(17,24,"connect-exchange")," "),e.xp6(5),e.hij(" ",e.lcZ(22,26,"filter")," "),e.xp6(3),e.Tol("okx"===t.exchanges[t.selectedExchange].exchange&&"dark"!==t.theme?"filter h-6 pointer-events-none":"h-6 pointer-events-none"),e.Q6J("src",t.exchanges[t.selectedExchange].logo,e.LSH)("alt",t.exchanges[t.selectedExchange].name),e.xp6(3),e.ekj("closed",t.isSearchInputClosed),e.xp6(11),e.hij(" ",e.lcZ(39,28,"filter")," "),e.xp6(3),e.Tol("okx"===t.exchanges[t.selectedExchange].exchange&&"dark"!==t.theme?"filter h-6 pointer-events-none":"h-6 pointer-events-none"),e.Q6J("src",t.exchanges[t.selectedExchange].logo,e.LSH)("alt",t.exchanges[t.selectedExchange].name),e.xp6(2),e.hij(" ",t.exchanges[t.selectedExchange].name," "),e.xp6(2),e.Q6J("fetchFn",t.fetchFn)("pageSize",10)}}function F(o,g){if(1&o&&e._UZ(0,"img",19),2&o){const t=e.oxw().$implicit,a=e.oxw(2);e.Tol("okx"===t.exchange&&"dark"!==a.theme?"h-7 filter":"h-7"),e.Q6J("src",t.logo,e.LSH)("alt",t.name)}}function z(o,g){1&o&&e._UZ(0,"div",92)}function $(o,g){if(1&o){const t=e.EpF();e.TgZ(0,"ion-item",87),e.NdJ("click",function(){const h=e.CHM(t).index,J=e.oxw(2);return e.KtG(J.changeExchange(h))}),e.TgZ(1,"ion-label")(2,"div",88),e.YNc(3,F,1,4,"img",89),e.YNc(4,z,1,0,"div",90),e.TgZ(5,"div",91),e._uU(6),e.qZA()()()()}if(2&o){const t=g.$implicit;e.xp6(3),e.Q6J("ngIf",t.isShow),e.xp6(1),e.Q6J("ngIf",!t.isShow),e.xp6(2),e.Oqu(t.name)}}function V(o,g){if(1&o&&(e.TgZ(0,"ion-list",85),e.YNc(1,$,7,3,"ion-item",86),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.exchanges)}}let X=(()=>{class o extends l.H{constructor(t,a,c,h,J,ee){super(),this.platform=t,this.themeService=a,this.i18n=c,this.ExchangeService=h,this.popoverController=J,this.cdr=ee,this.dummyData=[],this.exchanges=[{exchange:"",kind:""}],this.isMenuOpen=!1,this.selectedExchange=0,this.isOpenConnectExchangeModal=!1,this.isSearchInputClosed=!0,this.expanded=[],this.showOnlyActiveStrategy=!1,this.connectedCount=0,this.filterText="",this.exchange="",this.kind="",this.loaded=!1,this.fetchFn=({page:ne,pageSize:te})=>(0,m.mG)(this,void 0,void 0,function*(){let S=0,N=[];const P=yield this.ExchangeService.queryBinding(ne,te,this.exchange,this.kind).toPromise();return 0===P.code&&P.data.rows&&(N=P.data.rows.map(y=>Object.assign(Object.assign({},y),{balance:0,exchangePlatform:{imgURL:y.icon,name:y.name,exchange:y.exchange}})),S=P.data.total,this.connectedCount=S),{rows:N,total:S}}),this.isMobile=window.innerWidth<=768}onResize(){this.isMobile=window.innerWidth<768}ngOnInit(){this.getExchangeQuery()}get theme(){return this.themeService._theme}disconnectAccount(t){this.ExchangeService.unbinding({id:String(t.id)}).pipe().subscribe(a=>(0,m.mG)(this,void 0,void 0,function*(){0===a.code?(yield this.popoverController.dismiss(),yield this.toast.toastSuccess("\u89e3\u7ed1\u6210\u529f"),this.BaseTableComponent.fetchData(0)):this.toast.toastError(a.message)}))}getExchangeQuery(){this.ExchangeService.exchangeQuery().pipe().subscribe(t=>(0,m.mG)(this,void 0,void 0,function*(){if(0===t.code)return console.log(t.data),this.loaded=!0,this.exchanges=[],void t.data.forEach(a=>{this.exchanges.push({logo:a.icon,name:a.name,exchange:a.exchange,kind:a.kind,isShow:-1===this.exchanges.findIndex(c=>c.exchange===a.exchange)})})}))}notifyParentEvent(t){this.isOpenConnectExchangeModal=!1,this.exchange="",this.kind="",this.BaseTableComponent.fetchData(0)}refreshExchange(){this.exchange="",this.kind="",this.BaseTableComponent.fetchData(0)}onClickTableRow(t){this.isMobile&&(this.expanded[t]=!this.expanded[t])}handleFocusSearchInput(){var t;this.isSearchInputClosed=!1,null!==(t=this.searchInput)&&void 0!==t&&t.nativeElement&&this.searchInput.nativeElement.focus()}onChangeShowActive(){this.fetchFn({page:0,pageSize:10,endTime:""})}onCopied(t){this.toast.toastSuccess(this.i18n.instant("copied"))}handleSelectOpen(t){this.popover.event=t,this.isMenuOpen=!0}clearSearch(){this.filterText=""}truncateCenter(t){return t.substring(0,5)+"..."+t.substring(t.length-4,t.length)}changeExchange(t){this.selectedExchange=t,this.exchange=this.exchanges[t].exchange,this.kind=this.exchanges[t].kind,this.BaseTableComponent.fetchData(0)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.t4),e.Y36(E.f),e.Y36(x.sK),e.Y36(C.O),e.Y36(d.Dh),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-connected-exchanges"]],viewQuery:function(t,a){if(1&t&&(e.Gf(k,5),e.Gf(U,5),e.Gf(n.K,5)),2&t){let c;e.iGM(c=e.CRH())&&(a.popover=c.first),e.iGM(c=e.CRH())&&(a.searchInput=c.first),e.iGM(c=e.CRH())&&(a.BaseTableComponent=c.first)}},hostBindings:function(t,a){1&t&&e.NdJ("resize",function(){return a.onResize()},!1,e.Jf7)},features:[e.qOj],decls:6,vars:4,consts:[["class","connected-exchanges flex flex-col w-full sm:px-5 pt-4 sm:pb-4",4,"ngIf"],[3,"isOpen","isOpenChange","notifyParentEvent"],["side","bottom","alignment","start",1,"theme-popover",3,"isOpen","dismissOnSelect","didDismiss"],["popover",""],[1,"connected-exchanges","flex","flex-col","w-full","sm:px-5","pt-4","sm:pb-4"],[1,"flex","flex-col","sm:flex-row","sm:justify-between","w-full","mb-4"],[1,"flex"],[1,"block","sm:hidden","mr-1","cursor-pointer","w-8","h-8",3,"routerLink"],["name","chevron-back-outline",1,"w-8","h-8"],[1,"text-2xl","text-text-strong","font-medium"],[1,"font-medium","mt-1","sm:mt-2"],[1,"flex","justify-center"],[1,"gradient-border-wrapper","flex","p-0.5"],[1,"connect-exchange","text-text-strong","m-0",3,"click"],["name","add-circle-outline","slot","start",1,"w-8","h-8","sm:w-6","sm:h-6","sm:ml-0"],[1,"relative","flex","items-center","justify-between","sm:hidden","w-full","mb-4","px-2"],[1,"exchange-filter","relative","flex","items-center","text-text-strong","mr-4"],[1,"hidden","2xs:flex","px-2","border","border-border-input","border-r-0","rounded-l-md","bg-bg-input","h-10","items-center"],[1,"w-full","border-solid","cursor-pointer","h-10","rounded-md","2xs:rounded-l-none","border-border-input","border","flex","items-center","justify-between","bg-bg-input","px-2",3,"click"],[3,"src","alt"],["name","chevron-down-outline",1,"pointer-events-none","text-input-placeholder","pl-1"],[1,"flex","justify-end","w-full"],[1,"exchange-search","relative","flex","items-center","w-full","z-10","overflow-x-clip",3,"click"],[1,"absolute","w-full","h-full","bg-bg-input","border","border-border-input","rounded-full"],["name","search-outline",1,"text-grey-2","w-5","h-5","ml-2.5","mr-0.5","flex-shrink-0","z-10"],[1,"flex-1","h-full","py-2","z-10"],["placeholder","Search...",1,"search-input","w-full","align-middle",3,"blur"],["searchInput",""],[1,"table-container","flex","flex-col","w-full","h-full","border-t","sm:border","border-main-border"],[1,"table-header","flex","items-center","justify-between","p-2"],[1,"flex","gap-3","sm:gap-6"],[1,"exchange-filter","relative","hidden","sm:flex","items-center","text-text-strong"],[1,"flex","px-2","border","border-border-input","border-r-0","rounded-l-md","bg-main-bg","h-full","items-center"],[1,"w-full","border-solid","cursor-pointer","h-10","rounded-r-md","border-border-input","border","flex","items-center","justify-between","bg-main-bg","px-2",3,"click"],[1,"text-grey-1","text-right","md:text-right","ml-1"],[3,"fetchFn","pageSize"],[1,"table-auto","text-[15px]","w-full"],[1,"border-y","border-main-border","font-medium","text-base"],[1,"hidden","2xs:table-cell","text-left","py-2.5","sm:py-1","pl-2","md:pl-4","sm:w-40","text-grey-1"],[1,"text-left","py-2.5","sm:py-1","w-56","text-grey-1","pl-2","pr-5"],[1,"text-left","py-2.5","sm:py-1","w-40","xl:w-40","pad-hidden","text-grey-1"],[1,"text-left","py-2.5","sm:py-1","w-56","pad-hidden","text-grey-1"],[1,"text-left","py-2.5","sm:py-1","pr-2","md:pr-4","w-40","xl:w-fit","pad-hidden","text-grey-1"],[1,"w-7","hidden","md:table-cell"],[1,"w-7","md:hidden"],[1,"text-grey-2","font-medium"],["class","overlay-container flex items-center justify-center",4,"ngIf","ngIfElse"],["dataTable",""],[1,"overlay-container","flex","items-center","justify-center"],[1,"font-medium","text-sm","opacity-30"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"cursor-pointer","pl-2",3,"ngClass","click"],[3,"ngTemplateOutlet"],[1,"md:hidden","border-b","border-main-border"],[1,"flex","justify-center","px-1"],["name","chevron-down-outline",1,"transition-transform","text-xl",3,"ngClass"],["class","data-container md:hidden bg-grey-4",4,"ngIf"],["showCells",""],["hiddenCells",""],[1,"data-container","md:hidden","bg-grey-4"],[1,"exchange-table-cell","hidden","2xs:table-cell"],[1,"text-text-strong","pl-2","md:pl-4"],[1,"exchange-table-cell","exchange-platform"],[1,"flex","pl-2"],[1,"border-b","border-main-border","py-2","md:pr-4"],[1,"copy-cell","flex","items-center",3,"appCopying","copied"],[1,"w-full","truncate"],[1,"w-4","min-w-[16px]","ml-1"],[1,"icon-checkmark","ml-1"],[1,"exchange-table-cell"],["class","text-text-strong truncate",4,"ngIf","ngIfElse"],["noStrategy",""],[1,"exchange-table-cell","md:pr-4","text-left"],[1,"truncate"],[1,"exchange-table-cell","md:pr-4","text-center"],[1,"hidden","md:flex","items-center"],[1,"icon-dots3",3,"id"],["triggerAction","click",1,"tab-popover",3,"trigger"],[1,"flex","md:hidden","justify-between","gap-2"],[1,"relative","flex","items-center","h-9","justify-center","bg-main-red","rounded-md","text-white","px-2","py-0.5"],[1,"font-medium"],[1,"text-text-strong","truncate"],[1,"flex","flex-col","rounded-lg","border","border-main-border","text-base"],[1,"p-3","text-text-strong","font-medium","hover:bg-main-blue-transparent","cursor-pointer",3,"click"],["lines","full"],["class","cursor-pointer","lines","none",3,"click",4,"ngFor","ngForOf"],["lines","none",1,"cursor-pointer",3,"click"],[1,"flex","items-center","justify-between"],[3,"class","src","alt",4,"ngIf"],["class","h-7",4,"ngIf"],[1,"text-text-strong"],[1,"h-7"]],template:function(t,a){1&t&&(e.TgZ(0,"ng-scrollbar"),e.YNc(1,H,47,30,"div",0),e.qZA(),e.TgZ(2,"app-connect-exchange-modal",1),e.NdJ("isOpenChange",function(h){return a.isOpenConnectExchangeModal=h})("notifyParentEvent",function(h){return a.notifyParentEvent(h)}),e.qZA(),e.TgZ(3,"ion-popover",2,3),e.NdJ("didDismiss",function(){return a.isMenuOpen=!1}),e.YNc(5,V,2,1,"ng-template"),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",a.loaded),e.xp6(1),e.Q6J("isOpen",a.isOpenConnectExchangeModal),e.xp6(1),e.Q6J("isOpen",a.isMenuOpen)("dismissOnSelect",!0))},dependencies:[v.mk,v.sg,v.O5,v.tP,d.YG,d.gu,d.Ie,d.Q$,d.q_,d.d8,d.YI,b.T,M.KC,T.p,Z.rH,n.K,A.m,v.uU,x.X$],styles:['ng-scrollbar[_ngcontent-%COMP%]     .ng-scroll-content{max-width:100%;min-height:100%;display:flex!important;flex-direction:column}ion-button.connect-exchange[_ngcontent-%COMP%]{--background: var(--main-bg);--border-radius: 7px;--padding-start: .5rem;--padding-end: .5rem;font-size:16px;height:40px}@media (min-width: 640px){ion-button.connect-exchange[_ngcontent-%COMP%]{height:28px;font-size:14px}}ion-popover[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--inner-padding-start: 10px;--inner-padding-end: 10px}ion-chip[_ngcontent-%COMP%]{margin:0;white-space:nowrap}ion-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:15px}ion-chip.error[_ngcontent-%COMP%]{--background: rgb(45, 16, 36);--color: var(--main-red)}  ion-popover.select-popover::part(content){--box-shadow: none;width:160px;border-radius:8px;border:1px solid var(--main-border)}  ion-popover.select-popover ion-item{--color: var(--text-strong) !important;--color-activated: var(--main-blue) !important;--color-focused: var(--main-blue) !important;--color-hover: white !important;--background-activated: var(--main-blue-transparent) !important;--background-activated-opacity: 1 !important;--background-focused: var(--main-blue-transparent) !important;--background-focused-opacity: 1 !important;--background-hover: var(--main-blue-transparent) !important;--background-hover-opacity: .5 !important}ion-item[_ngcontent-%COMP%]{--background-hover-opacity: 0;--padding-start: 0px;--padding-top: 0px;--padding-bottom: 0px;--padding-end: 0px;--color: var(--text-strong);--color-hover: var(--text-strong)}ion-item.show-strategy-exchange[_ngcontent-%COMP%]{--min-height: 28px;--background: transparent}ion-item.show-strategy-exchange[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{--border-color: var(--main-border)}.exchange-filter[_ngcontent-%COMP%]{white-space:pre;min-width:140px}@media (min-width: 375px){.exchange-filter[_ngcontent-%COMP%]{min-width:178px}}.copied[_ngcontent-%COMP%]{color:var(--accent-blue)!important}tr[_ngcontent-%COMP%]:not(.data-container)   td[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}  .copy-cell.copied app-copy{display:none}  .copy-cell.copied i{display:block}  .copy-cell:not(.copied) app-copy{display:block}  .copy-cell:not(.copied) i{display:none}  .light-mode ion-chip.error{--background: #e412582c}.gradient-border-wrapper[_ngcontent-%COMP%]{position:relative;z-index:1;height:44px;margin-top:12px;width:184px}.gradient-border-wrapper[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:180px}@media (min-width: 640px){.gradient-border-wrapper[_ngcontent-%COMP%]{height:32px;margin-top:0;width:initial}.gradient-border-wrapper[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:initial}}.gradient-border-wrapper[_ngcontent-%COMP%]:after{content:"";background:linear-gradient(.25turn,#29abe9,#e01ae1,#29abe9);position:absolute;z-index:-1;inset:0;border-radius:.5rem}table[_ngcontent-%COMP%]   .data-container[_ngcontent-%COMP%]{width:100vw}table[_ngcontent-%COMP%]   .data-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:0}table[_ngcontent-%COMP%]   .data-container[_ngcontent-%COMP%]   td.exchange-platform[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{justify-content:flex-end}@media (min-width: 640px){table[_ngcontent-%COMP%]   .data-container[_ngcontent-%COMP%]{width:calc(100vw - 40px)}}.exchange-search[_ngcontent-%COMP%]{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s;max-width:100%}@media (min-width: 768px){.exchange-search[_ngcontent-%COMP%]{max-width:none}}@media (min-width: 1280px){.exchange-search[_ngcontent-%COMP%]{min-width:350px}}.exchange-search[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--padding-top: 4px;--padding-bottom: 4px}.exchange-search[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{background-color:transparent;color:var(--text-strong);outline:2px solid transparent;outline-offset:2px;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}.exchange-search.closed[_ngcontent-%COMP%]{width:40px}.exchange-search.closed[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:0px}  .connected-exchanges .table-container{min-height:calc(100vh - 241px)!important;background-color:var(--bg-table)}@media (min-width: 640px){  .connected-exchanges .table-container{min-height:calc(100vh - 234px)!important}}  .connected-exchanges .table-container .exchange-table{font-size:15px;line-height:15px}  .connected-exchanges .table-container .exchange-table-cell{border-bottom-width:1px;border-color:var(--main-border);padding-top:.75rem;padding-bottom:.75rem}@media (min-width: 640px){  .connected-exchanges .table-container .exchange-table-cell{padding-bottom:.5rem;padding-top:.625rem}}.filter[_ngcontent-%COMP%]{filter:invert(100%)}ion-popover.theme-popover[_ngcontent-%COMP%]::part(content), ion-popover.select-popover[_ngcontent-%COMP%]::part(content){--width: 270px;border-radius:5px;border-width:1px;border-style:solid;border-color:var(--main-border)}']}),o})()},7762:(w,O,r)=>{r.d(O,{x:()=>x});var m=r(6895),l=r(4650),n=r(8008),e=r(3416),d=r(1896),E=r(8854);let x=(()=>{class C{constructor(){this.refreshList=new l.vpe,this.isOpenModal=!1}ngOnInit(){}refresh(){this.isOpenModal=!1,this.refreshList.emit()}}return C.\u0275fac=function(b){return new(b||C)},C.\u0275cmp=l.Xpm({type:C,selectors:[["app-connect-exchange-button"]],outputs:{refreshList:"refreshList"},standalone:!0,features:[l.jDz],decls:8,vars:4,consts:[[1,"gradient-border","p-0.5"],[1,"connect-btn","flex","items-center","justify-between","bg-main-bg","rounded-lg","py-1","px-2",3,"click"],["name","add-circle-outline",1,"text-text-strong","mr-1","w-5","h-5","flex-shrink-0"],[1,"cursor-pointer","text-text-strong","whitespace-nowrap","capitalize"],[1,"w-4"],[3,"isOpen","isOpenChange","notifyParentEvent"]],template:function(b,M){1&b&&(l.TgZ(0,"div",0)(1,"button",1),l.NdJ("click",function(){return M.isOpenModal=!0}),l._UZ(2,"ion-icon",2),l.TgZ(3,"div",3),l._uU(4),l.ALo(5,"translate"),l.qZA(),l._UZ(6,"div",4),l.qZA()(),l.TgZ(7,"app-connect-exchange-modal",5),l.NdJ("isOpenChange",function(Z){return M.isOpenModal=Z})("notifyParentEvent",function(){return M.refresh()}),l.qZA()),2&b&&(l.xp6(4),l.hij(" ",l.lcZ(5,2,"exchange-connection")," "),l.xp6(3),l.Q6J("isOpen",M.isOpenModal))},dependencies:[m.ez,n.Pc,n.gu,E.T,d.m,e.aw,e.X$],styles:['.gradient-border[_ngcontent-%COMP%]{position:relative;z-index:1}.gradient-border[_ngcontent-%COMP%]:after{content:"";position:absolute;z-index:-1;inset:0;border-radius:9.5px;background:linear-gradient(.25turn,#29abe9,#e01ae1,#29abe9);background-position:0 50%;background-size:200% 200%;animation:changeBg 2.5s linear infinite}.gradient-border.disabled[_ngcontent-%COMP%]:after{background:#dddddd}']}),C})()},1896:(w,O,r)=>{r.d(O,{m:()=>D});var m=r(655),l=r(6895),n=r(4650),e=r(4006),d=r(8008),E=r(3416),x=r(7341),C=r(9116),v=r(8854),b=r(5379),M=r(2472);const T=["popover"];function Z(p,u){if(1&p){const i=n.EpF();n.TgZ(0,"div")(1,"div",9)(2,"div"),n._uU(3),n.ALo(4,"translate"),n.qZA()(),n.TgZ(5,"div",13)(6,"ion-input",14),n.NdJ("ngModelChange",function(s){n.CHM(i);const f=n.oxw(2);return n.KtG(f.accountOptKey.passphrase=s)})("ionChange",function(){n.CHM(i);const s=n.oxw(2);return n.KtG(s.verifyInfo())}),n.ALo(7,"translate"),n.qZA()()()}if(2&p){const i=u.$implicit,_=n.oxw(2);n.xp6(3),n.Oqu(n.lcZ(4,3,i.i18n)),n.xp6(3),n.Q6J("placeholder",n.lcZ(7,5,i.i18n))("ngModel",_.accountOptKey.passphrase)}}function A(p,u){if(1&p){const i=n.EpF();n.TgZ(0,"div",4)(1,"div",5)(2,"div",6),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"ion-icon",7),n.NdJ("click",function(){n.CHM(i),n.oxw();const s=n.MAs(1);return n.KtG(s.dismiss())}),n.qZA()(),n.TgZ(6,"div",8)(7,"div",9),n._uU(8),n.ALo(9,"translate"),n.qZA(),n.TgZ(10,"button",10),n.NdJ("click",function(s){n.CHM(i);const f=n.oxw();return n.KtG(f.handleSelectOpen(s))}),n._UZ(11,"img",11),n.TgZ(12,"span",9),n._uU(13),n.ALo(14,"translate"),n.qZA(),n._UZ(15,"ion-icon",12),n.qZA(),n.TgZ(16,"div",9)(17,"div"),n._uU(18),n.ALo(19,"translate"),n.qZA()(),n.TgZ(20,"div",13)(21,"ion-input",14),n.NdJ("ngModelChange",function(s){n.CHM(i);const f=n.oxw();return n.KtG(f.params.nickName=s)})("ionChange",function(){n.CHM(i);const s=n.oxw();return n.KtG(s.verifyInfo())}),n.ALo(22,"translate"),n.qZA()(),n.TgZ(23,"div",15)(24,"div"),n._uU(25),n.ALo(26,"translate"),n.qZA(),n.TgZ(27,"div",16),n._uU(28),n.ALo(29,"translate"),n._UZ(30,"ion-icon",17),n.qZA()(),n.TgZ(31,"div",13)(32,"ion-input",14),n.NdJ("ngModelChange",function(s){n.CHM(i);const f=n.oxw();return n.KtG(f.params.apiKey=s)})("ionChange",function(){n.CHM(i);const s=n.oxw();return n.KtG(s.verifyInfo())}),n.ALo(33,"translate"),n.qZA(),n._UZ(34,"ion-icon",18),n.qZA(),n.TgZ(35,"div",9)(36,"div"),n._uU(37),n.ALo(38,"translate"),n.qZA()(),n.TgZ(39,"div",13)(40,"ion-input",14),n.NdJ("ngModelChange",function(s){n.CHM(i);const f=n.oxw();return n.KtG(f.params.apiSecret=s)})("ionChange",function(){n.CHM(i);const s=n.oxw();return n.KtG(s.verifyInfo())}),n.ALo(41,"translate"),n.qZA(),n._UZ(42,"ion-icon",18),n.qZA(),n.YNc(43,Z,8,7,"div",19),n.TgZ(44,"div",20)(45,"button",21),n.NdJ("click",function(){n.CHM(i);const s=n.oxw();return n.KtG(s.handleDismiss())}),n._uU(46),n.ALo(47,"translate"),n.qZA(),n.TgZ(48,"button",22),n.NdJ("click",function(){n.CHM(i);const s=n.oxw();return n.KtG(s.connectExchange())}),n._uU(49),n.ALo(50,"translate"),n.qZA()()()()}if(2&p){const i=n.oxw();n.xp6(3),n.hij(" ",n.lcZ(4,21,"exchange-connection")," "),n.xp6(5),n.Oqu(n.lcZ(9,23,"select-exchange")),n.xp6(3),n.Tol("okx"===i.exchanges[i.selectedExchange].exchange&&"dark"!==i.theme?"h-6 filter":"h-6"),n.Q6J("src",i.exchanges[i.selectedExchange].logo,n.LSH)("alt",i.exchanges[i.selectedExchange].name),n.xp6(2),n.Oqu(n.lcZ(14,25,i.exchanges[i.selectedExchange].name)),n.xp6(5),n.Oqu(n.lcZ(19,27,"nickname")),n.xp6(3),n.Q6J("placeholder",n.lcZ(22,29,"name-this-account"))("ngModel",i.params.nickName),n.xp6(4),n.Oqu(n.lcZ(26,31,"api-key")),n.xp6(3),n.hij(" ",n.lcZ(29,33,"how-to-find-api-key")," "),n.xp6(4),n.Q6J("placeholder",n.lcZ(33,35,"API Key"))("ngModel",i.params.apiKey),n.xp6(5),n.Oqu(n.lcZ(38,37,"api-secret")),n.xp6(3),n.Q6J("placeholder",n.lcZ(41,39,"api-secret"))("ngModel",i.params.apiSecret),n.xp6(3),n.Q6J("ngForOf",i.exchanges[i.selectedExchange].accountOptKey),n.xp6(3),n.hij(" ",n.lcZ(47,41,"cancel")," "),n.xp6(2),n.Q6J("disabled",i.invalid||i.isLoading),n.xp6(1),n.hij(" ",n.lcZ(50,43,"exchange-connection")," ")}}function k(p,u){if(1&p&&n._UZ(0,"img",29),2&p){const i=n.oxw().$implicit,_=n.oxw(2);n.Tol("okx"===i.exchange&&"dark"!==_.theme?"h-7 filter":"h-7"),n.Q6J("src",i.logo,n.LSH)("alt",i.name)}}function U(p,u){1&p&&n._UZ(0,"div",30)}function L(p,u){if(1&p){const i=n.EpF();n.TgZ(0,"ion-item",25),n.NdJ("click",function(){const f=n.CHM(i).index,K=n.oxw(2);return n.KtG(K.changeValue(f))}),n.TgZ(1,"ion-label")(2,"div",26),n.YNc(3,k,1,4,"img",27),n.YNc(4,U,1,0,"div",28),n.TgZ(5,"div",9),n._uU(6),n.qZA()()()()}if(2&p){const i=u.$implicit;n.xp6(3),n.Q6J("ngIf",i.isShow),n.xp6(1),n.Q6J("ngIf",!i.isShow),n.xp6(2),n.Oqu(i.name)}}function I(p,u){if(1&p&&(n.TgZ(0,"ion-list",23),n.YNc(1,L,7,3,"ion-item",24),n.qZA()),2&p){const i=n.oxw();n.xp6(1),n.Q6J("ngForOf",i.exchanges)}}let D=(()=>{class p extends x.u{constructor(i,_,s){super(),this.themeService=i,this.ExchangeService=_,this.loadingController=s,this.notifyParentEvent=new n.vpe,this.isMenuOpen=!1,this.selectedExchange=0,this.exchanges=[],this.accountOptKey={passphrase:""},this.params={nickName:"",apiKey:"",apiSecret:""},this.invalid=!0,this.isLoading=!1,this.getExchangeQuery()}get theme(){return this.themeService._theme}handleSelectOpen(i){this.popover.event=i,this.isMenuOpen=!0}hasAllValues(i){console.log(i);for(let _ in i)if(""===i[_])return!1;return!0}getExchangeQuery(){this.ExchangeService.exchangeQuery().pipe().subscribe(i=>(0,m.mG)(this,void 0,void 0,function*(){if(0===i.code)return this.exchanges=[],void i.data.forEach(_=>{this.exchanges.push({logo:_.icon,name:_.name,kind:_.kind,exchange:_.exchange,accountOptKey:JSON.parse(_.accountOptKey),isShow:-1===this.exchanges.findIndex(s=>s.exchange===_.exchange)})})}))}changeValue(i){this.selectedExchange=i}verifyInfo(){this.invalid=!this.hasAllValues(this.params)||this.selectedExchange>1&&!this.hasAllValues(this.accountOptKey)}connectExchange(){return(0,m.mG)(this,void 0,void 0,function*(){this.isLoading||(this.isLoading=!0,yield(yield this.loadingController.create()).present(),this.ExchangeService.bindingExchange({exchange:this.exchanges[this.selectedExchange].exchange,kind:this.exchanges[this.selectedExchange].kind,nickname:this.params.nickName,apiKey:this.params.apiKey,apiSecret:this.params.apiSecret,optKey:JSON.stringify(this.accountOptKey)}).pipe().subscribe(_=>(0,m.mG)(this,void 0,void 0,function*(){0===_.code?(this.toast.toastSuccess("\u7ed1\u5b9a\u6210\u529f"),this.notifyParentEvent.emit(!0)):this.toast.toastError("\u7ed1\u5b9a\u5931\u8d25")})).add(()=>{this.isLoading=!1,this.loadingController.dismiss()}))})}}return p.\u0275fac=function(i){return new(i||p)(n.Y36(b.f),n.Y36(M.O),n.Y36(d.HT))},p.\u0275cmp=n.Xpm({type:p,selectors:[["app-connect-exchange-modal"]],viewQuery:function(i,_){if(1&i&&n.Gf(T,5),2&i){let s;n.iGM(s=n.CRH())&&(_.popover=s.first)}},outputs:{notifyParentEvent:"notifyParentEvent"},standalone:!0,features:[n.qOj,n.jDz],decls:6,vars:3,consts:[[1,"theme-modal",3,"isOpen","didDismiss"],["modal",""],["side","bottom","alignment","center",1,"theme-popover",3,"isOpen","dismissOnSelect","didDismiss"],["popover",""],[1,"p-4"],[1,"flex","items-center","mb-4"],[1,"flex-1","text-2xl","text-text-strong","font-medium"],["name","close-outline",1,"w-10","h-10","cursor-pointer",3,"click"],[1,"font-medium"],[1,"text-text-strong"],[1,"w-full","border-solid","cursor-pointer","h-10","rounded-md","border-border-input","border","flex","items-center","justify-between","bg-bg-input","px-2","mb-4",3,"click"],[1,"h-6","pointer-events-none",3,"src","alt"],["name","chevron-down-outline",1,"pointer-events-none"],[1,"h-10","rounded-md","border-border-input","border","flex","items-center","bg-bg-input","px-2","mb-4"],[1,"",3,"placeholder","ngModel","ngModelChange","ionChange"],[1,"text-text-strong","flex","justify-between"],[1,"text-main-blue","text-xs","items-center","flex"],["name","help-circle-outline",1,"fill-main-blue","ml-1","w-6","h-6"],["name","qr-code-outline","size","large",1,"text-grey-2"],[4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"border","border-solid","rounded","border-main-border","bg-grey-4","px-4","py-2","text-lg","text-text-strong",3,"click"],[1,"btn-blue","border","text-lg","font-medium","px-4","py-2","rounded",3,"disabled","click"],["lines","full"],["class","cursor-pointer","lines","none",3,"click",4,"ngFor","ngForOf"],["lines","none",1,"cursor-pointer",3,"click"],[1,"flex","items-center","justify-between"],[3,"class","src","alt",4,"ngIf"],["class","h-7",4,"ngIf"],[3,"src","alt"],[1,"h-7"]],template:function(i,_){1&i&&(n.TgZ(0,"ion-modal",0,1),n.NdJ("didDismiss",function(){return _.handleDismiss()}),n.YNc(2,A,51,45,"ng-template"),n.qZA(),n.TgZ(3,"ion-popover",2,3),n.NdJ("didDismiss",function(){return _.isMenuOpen=!1}),n.YNc(5,I,2,1,"ng-template"),n.qZA()),2&i&&(n.Q6J("isOpen",_.isOpen),n.xp6(3),n.Q6J("isOpen",_.isMenuOpen)("dismissOnSelect",!0))},dependencies:[l.ez,l.sg,l.O5,e.UX,e.JJ,e.u5,e.On,E.aw,E.X$,d.Pc,d.gu,d.pK,d.Ie,d.Q$,d.q_,d.ki,d.d8,d.j9,v.T,C.Q],styles:["ion-modal[_ngcontent-%COMP%]{--width: 400px;--height: auto;--padding-start: 8px;--padding-end: 8px}ion-item[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--inner-padding-start: 10px;--inner-padding-end: 10px}ion-input[_ngcontent-%COMP%]{--padding-top: 8px;--padding-bottom: 8px}.filter[_ngcontent-%COMP%]{filter:invert(100%)}ion-popover.theme-popover[_ngcontent-%COMP%]::part(content), ion-popover.select-popover[_ngcontent-%COMP%]::part(content){--width: 270px;border-radius:5px;border-width:1px;border-style:solid;border-color:var(--main-border)}"]}),p})()},2472:(w,O,r)=>{r.d(O,{O:()=>e});var m=r(2340),l=r(4650),n=r(529);let e=(()=>{class d{constructor(x){this.http=x}exchangeQuery(){return this.http.get(`${m.N.BASE_URL}/user/exchange/query`)}queryBinding(x,C,v,b){return this.http.get(`${m.N.BASE_URL}/user/exchange/queryBinding?page=${x}&rows=${C}&exchange=${v}&kind=${b}`)}bindingExchange(x){return this.http.post(`${m.N.BASE_URL}/user/exchange/binding`,x)}unbinding(x){return this.http.post(`${m.N.BASE_URL}/user/exchange/unbinding`,x)}}return d.\u0275fac=function(x){return new(x||d)(l.LFG(n.eN))},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);