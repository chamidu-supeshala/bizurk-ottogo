"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7620],{7620:($,m,o)=>{o.r(m),o.d(m,{NotificationsPage:()=>z});var s=o(6895),v=o(4006),u=o(7154),x=o(9116),l=o(8008),C=o(8634),f=o(9082),d=o(3416),g=o(655),t=o(4650),h=o(8854),P=o(2722),b=o(5433),M=o(2242),_=o(6396),w=o(5939),O=o(3570),N=o(5194),A=o(7179);function T(n,c){if(1&n&&(t.TgZ(0,"ion-content",2),t.GkF(1,3),t.qZA()),2&n){t.oxw();const i=t.MAs(2);t.xp6(1),t.Q6J("ngTemplateOutlet",i)}}function Z(n,c){1&n&&t._UZ(0,"span",17)}const y=function(n,c,i,e){return{"text-grey-1":n,"pl-4":c,"text-text-strong":i,"text-lg leading-5":e}},U=function(n){return{value:n}};function F(n,c){if(1&n){const i=t.EpF();t.TgZ(0,"div",12)(1,"div",13),t.NdJ("click",function(){const r=t.CHM(i).$implicit,p=t.oxw(3);return t.KtG(p.onAction(r))}),t.YNc(2,Z,1,0,"span",14),t.TgZ(3,"div",15),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"div",16),t._uU(7),t.ALo(8,"date"),t.qZA()()}if(2&n){const i=c.$implicit,e=t.oxw(3);t.xp6(2),t.Q6J("ngIf",!i.read),t.xp6(1),t.Q6J("ngClass",t.l5B(11,y,i.read,i.read&&e.unreadCount>0,!i.read,!e.isModal)),t.xp6(1),t.hij(" ",t.xi3(5,5,i.text,t.VKq(16,U,i.value))," "),t.xp6(2),t.Q6J("ngClass",e.isModal?"text-xs":"text-sm"),t.xp6(1),t.hij(" ",t.xi3(8,8,i.time,"yyyy-MM-dd hh:mm")," ")}}function I(n,c){if(1&n&&(t.TgZ(0,"div",18),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){const i=t.oxw(3);t.Q6J("ngClass",!i.notifications.length&&i.isModal?"mt-28":"py-6"),t.xp6(1),t.hij(" ",t.lcZ(2,2,i.notifications.length?"no-more-notifications":i.isModal?"no-notifications-at-this-time":"no-notifications")," ")}}function k(n,c){if(1&n){const i=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(i);const a=t.oxw(3);return t.KtG(a.seeAll())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"see-all-notifications")," "))}function J(n,c){if(1&n&&(t.ynx(0),t.YNc(1,F,9,18,"div",9),t.YNc(2,I,3,4,"div",10),t.YNc(3,k,3,3,"button",11),t.BQk()),2&n){const i=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",i.notifications),t.xp6(1),t.Q6J("ngIf",!i.isLoading&&i.allNotificationsLoaded),t.xp6(1),t.Q6J("ngIf",i.notificationLimitReached)}}function L(n,c){if(1&n){const i=t.EpF();t.TgZ(0,"div",4)(1,"div",5),t.YNc(2,J,4,3,"ng-container",6),t.TgZ(3,"ion-infinite-scroll",7),t.NdJ("ionInfinite",function(a){t.CHM(i);const r=t.oxw();return t.KtG(r.loadMore(a))}),t._UZ(4,"ion-infinite-scroll-content",8),t.qZA()()()}if(2&n){const i=t.oxw();t.xp6(2),t.Q6J("ngIf",i.notifications.length>0),t.xp6(1),t.Q6J("disabled",i.allNotificationsLoaded||i.notificationLimitReached)}}let S=(()=>{class n extends u.H{constructor(i,e,a,r,p,G){super(),this.notificationService=i,this.userService=e,this.SocialService=a,this.cdr=r,this.websocketService=p,this.storage=G,this.isModal=!1,this.selectedFilter=f.E.All,this.onUserAction=new t.vpe,this.unreadCount=0,this.notifications=[],this.isOpenHashPowerModal=!1,this.isLoading=!1,this.totalNotifications=0,this.notificationParams={rows:20,index:0,status:f.E.All},this.clientId="",this.token=null}ngOnInit(){return(0,g.mG)(this,void 0,void 0,function*(){this.notificationService.count$.pipe((0,P.R)(this.onDestroy$)).subscribe(i=>{this.unreadCount=i})})}ngAfterViewInit(){this.notificationParams.status=this.selectedFilter,this.initContent(),this.notificationService.notificationAllParams$.next(this.notificationParams)}ngOnChanges(i){i.selectedFilter&&i.selectedFilter.currentValue!=this.notificationParams.status&&(this.notifications=[],this.notificationParams={rows:20,index:0,status:this.selectedFilter},this.initContent())}initContent(){return(0,g.mG)(this,void 0,void 0,function*(){yield this.getNotifications()})}get allNotificationsLoaded(){return this.totalNotifications<=this.notifications.length}get notificationLimitReached(){return this.isModal&&this.notifications.length>40}hasScrollbar(){return(0,g.mG)(this,void 0,void 0,function*(){const i=yield this.pageContainer.getScrollElement();return i.scrollHeight>i.clientHeight})}onAction(i){"link"===(i.isRead||this.notificationService.notificationMarkAsReadId$.next(i.id),i.actionType)&&(this.onUserAction.emit(!0),this.router.navigateByUrl(i.actionRef))}getNotifications(i=null){i&&i.complete(),this.isLoading=!0,this.notificationService.notificationAllData$.subscribe(e=>{e.length>0&&(this.notifications=this.notificationParams.status===f.E.All?e:e.filter(a=>{if(!a.isRead)return a}),this.totalNotifications=e.length.total)}).add(()=>{this.isLoading=!1})}loadMore(i){return(0,g.mG)(this,void 0,void 0,function*(){this.notificationLimitReached||(this.notificationParams=this.notificationService.notificationAllParams$.getValue(),this.notificationParams.index=this.notifications[this.notifications.length-1].id,this.notificationService.notificationAllParams$.next(this.notificationParams),i.state="closed",setTimeout(()=>{i.target.complete()},1e3))})}seeAll(){this.onUserAction.emit(!0),this.router.navigate(["/notifications"],{queryParams:{originUrl:this.router.url}})}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(_.g),t.Y36(w.K),t.Y36(O.V),t.Y36(t.sBO),t.Y36(N.i),t.Y36(A.V))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-all-notifications"]],inputs:{isModal:"isModal",selectedFilter:"selectedFilter",pageContainer:"pageContainer"},outputs:{onUserAction:"onUserAction"},standalone:!0,features:[t.qOj,t.TTD,t.jDz],decls:3,vars:2,consts:[["ion-custom-scrollbar","","style","height: 352px !important;",4,"ngIf","ngIfElse"],["notificationList",""],["ion-custom-scrollbar","",2,"height","352px !important"],[3,"ngTemplateOutlet"],[1,"flex","flex-col","pl-3","pr-2","h-full"],[1,"flex","flex-col","flex-auto","w-full","px-1","text-text-strong","border-t","border-main-border"],[4,"ngIf"],["threshold","0","position","bottom",3,"disabled","ionInfinite"],[1,"pt-2"],["class","flex flex-col mt-1 py-1.5 pr-2 relative border-b border-main-border",4,"ngFor","ngForOf"],["class","w-full text-center text-grey-1 text-lg font-medium no-notifications",3,"ngClass",4,"ngIf"],["class","bg-main-blue-transparent text-main-blue px-3 py-2 mt-3 text-xl rounded-xl font-bold",3,"click",4,"ngIf"],[1,"flex","flex-col","mt-1","py-1.5","pr-2","relative","border-b","border-main-border"],[1,"flex","items-center","cursor-pointer",3,"click"],["class","rounded-full w-2 h-2 mr-2 unread-notification",4,"ngIf"],[1,"flex-1","text-base","font-medium","leading-4",3,"ngClass"],[1,"text-right","text-xs","text-grey-1","font-normal","mr-0.5","mt-1","sm:mt-0.5",3,"ngClass"],[1,"rounded-full","w-2","h-2","mr-2","unread-notification"],[1,"w-full","text-center","text-grey-1","text-lg","font-medium","no-notifications",3,"ngClass"],[1,"bg-main-blue-transparent","text-main-blue","px-3","py-2","mt-3","text-xl","rounded-xl","font-bold",3,"click"]],template:function(i,e){if(1&i&&(t.YNc(0,T,2,1,"ion-content",0),t.YNc(1,L,5,2,"ng-template",null,1,t.W1O)),2&i){const a=t.MAs(2);t.Q6J("ngIf",e.isModal)("ngIfElse",a)}},dependencies:[s.ez,s.mk,s.sg,s.O5,s.tP,s.uU,l.Pc,l.W2,l.ju,l.MB,d.aw,d.X$,x.Q,h.T,b.kb,M.C],styles:[".unread-notification[_ngcontent-%COMP%]{background-color:#ff0242}"]}),n})();var Q=o(3709),j=o(1003);function Y(n,c){if(1&n&&(t.TgZ(0,"div",12),t.GkF(1,13),t.qZA()),2&n){t.oxw();const i=t.MAs(12);t.xp6(1),t.Q6J("ngTemplateOutlet",i)}}function E(n,c){if(1&n&&(t.TgZ(0,"div",23),t._uU(1),t.ALo(2,"async"),t.qZA()),2&n){const i=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,1,i.notificationService.count$)," ")}}function H(n,c){if(1&n){const i=t.EpF();t.TgZ(0,"div",14)(1,"a",15),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.handleBack())}),t._UZ(2,"ion-icon",16),t.qZA(),t.TgZ(3,"h1",17),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"div",18)(7,"div",19)(8,"button",20),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.selectedFilter=a.notificationStatus.All)}),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"button",21),t.NdJ("click",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.selectedFilter=a.notificationStatus.Unread)}),t._uU(12),t.ALo(13,"translate"),t.YNc(14,E,3,3,"div",22),t.ALo(15,"async"),t.qZA()()()}if(2&n){const i=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,8,"notifications")," "),t.xp6(4),t.ekj("active",i.selectedFilter===i.notificationStatus.All),t.xp6(1),t.hij(" ",t.lcZ(10,10,"see-all")," "),t.xp6(2),t.ekj("active",i.selectedFilter===i.notificationStatus.Unread),t.xp6(1),t.hij(" ",t.lcZ(13,12,"unread")," "),t.xp6(2),t.Q6J("ngIf",(t.lcZ(15,14,i.notificationService.count$)||0)>0)}}let z=(()=>{class n extends u.H{constructor(i,e){super(),this.route=i,this.notificationService=e,this.selectedFilter=f.E.All,this.notificationStatus=f.E,this.isMobile=window.innerWidth<640}onResize(){this.isMobile=window.innerWidth<640}ngOnInit(){this.originUrl=this.route.snapshot.queryParamMap.get("originUrl")}handleBack(){var i;this.router.navigateByUrl(null!==(i=this.originUrl)&&void 0!==i?i:"/")}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(Q.gz),t.Y36(_.g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-notifications-page"]],hostBindings:function(i,e){1&i&&t.NdJ("resize",function(){return e.onResize()},!1,t.Jf7)},standalone:!0,features:[t.qOj,t.jDz],decls:13,vars:5,consts:[[3,"fullscreen"],["ionContent",""],[1,"hidden","sm:block","sticky","top-0","w-full","z-50"],[1,"notifications-page-container","flex","flex-1","flex-col","lg:flex-row","md:pb-0"],[1,"notifications-left","border-r","border-main-border","xl:flex-1"],[1,"notifications-center","flex","flex-col","mb-40","lg:mb-0"],[1,"notification-wrapper","flex","flex-col","w-full","h-full","relative"],["class","notification-header flex flex-col bg-main-bg z-10 mb-1",4,"ngIf","ngIfElse"],[1,"flex","flex-col","h-full"],[3,"pageContainer","selectedFilter"],[1,"notifications-right","mx-auto","lg:border-l","border-main-border","px-2","pt-2","fade-in","hidden","lg:block"],["notificationsHeader",""],[1,"notification-header","flex","flex-col","bg-main-bg","z-10","mb-1"],[3,"ngTemplateOutlet"],[1,"flex","flex-auto","items-center","w-full","py-3","sm:pt-4","sticky","sm:relative","top-0","bg-main-bg","z-50"],[1,"cursor-pointer","w-8","h-8","mr-1","sm:mr-0","sm:ml-2",3,"click"],["name","chevron-back-outline",1,"w-8","h-8"],[1,"text-3xl","text-text-strong","font-medium"],[1,"flex","flex-col","sm:flex-row","gap-4","sm:gap-0","px-3","sm:px-4","pb-4","justify-between"],[1,"flex"],[1,"filter-item","px-3","py-1.5","rounded-lg","font-medium",3,"click"],[1,"filter-item","px-3","py-1.5","rounded-lg","font-medium","flex","items-center","gap-1",3,"click"],["class","text-white unread-notification flex items-center justify-center rounded-full w-5 h-5 text-base ml-2",4,"ngIf"],[1,"text-white","unread-notification","flex","items-center","justify-center","rounded-full","w-5","h-5","text-base","ml-2"]],template:function(i,e){if(1&i&&(t.TgZ(0,"ion-content",0,1),t._UZ(2,"app-header",2),t.TgZ(3,"div",3),t._UZ(4,"div",4),t.TgZ(5,"div",5)(6,"div",6),t.YNc(7,Y,2,1,"div",7),t.TgZ(8,"div",8),t._UZ(9,"app-all-notifications",9),t.qZA()()(),t._UZ(10,"div",10),t.qZA()(),t.YNc(11,H,16,16,"ng-template",null,11,t.W1O)),2&i){const a=t.MAs(1),r=t.MAs(12);t.Q6J("fullscreen",!0),t.xp6(7),t.Q6J("ngIf",!e.isMobile)("ngIfElse",r),t.xp6(2),t.Q6J("pageContainer",a)("selectedFilter",e.selectedFilter)}},dependencies:[s.ez,s.O5,s.tP,s.Ov,l.Pc,l.W2,l.gu,d.aw,d.X$,x.Q,h.T,S,C.x,j.G,v.u5],styles:["[_nghost-%COMP%]{--left-sidebar-width: 260px;--right-sidebar-width: 360px}@media (min-width: 1600px){[_nghost-%COMP%]{--left-sidebar-width: 300px}}.unread-notification[_ngcontent-%COMP%]{background-color:#ff0242}.notifications-page-container[_ngcontent-%COMP%]{min-height:calc(100% - 68px)}.notifications-page-container[_ngcontent-%COMP%]   .notifications-left[_ngcontent-%COMP%]{max-width:var(--left-sidebar-width)}@media (min-width: 1850px){.notifications-page-container[_ngcontent-%COMP%]   .notifications-left[_ngcontent-%COMP%]{min-width:var(--left-sidebar-width)}}.notifications-page-container[_ngcontent-%COMP%]   .notifications-center[_ngcontent-%COMP%]{width:auto;flex:1}@media (min-width: 1600px){.notifications-page-container[_ngcontent-%COMP%]   .notifications-center[_ngcontent-%COMP%]{flex:none;width:900px;flex-grow:1;flex-shrink:0}}@media (min-width: 1850px){.notifications-page-container[_ngcontent-%COMP%]   .notifications-center[_ngcontent-%COMP%]{width:calc(100% - var(--left-sidebar-width) - var(--right-sidebar-width))}}.notifications-page-container[_ngcontent-%COMP%]   .notifications-right[_ngcontent-%COMP%]{width:var(--right-sidebar-width)}.notifications-page-container[_ngcontent-%COMP%]   .notification-wrapper[_ngcontent-%COMP%]{max-width:800px}@media (min-width: 640px){.notifications-page-container[_ngcontent-%COMP%]   .notification-wrapper[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]{position:sticky;top:65px}}@media (min-width: 1024px){.notifications-page-container[_ngcontent-%COMP%]   .notification-wrapper[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]{top:69px}}@media (min-width: 1600px){.notifications-page-container[_ngcontent-%COMP%]   .notification-wrapper[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]{top:78px}}.notifications-page-container[_ngcontent-%COMP%]   .filter-item.active[_ngcontent-%COMP%]{background-color:var(--main-blue-transparent);color:var(--main-blue)}.notifications-page-container[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]:focus-visible{outline:0}.notifications-page-container[_ngcontent-%COMP%]   .notifications-search[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--placeholder-opacity: 1;--placeholder-font-weight: 500;--placeholder-color: var(--input-placeholder);--padding-start: 6px;--color: var(--text-strong)}@media (min-width: 640px){.notifications-page-container[_ngcontent-%COMP%]   .notifications-search[_ngcontent-%COMP%]{min-width:248px}}  .notifications-page-container app-loading-spinner{margin-top:25px}"]}),n})()}}]);