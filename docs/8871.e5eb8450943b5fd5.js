"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8871],{8871:(V,L,l)=>{l.r(L),l.d(L,{MyPortfolioPageModule:()=>Te});var d=l(6895),y=l(3709),g=l(8008),_=l(3416),x=l(5433),A=l(8854),b=l(8634),Z=l(9116),M=l(1836),r=l(655),t=l(4650),O=l(4006),C=l(7154),N=l(6511),Q=l(7645),S=l(9808),j=l(2343),I=l(225),k=l(7011),E=l(5939),B=l(8222),U=l(5116);function F(i,s){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("(",e.realStrategyPageList.length,")")}}function z(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.userService.toggleLoginModal(!0))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"landing-page-login-sign-up")," "))}function R(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"app-strategy-item",26),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.selectReal(a.id))})("notifyParentEvent",function(n){t.CHM(e);const a=t.oxw(3);return t.KtG(a.handleNotifyParent(n))}),t.qZA()}2&i&&t.Q6J("data",s.$implicit)}function H(i,s){1&i&&t._UZ(0,"app-loading-spinner",27)}function K(i,s){if(1&i&&(t.TgZ(0,"div",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,1,e.realStrategyPageList.length?"no-more-results":"no-data-found")," ")}}function h(i,s){if(1&i&&(t.ynx(0),t.YNc(1,R,1,1,"app-strategy-item",23),t.YNc(2,H,1,0,"app-loading-spinner",24),t.YNc(3,K,3,3,"div",25),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.realStrategyPageList),t.xp6(1),t.Q6J("ngIf",e.scrollConfig.loading),t.xp6(1),t.Q6J("ngIf",!e.scrollConfig.loading)}}const v=function(i,s){return{active:i,desc:s}};function u(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",2)(1,"h2",3),t._uU(2),t.ALo(3,"translate"),t.YNc(4,F,2,1,"span",4),t.qZA(),t.TgZ(5,"div",5)(6,"div",6)(7,"button",7),t.NdJ("click",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.handleFilter("rank",n))}),t.TgZ(8,"div",8),t._uU(9),t.ALo(10,"translate"),t._UZ(11,"ion-icon",9),t.qZA()(),t.TgZ(12,"button",7),t.NdJ("click",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.handleFilter("yield",n))}),t.TgZ(13,"div",8),t._uU(14),t.ALo(15,"translate"),t._UZ(16,"ion-icon",9),t.qZA()(),t.TgZ(17,"button",7),t.NdJ("click",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.handleFilter("date",n))}),t.TgZ(18,"div",10),t._uU(19),t.ALo(20,"translate"),t._UZ(21,"ion-icon",9),t.qZA()(),t._UZ(22,"div",11),t.TgZ(23,"button",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.isOpenFilterModal=!0)}),t._UZ(24,"i",13),t.qZA()()(),t._UZ(25,"div",14),t.TgZ(26,"div",15)(27,"div",16),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"div",17),t._uU(31),t.ALo(32,"translate"),t.qZA()(),t._UZ(33,"div",18),t.TgZ(34,"div",19)(35,"div",20),t.YNc(36,z,3,3,"button",21),t.YNc(37,h,4,3,"ng-container",4),t.qZA()()()}if(2&i){const e=s.ngLet,o=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,12,"my-active-strategy")," "),t.xp6(2),t.Q6J("ngIf",e),t.xp6(3),t.Q6J("ngClass",t.WLB(24,v,"rank"===o.filter.field,-1===o.filter.order)),t.xp6(2),t.hij(" ",t.lcZ(10,14,"dashboard-filter-rank")," "),t.xp6(3),t.Q6J("ngClass",t.WLB(27,v,"yield"===o.filter.field,-1===o.filter.order)),t.xp6(2),t.hij(" ",t.lcZ(15,16,"Annualized-Revenue")," "),t.xp6(3),t.Q6J("ngClass",t.WLB(30,v,"date"===o.filter.field,-1===o.filter.order)),t.xp6(2),t.hij(" ",t.lcZ(20,18,"dashboard-filter-date")," "),t.xp6(9),t.hij(" ",t.lcZ(29,20,"dashboard-side-menu-header-pair")," "),t.xp6(3),t.hij(" ",t.lcZ(32,22,"yield-alls")," "),t.xp6(5),t.Q6J("ngIf",!e),t.xp6(1),t.Q6J("ngIf",e)}}let Y=(()=>{class i extends C.H{constructor(e,o,n,a){super(),this.tradeService=e,this.strategyService=o,this.loadingController=n,this.userService=a,this.isOpenFilterModal=!1,this.itemList=[],this.selectMode=!0,this.filterMode=!0,this.showOnlyActivated=!1,this.showTitle=!1,this.showBorder=!1,this.activeMode=!1,this.routePushFirstList=!1,this.notifyParentEvent=new t.vpe,this.portfolioInfo=new t.vpe,this.isShowingCopyTrade=!0,this.isShowingAutomated=!0,this.realStrategyPageList=[],this.strategyId="",this.sortType="earnings",this.sortBy="asc",this.replaceStrategyList=j.y,this.isLike=!1,this.isSub=!1,this.selectedItem=0,this.scrollConfig={noMore:!1,loading:!1,distance:1,throttle:300,page:0,rows:50},this.filter={field:"yield",order:1},this.searchText="",this.isFavorite=!1}handleNotifyParent(e){this.notifyParentEvent.emit(e)}get title(){return this.showOnlyActivated?"my-active-strategies":"strategies"}ngOnInit(){return(0,r.mG)(this,void 0,void 0,function*(){(yield this.userService.isLogin())&&(this.updateStrategyList(),this.getRealStrategyPage())})}addLike(e,o){const n=this.realStrategyPageList.find(a=>a.id===o);n.isLike=!n.isLike,e?n.likeNum+=1:n.likeNum-=1}updateStrategyList(){return(0,r.mG)(this,void 0,void 0,function*(){this.itemList=yield(0,S.n)(yield this.tradeService.getAllStrategies())})}clearSearch(e){this.searchText="",e.setFocus()}handleFilter(e,o){switch(this.filter.field===e?this.filter.order=-this.filter.order:(this.filter.field=e,this.filter.order=-1),e){case"rank":this.sortType="ranking";break;case"yield":this.sortType="earnings";break;case"date":this.sortType="launchTime";break;default:this.sortType=""}switch(this.filter.order){case-1:this.sortBy="desc";break;case 1:this.sortBy="asc";break;default:this.sortType="asc"}this.filter=Object.assign({},this.filter),this.init()}handleLike(){this.isLike=!this.isLike,this.init(this.isLike,!1)}handleSub(){this.isSub=!this.isSub,this.init(!1,this.isSub)}init(e,o){this.scrollConfig.noMore=!1,this.scrollConfig.loading=!1,this.scrollConfig.page=0,this.realStrategyPageList=[],this.getRealStrategyPage(e,o)}selectReal(e){this.selectId=e}handleAutomatedClick(){this.isShowingAutomated=!this.isShowingAutomated,!this.isShowingAutomated&&!this.isShowingCopyTrade&&(this.isShowingCopyTrade=!0)}handleCopyTradeClick(){this.isShowingCopyTrade=!this.isShowingCopyTrade,!this.isShowingAutomated&&!this.isShowingCopyTrade&&(this.isShowingAutomated=!0)}handleModalApply(e){console.log(e),this.isShowingAutomated=e.isShowingAutomated,this.isShowingCopyTrade=e.isShowingCopyTrade}getRealStrategyPage(e,o){return(0,r.mG)(this,void 0,void 0,function*(){this.scrollConfig.noMore||this.scrollConfig.loading||(this.scrollConfig.loading=!0,this.strategyService.queryMyRealStrategy({page:this.scrollConfig.page,rows:this.scrollConfig.rows,isLike:this.isLike,isSub:this.isSub,sortOrder:this.sortBy,sortBy:this.sortType}).subscribe({next:n=>{var a,c;n.rows&&(this.portfolioInfo.emit({totalProfitAmount:null===(a=n.rows)||void 0===a?void 0:a.totalProfitAmount,historicalAverageYield:null===(c=n.rows)||void 0===c?void 0:c.historicalAverageYield}),n.rows.myStrategy?(this.scrollConfig.page++,n.rows.myStrategy.forEach(p=>{this.strategyService.getActivatedStatusFromStrategyId(p.id);let f=[];p.accounts&&JSON.parse(p.accounts).forEach(P=>{f.push(P.symbolIcon)}),this.realStrategyPageList.push(Object.assign(Object.assign({},p),{icons:f,isActivated:p.isSub,type:"automated"}))}),this.scrollConfig.noMore=n.rows.length<this.scrollConfig.rows):this.scrollConfig.noMore=!0)},error:n=>{console.error(n)}}).add(()=>{this.scrollConfig.loading=!1,this.loadingController.dismiss()}))})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(I.X),t.Y36(k.k),t.Y36(g.HT),t.Y36(E.K))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-portfolio-algorithm-list"]],viewQuery:function(e,o){if(1&e&&t.Gf(N.V,5),2&e){let n;t.iGM(n=t.CRH())&&(o.StrategyItem=n.first)}},inputs:{selectMode:"selectMode",filterMode:"filterMode",showOnlyActivated:"showOnlyActivated",showTitle:"showTitle",showBorder:"showBorder",activeMode:"activeMode",routePushFirstList:"routePushFirstList"},outputs:{notifyParentEvent:"notifyParentEvent",portfolioInfo:"portfolioInfo"},standalone:!0,features:[t.qOj,t.jDz],decls:3,vars:6,consts:[["class","pt-2 px-2",4,"ngLet"],[3,"isShowingAutomated","isShowingCopyTrade","isOpen","apply","isOpenChange"],[1,"pt-2","px-2"],[1,"text-text-strong","mb-1","text-xl","capitalize"],[4,"ngIf"],[1,"mb-1"],[1,"flex","items-center","font-medium","tracking-tight","relative","z-10"],[1,"filter-item","px-1","py-1","rounded","mr-1",3,"ngClass","click"],[1,"flex","items-center","text-xs","font-medium","tracking-tight","pr-3","relative","pointer-events-none"],["name","caret-up-outline",1,"absolute","-right-0.5"],[1,"flex","items-center","text-xs","font-medium","tracking-tight","pr-3","relative","whitespace-nowrap","pointer-events-none"],[1,"flex-1"],[3,"click"],[1,"icon-settings"],[1,"border-main-border","border-b","-mx-2"],[1,"flex","text-sm","mt-0.5","font-medium"],[1,"flex-1","whitespace-nowrap"],[1,"w-16","text-right","whitespace-nowrap"],[1,"border-main-border","border-b","-mx-2","mt-0.5"],[1,"flex-1","-mx-2"],[1,"relative",2,"min-height","136px"],["class","btn-blue text-base rounded-md px-8 py-2 left-1/2 top-1/2 absolute transform -translate-x-1/2 -translate-y-1/2 whitespace-nowrap",3,"click",4,"ngIf"],[1,"btn-blue","text-base","rounded-md","px-8","py-2","left-1/2","top-1/2","absolute","transform","-translate-x-1/2","-translate-y-1/2","whitespace-nowrap",3,"click"],["class","border-b border-main-border block",3,"data","click","notifyParentEvent",4,"ngFor","ngForOf"],["class","text-grey-2 absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2","size","30px","thick","3px",4,"ngIf"],["class","py-14 text-center",4,"ngIf"],[1,"border-b","border-main-border","block",3,"data","click","notifyParentEvent"],["size","30px","thick","3px",1,"text-grey-2","absolute","left-1/2","top-1/2","transform","-translate-x-1/2","-translate-y-1/2"],[1,"py-14","text-center"]],template:function(e,o){1&e&&(t.YNc(0,u,38,33,"div",0),t.ALo(1,"async"),t.TgZ(2,"app-filter-modal",1),t.NdJ("apply",function(a){return o.handleModalApply(a)})("isOpenChange",function(a){return o.isOpenFilterModal=a}),t.qZA()),2&e&&(t.Q6J("ngLet",t.lcZ(1,4,o.userService.loginStateChange)),t.xp6(2),t.Q6J("isShowingAutomated",o.isShowingAutomated)("isShowingCopyTrade",o.isShowingCopyTrade)("isOpen",o.isOpenFilterModal))},dependencies:[d.ez,d.mk,d.sg,d.O5,d.Ov,O.u5,O.UX,g.Pc,g.gu,_.aw,_.X$,Z.Q,B.T,x.kb,A.T,U.h,N.V,Q.D],styles:["app-check-circle[_ngcontent-%COMP%]     svg, app-gear-icon[_ngcontent-%COMP%]     svg{width:20px}.filter-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{display:none}.filter-item.active[_ngcontent-%COMP%]{background-color:var(--main-blue-transparent);color:var(--main-blue)}.filter-item.active[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{display:block;transition:transform .3s}.filter-item.active.desc[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{transform:rotate(180deg)}ion-input[_ngcontent-%COMP%]{--padding-start: 4px;--padding-end: 4px;--padding-top: 2px;--padding-bottom: 2px}.icon-close[_ngcontent-%COMP%]{font-size:9px}.selected-pointer[_ngcontent-%COMP%]{z-index:-1;transition:left .2s,width .2s}"]}),i})();function lt(i,s){if(1&i&&(t.TgZ(0,"div",1)(1,"div",2),t._UZ(2,"img",3),t.TgZ(3,"div",4)(4,"div",5),t._uU(5),t.qZA(),t.TgZ(6,"div",6),t._uU(7),t.ALo(8,"number"),t.qZA()()(),t.TgZ(9,"div",7)(10,"div",8),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"div",9),t._uU(14),t.ALo(15,"number"),t.qZA()()()),2&i){const e=t.oxw();t.Q6J("ngClass",e.customClass),t.xp6(2),t.Q6J("src","assets/icon/crypto/"+e.asset.name+".svg",t.LSH)("alt",e.asset.name),t.xp6(3),t.hij(" ",e.asset.name," "),t.xp6(2),t.hij(" ",e.showInfo?t.xi3(8,7,100*e.asset.portfolio||0,"0.2-8")+"%":"***"," "),t.xp6(4),t.hij(" ",e.showInfo?t.xi3(12,10,e.asset.balance||0,"0.2-8"):"***"," "),t.xp6(3),t.hij(" ",e.showInfo?"$"+t.xi3(15,13,e.asset.totalBalance||0,"0.2-2"):"***"," ")}}let ct=(()=>{class i extends C.H{constructor(){super(...arguments),this.showInfo=!0,this.customClass=""}ngOnInit(){}}return i.\u0275fac=function(){let s;return function(o){return(s||(s=t.n5z(i)))(o||i)}}(),i.\u0275cmp=t.Xpm({type:i,selectors:[["app-asset-item"]],inputs:{asset:"asset",showInfo:"showInfo",customClass:"customClass"},standalone:!0,features:[t.qOj,t.jDz],decls:1,vars:1,consts:[["class","flex items-center justify-between p-2 font-medium",3,"ngClass",4,"ngIf"],[1,"flex","items-center","justify-between","p-2","font-medium",3,"ngClass"],[1,"flex","items-center","h-full"],[1,"!w-9","mr-2",3,"src","alt"],[1,"flex","flex-col","space-y-1"],[1,"text-text-strong","uppercase","leading-none"],[1,"text-sm","text-grey-2","leading-none"],[1,"flex","flex-col","items-end","justify-between","space-y-1","text-sm"],[1,"text-text-strong","leading-none"],[1,"text-grey-2","leading-none"]],template:function(e,o){1&e&&t.YNc(0,lt,16,16,"div",0),2&e&&t.Q6J("ngIf",o.asset)},dependencies:[d.ez,d.mk,d.O5,d.JJ]}),i})();var dt=l(5379),ht=l(2472),pt=l(9787),gt=l(8798);const ft=["popover"];function ut(i,s){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("(",e.assetsList.length,")")}}function mt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",30)(1,"button",31),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.userService.toggleLoginModal(!0))}),t._uU(2),t.ALo(3,"translate"),t.qZA()()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"landing-page-login-sign-up")," "))}function _t(i,s){if(1&i&&t._UZ(0,"app-asset-item",34),2&i){const e=s.$implicit,o=t.oxw(4);t.Q6J("asset",e)("showInfo",o.showInfo)}}function vt(i,s){if(1&i&&(t.TgZ(0,"div",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw(2).ngLet;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.length?"no-more-results":"no-data-found")," ")}}function xt(i,s){if(1&i&&(t.ynx(0),t.YNc(1,_t,1,2,"app-asset-item",32),t.YNc(2,vt,3,3,"div",33),t.BQk()),2&i){const e=t.oxw().ngLet;t.xp6(1),t.Q6J("ngForOf",e),t.xp6(1),t.Q6J("ngIf",!e.loading)}}function bt(i,s){if(1&i&&(t.TgZ(0,"ng-scrollbar",28),t.YNc(1,mt,4,3,"div",29),t.YNc(2,xt,3,2,"ng-container",7),t.qZA()),2&i){const e=t.oxw().ngLet;t.Q6J("autoHeightDisabled",!1),t.xp6(1),t.Q6J("ngIf",!e),t.xp6(1),t.Q6J("ngIf",e)}}const X=function(i,s){return{active:i,desc:s}},yt=function(i,s){return{showSmallAssets:i,accountId:s}};function wt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"h2",6),t._uU(3),t.ALo(4,"translate"),t.YNc(5,ut,2,1,"span",7),t.qZA(),t.TgZ(6,"div",8),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.showSmallAssets=!n.showSmallAssets)}),t._UZ(7,"ion-checkbox",9),t.TgZ(8,"ion-label",10),t._uU(9),t.ALo(10,"translate"),t.qZA()()(),t.TgZ(11,"div",11)(12,"div",12)(13,"button",13),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.handleFilter("totalBalance"))}),t.TgZ(14,"div",14),t._uU(15),t.ALo(16,"translate"),t._UZ(17,"ion-icon",15),t.qZA()(),t.TgZ(18,"button",13),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.handleFilter("price"))}),t.TgZ(19,"div",14),t._uU(20),t.ALo(21,"translate"),t._UZ(22,"ion-icon",15),t.qZA()()(),t.TgZ(23,"div",16)(24,"div",17),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"button",18),t.NdJ("click",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.handleSelectOpen(n))}),t.TgZ(28,"div",19),t._uU(29),t.ALo(30,"translate"),t.qZA(),t._UZ(31,"ion-icon",20),t.qZA()()(),t._UZ(32,"div",21),t.TgZ(33,"div",22)(34,"div",23),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"div",24),t._uU(38),t.ALo(39,"translate"),t.qZA()(),t._UZ(40,"div",25),t.TgZ(41,"div",26),t.YNc(42,bt,3,3,"ng-scrollbar",27),t.ALo(43,"filterAsset"),t.qZA()()}if(2&i){const e=s.ngLet,o=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,13,"my-assets")," "),t.xp6(2),t.Q6J("ngIf",e),t.xp6(2),t.Q6J("checked",o.showSmallAssets),t.xp6(2),t.hij(" ",t.lcZ(10,15,"show-small-assets")," "),t.xp6(4),t.Q6J("ngClass",t.WLB(33,X,"totalBalance"===o.filter.field,-1===o.filter.order)),t.xp6(2),t.hij(" ",t.lcZ(16,17,"data-header-amount")," "),t.xp6(3),t.Q6J("ngClass",t.WLB(36,X,"price"===o.filter.field,-1===o.filter.order)),t.xp6(2),t.hij(" ",t.lcZ(21,19,"data-header-price")," "),t.xp6(5),t.hij(" ",t.lcZ(26,21,"filter")," "),t.xp6(4),t.hij(" ",t.lcZ(30,23,o.exchanges[o.selectedExchange].name)," "),t.xp6(6),t.hij(" ",t.lcZ(36,25,"asset-portfolio")," "),t.xp6(3),t.hij(" ",t.lcZ(39,27,"amount-value")," "),t.xp6(4),t.Q6J("ngLet",t.Dn7(43,29,o.assetsList,t.WLB(39,yt,o.showSmallAssets,o.accountId),o.filter))}}function Ct(i,s){if(1&i&&t._UZ(0,"img",41),2&i){const e=t.oxw().$implicit;t.Q6J("src",e.icon,t.LSH)("alt",e.name)}}function At(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item",38),t.NdJ("click",function(){const a=t.CHM(e).index,c=t.oxw(2);return t.KtG(c.changeAccount(a))}),t.TgZ(1,"ion-label")(2,"div",5),t.YNc(3,Ct,1,2,"img",39),t.TgZ(4,"div",40),t._uU(5),t.ALo(6,"translate"),t.qZA()()()()}if(2&i){const e=s.$implicit;t.xp6(3),t.Q6J("ngIf",e.icon),t.xp6(2),t.hij(" ",t.lcZ(6,2,e.name)," ")}}function Tt(i,s){if(1&i&&(t.TgZ(0,"ion-list",36),t.YNc(1,At,7,4,"ion-item",37),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.exchanges)}}let Lt=(()=>{class i{transform(e,{showSmallAssets:o=!0,accountId:n=null},{field:a="balance",order:c=-1}){return e.filter(p=>!!o||p.balance>1).filter(p=>!n||Object.is(Number.parseInt(n),Number.parseInt(p.accountId))).sort((p,f)=>(p[a]-f[a])*c)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=t.Yjl({name:"filterAsset",type:i,pure:!0,standalone:!0}),i})(),tt=(()=>{class i extends C.H{constructor(e,o,n,a,c){super(),this.tradeService=e,this.themeService=o,this.exchangeService=n,this.strategyService=a,this.userService=c,this.showInfo=!0,this.assetsInfo=new t.vpe,this.isMenuOpen=!1,this.assetsList=[],this.showSmallAssets=!0,this.accountId=null,this.filter={field:"totalBalance",order:1},this.selectedExchange=0,this.exchanges=[{icon:"",name:"",id:null}]}ngOnInit(){return(0,r.mG)(this,void 0,void 0,function*(){(yield this.userService.isLogin())&&(this.exchangeQuery(),this.myAssets())})}handleFilter(e){this.filter.field===e?this.filter.order=-this.filter.order:(this.filter.field=e,this.filter.order=-1),this.filter=Object.assign({},this.filter)}handleSelectOpen(e){this.popover.event=e,this.isMenuOpen=!0}myAssets(){this.strategyService.myAssets().pipe().subscribe(e=>(0,r.mG)(this,void 0,void 0,function*(){0!==e.code||e.data&&(this.assetsInfo.emit({currentAssets:e.data.totalValue,connectedExchanges:e.data.exchange}),e.data.accounts&&(e.data.accounts.forEach(o=>{o.balance.forEach(n=>{this.assetsList.push({accountId:Number.parseInt(o.accountId),name:n.currency.toLowerCase(),balance:n.amount,price:n.value,portfolio:n.proportion,totalBalance:n.value})})}),this.handleFilter("totalBalance")))}))}exchangeQuery(){this.exchangeService.queryBinding(0,1e3,"","").pipe().subscribe(e=>(0,r.mG)(this,void 0,void 0,function*(){if(0===e.code)return this.exchanges=e.data.rows.map(o=>Object.assign(Object.assign({},o),{name:o.name+"-"+o.nickname})),void this.exchanges.unshift({name:"select-all",id:null,icon:""})}))}changeAccount(e){this.selectedExchange=e,this.accountId=this.exchanges[e].id}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(I.X),t.Y36(dt.f),t.Y36(ht.O),t.Y36(k.k),t.Y36(E.K))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-assets-list"]],viewQuery:function(e,o){if(1&e&&t.Gf(ft,5),2&e){let n;t.iGM(n=t.CRH())&&(o.popover=n.first)}},inputs:{showInfo:"showInfo"},outputs:{assetsInfo:"assetsInfo"},standalone:!0,features:[t.qOj,t.jDz],decls:5,vars:6,consts:[["class","my-assets-container pt-2 px-2 border border-main-border rounded-xl overflow-hidden",4,"ngLet"],["side","bottom","alignment","start",1,"theme-popover",3,"isOpen","dismissOnSelect","arrow","didDismiss"],["popover",""],["style","width: 550px"],[1,"my-assets-container","pt-2","px-2","border","border-main-border","rounded-xl","overflow-hidden"],[1,"flex","items-center","justify-between"],[1,"text-text-strong","text-xl","mr-3"],[4,"ngIf"],[1,"show-strategy-exchange","flex","items-center","text-sm",3,"click"],["slot","start","mode","md",1,"m-0","mr-1.5","pointer-events-none",3,"checked"],[1,"align-middle","m-0","mt-[1px]"],[1,"flex","items-center","justify-between","font-medium","tracking-tight","my-2"],[1,"flex","items-center"],[1,"filter-item","px-1","py-1","rounded","mr-1",3,"ngClass","click"],[1,"flex","items-center","text-xs","font-medium","tracking-tight","pr-3","relative"],["name","caret-up-outline",1,"absolute","-right-0.5"],[1,"exchange-filter","relative","flex","items-center","text-text-strong","mr-4"],[1,"exchange-filter__label","hidden","2xs:flex","px-2","border","border-border-input","border-r-0","rounded-l-md","h-8","items-center","whitespace-nowrap"],[1,"w-full","border-solid","cursor-pointer","h-8","rounded-md","2xs:rounded-l-none","border-border-input","border","flex","items-center","justify-between","bg-bg-input","px-2",3,"click"],[1,"ml-1","text-text-strong","whitespace-nowrap","overflow-hidden"],["name","chevron-down-outline",1,"pointer-events-none","text-input-placeholder","pl-1"],[1,"border-main-border","border-b","-mx-2"],[1,"flex","text-sm","mt-0.5","font-medium"],[1,"flex-1"],[1,"flex-none","text-right"],[1,"border-main-border","border-b","-mx-2","mt-0.5"],[1,"flex-1","-mx-2"],["visibility","hover","scrollShadow","","backToTopBtn","","class","h-full w-full disable-mobile",3,"autoHeightDisabled",4,"ngLet"],["visibility","hover","scrollShadow","","backToTopBtn","",1,"h-full","w-full","disable-mobile",3,"autoHeightDisabled"],["class","py-12 flex justify-center",4,"ngIf"],[1,"py-12","flex","justify-center"],[1,"btn-blue","text-base","rounded-md","px-8","py-2","mx-auto","whitespace-nowrap",3,"click"],["class","block border-b border-main-border",3,"asset","showInfo",4,"ngFor","ngForOf"],["class","py-14 text-center",4,"ngIf"],[1,"block","border-b","border-main-border",3,"asset","showInfo"],[1,"py-14","text-center"],["lines","full"],["class","cursor-pointer","lines","none",3,"click",4,"ngFor","ngForOf"],["lines","none",1,"cursor-pointer",3,"click"],["class","h-6",3,"src","alt",4,"ngIf"],[1,"text-text-strong","w-32","overflow-hidden"],[1,"h-6",3,"src","alt"]],template:function(e,o){1&e&&(t.YNc(0,wt,44,42,"div",0),t.ALo(1,"async"),t.TgZ(2,"ion-popover",1,2),t.NdJ("didDismiss",function(){return o.isMenuOpen=!1}),t.YNc(4,Tt,2,1,"ng-template",3),t.qZA()),2&e&&(t.Q6J("ngLet",t.lcZ(1,4,o.userService.loginStateChange)),t.xp6(2),t.Q6J("isOpen",o.isMenuOpen)("dismissOnSelect",!0)("arrow",!1))},dependencies:[d.ez,d.mk,d.sg,d.O5,d.Ov,O.u5,O.UX,g.Pc,g.nz,g.gu,g.Ie,g.Q$,g.q_,g.d8,g.w,_.aw,_.X$,x.kb,x.KC,A.T,pt.E,gt.B,U.h,Lt,ct],styles:[".filter-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{display:none}.filter-item.active[_ngcontent-%COMP%]{background-color:var(--main-blue-transparent);color:var(--main-blue)}.filter-item.active[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{display:block;transition:transform .3s}.filter-item.active.desc[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{transform:rotate(180deg)}ion-item[_ngcontent-%COMP%]{--min-height: 0px;--background: transparent}  .light-mode .my-assets-container,   .light-mode .exchange-filter__label{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}  .dark-mode .my-assets-container,   .dark-mode .exchange-filter__label{background-color:var(--main-bg);background-image:var(--main-bg)}ion-popover.theme-popover[_ngcontent-%COMP%]::part(content), ion-popover.select-popover[_ngcontent-%COMP%]::part(content){--width: 300px;border-radius:5px;border-width:1px;border-style:solid;border-color:var(--main-border)}"]}),i})();var Zt=l(1635),et=l(2340),T=l(7340),it=l(4392),Mt=l(1732),ot=l(7179),Ot=l(1003),St=l(2113),q=l(9485),nt=l(860),st=l(2626),D=l(4888);let It=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["external-link-icon"]],decls:4,vars:0,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-external-link"],["d","M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"],["points","15 3 21 3 21 9"],["x1","10","y1","14","x2","21","y2","3"]],template:function(e,o){1&e&&(t.O4$(),t.TgZ(0,"svg",0),t._UZ(1,"path",1)(2,"polyline",2)(3,"line",3),t.qZA())},encapsulation:2}),i})();const kt=["chartContainer"];function Et(i,s){if(1&i&&(t.TgZ(0,"h2",10),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,e.currentAssets)," ")}}function Ut(i,s){1&i&&(t.TgZ(0,"h2",10),t._uU(1,"***"),t.qZA())}function Dt(i,s){if(1&i&&(t.TgZ(0,"h2",10),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.connectedExchanges," ")}}function Jt(i,s){1&i&&(t.TgZ(0,"h2",10),t._uU(1,"***"),t.qZA())}const Nt=function(){return["/settings/connected-exchanges"]};let Ft=(()=>{class i extends C.H{constructor(){super(...arguments),this.showInfo=!0,this.connectedExchanges=0,this.currentAssets=0,this.chartOptions=D.ME,this.donutWidth=300,this.donutHeight=300,this.radius=140,this.data=[{name:"Binance",value:40},{name:"Bitfinex",value:60},{name:"Bitstamp",value:80}],this.colors=["#0066ff","#f3b82c","#f79319"]}ngAfterViewInit(){this.chartContainer&&this.initExchangeDonutChart()}initExchangeDonutChart(){(0,it.Z)({d3:"https://cdn.jsdelivr.net/npm/d3"}).d3.onLoad(()=>{const{d3:e}=window,o=e.select("figure#pie").append("svg").attr("class","w-full h-full").attr("viewBox",`0 0 ${this.donutWidth} ${this.donutHeight}`).append("g").attr("transform",`translate(${this.donutWidth/2}, ${this.donutHeight/2})`),n=e.pie().value(a=>Number(a.value)).padAngle(.1);o.selectAll("pieces").data(n(this.data)).enter().append("path").attr("d",e.arc().innerRadius(.85*this.radius).outerRadius(1*this.radius).cornerRadius(10)).attr("fill",(a,c)=>this.colors[c]).style("stroke-width","1px")})}}return i.\u0275fac=function(){let s;return function(o){return(s||(s=t.n5z(i)))(o||i)}}(),i.\u0275cmp=t.Xpm({type:i,selectors:[["app-exchanges-portfolio"]],viewQuery:function(e,o){if(1&e&&t.Gf(kt,5),2&e){let n;t.iGM(n=t.CRH())&&(o.chartContainer=n.first)}},inputs:{showInfo:"showInfo",connectedExchanges:"connectedExchanges",currentAssets:"currentAssets"},features:[t.qOj],decls:21,vars:12,consts:[[1,"exchanges-portfolio","flex","items-center","h-full","rounded-xl","bg-grey-4","border","border-main-border","text-text-strong","font-medium","p-2.5"],["id","pie",1,"aspect-square","h-full"],["chartContainer",""],[1,"flex","flex-col","space-y-2","ml-4"],["class","text-2xl leading-6",4,"ngIf","ngIfElse"],["hideCurrentAssets",""],["hideConnectedExchanges",""],[1,"flex","items-center","text-grey-1","whitespace-nowrap",2,"font-size","13px"],[1,"inline-flex"],[1,"w-4","h-4","text-main-blue","ml-1",3,"routerLink"],[1,"text-2xl","leading-6"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t._UZ(1,"figure",1,2),t.TgZ(3,"div",3)(4,"div"),t.YNc(5,Et,3,3,"h2",4),t.YNc(6,Ut,2,0,"ng-template",null,5,t.W1O),t.TgZ(8,"p"),t._uU(9),t.ALo(10,"translate"),t.qZA()(),t.TgZ(11,"div"),t.YNc(12,Dt,2,1,"h2",4),t.YNc(13,Jt,2,0,"ng-template",null,6,t.W1O),t.TgZ(15,"div",7)(16,"span",8),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"a",9),t._UZ(20,"external-link-icon"),t.qZA()()()()()),2&e){const n=t.MAs(7),a=t.MAs(14);t.xp6(5),t.Q6J("ngIf",o.showInfo)("ngIfElse",n),t.xp6(4),t.Oqu(t.lcZ(10,7,"asset-value")),t.xp6(3),t.Q6J("ngIf",o.showInfo)("ngIfElse",a),t.xp6(5),t.hij(" ",t.lcZ(18,9,"connected-exchanges")," "),t.xp6(2),t.Q6J("routerLink",t.DdM(11,Nt))}},dependencies:[d.O5,y.rH,g.Fo,It,d.H9,_.X$],styles:[".exchanges-portfolio[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--grey-1);font-size:13px}#pie[_ngcontent-%COMP%]{max-height:180px}"]}),i})();var G=l(2502),J=l(4040),rt=l(9340),Yt=l(7445),Qt=l(6836);const jt=["container"],Bt=["overlay"];function zt(i,s){if(1&i&&t._UZ(0,"div",13,14),2&i){const e=t.oxw(2);t.Udp("right",e.priceScaleWidth,"px")("bottom",e.timeScaleHeight,"px")}}function Rt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.userService.toggleLoginModal(!0))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"landing-page-login-sign-up")," "))}const Ht=function(i){return{"pointer-events-none":i}};function Kt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"app-base-chart",16),t.NdJ("ready",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.handleChartReady())}),t.qZA()}if(2&i){const e=t.oxw().ngLet,o=t.oxw(),n=t.MAs(3);t.Q6J("ngClass",t.VKq(6,Ht,!e))("enableHoverRestrictArea",!0)("seriesOptions",o.seriesOptions)("chartOptions",o.chartOptions)("data",o.activatedLineData)("tooltipRef",n)}}function qt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",17)(1,"div",18),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-color-picker",19),t.NdJ("colorChange",function(n){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handleColorChange(n))}),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"my-portfolio-line")," "),t.xp6(2),t.Q6J("color",e.activatedColor)}}const Gt=function(i){return{"!bg-main-blue-transparent text-main-blue":i}};function $t(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.handleTimeTypeSelect(a))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&i){const e=s.$implicit,o=t.oxw(2);t.Q6J("ngClass",t.VKq(4,Gt,o.selectedTimeType===e.type)),t.xp6(1),t.hij(" ",t.lcZ(2,2,e.label)," ")}}function Wt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",2,3),t.NdJ("resize",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onResize())}),t.YNc(2,zt,2,4,"div",4),t.TgZ(3,"div",5)(4,"div",6),t.YNc(5,Rt,3,3,"button",7),t.YNc(6,Kt,1,8,"app-base-chart",8),t.qZA()(),t._UZ(7,"div",9),t.YNc(8,qt,5,4,"div",10),t.TgZ(9,"div",11),t.YNc(10,$t,3,6,"button",12),t.qZA()()}if(2&i){const e=s.ngLet,o=t.oxw();t.xp6(2),t.Q6J("ngIf",o.activatedLineData&&e),t.xp6(3),t.Q6J("ngIf",!e),t.xp6(1),t.Q6J("ngIf",o.activatedLineData),t.xp6(2),t.Q6J("ngIf",e),t.xp6(2),t.Q6J("ngForOf",o.timeTypeArr)}}function Vt(i,s){if(1&i&&(t.ynx(0),t.TgZ(1,"div",22)(2,"div",23),t._uU(3),t.ALo(4,"localizedDate"),t.qZA(),t.TgZ(5,"div",24)(6,"div",25),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"div"),t._uU(10),t.ALo(11,"currency"),t.qZA()(),t.TgZ(12,"div",26),t._UZ(13,"div",27),t.TgZ(14,"div",28),t._uU(15),t.ALo(16,"number"),t.qZA()()(),t.BQk()),2&i){const e=t.oxw().$implicit,o=t.oxw();t.xp6(3),t.hij(" ",t.xi3(4,8,1e3*(null==e?null:e.time),"MM/dd/yyyy, h:mm")," "),t.xp6(4),t.Oqu(t.lcZ(8,11,"P&L")),t.xp6(3),t.hij(" ",o.showInfo?t.lcZ(11,13,o.findIndex(e.time)):"***"," "),t.xp6(3),t.Udp("background","rgb("+o.activatedColor+")"),t.xp6(1),t.Udp("--color","rgb("+o.activatedColor+")"),t.xp6(1),t.hij(" ",o.showInfo?t.xi3(16,15,null==e||null==e.tooltipData?null:e.tooltipData.value,"0.1-1")+"%":"***"," ")}}function Xt(i,s){1&i&&t.YNc(0,Vt,17,18,"ng-container",21),2&i&&t.Q6J("ngIf",s.$implicit)}const $="activated-color";let te=(()=>{class i extends C.H{constructor(e,o,n,a,c,p){super(),this.cdr=e,this.tradeService=o,this.storage=n,this.userService=a,this.strategyService=c,this.translate=p,this.ready=new t.vpe,this.isLoadingDetail=!1,this.showInfo=!1,this.chartOptions=D.E6,this.SeriesOptions=D.FX,this.dataSnapshot=[],this.abs=Math.abs,this.priceScaleWidth=0,this.timeScaleHeight=0,this.keys=Object.keys,this.activatedColor=J.F[0],this.activatedStrategy={info:{name:"my-portfolio-line"},yield:0,color:this.activatedColor,series:void 0,isMainMarket:!1,stayRemain:!0},this.activatedLegends={background:`rgb(${this.activatedColor})`,series:this.activatedStrategy.series,text:"my-portfolio-line",css:"hover-change"},this.isStoppedSuddenly=!1,this.isLoadingProfitLine=!0,this.accountIcon=[{symbolIcon:""}],this.isLoading=!1,this.additionalChartOptions={},this.legendSeries=[],this.stringify=JSON.stringify,this.activatedLineTop=0,this.handleChartChange=()=>{var f,m,P,W;if(this.basechart&&this.basechart.chart){const Pe=null===(f=this.basechart)||void 0===f?void 0:f.chart.priceScale("right").width();this.priceScaleWidth=Pe,this.timeScaleHeight=(null===(m=this.basechart)||void 0===m?void 0:m.chart.timeScale().height())+1,this.activatedLineTop=null===(P=this.activatedStrategy.series)||void 0===P?void 0:P.priceToCoordinate(null===(W=this.activatedLineData[0])||void 0===W?void 0:W.value)}},this.copyLineLeft=0,this.activatedLineLeft=0,this.hideVerticalLineCopyTrader=!1,this.timeTypeArr=[{label:"minutes",type:1},{label:"days",type:2}],this.selectedTimeType=1}generateFakeData(){let e=Math.floor(Date.now()/1e3);const n=[{time:e,value:0}];for(let a=1;a<1e3;a++)e-=60,n.push({time:e,value:0});return console.log(1717171,n),n}ngOnInit(){return(0,r.mG)(this,void 0,void 0,function*(){console.log(223322,this.subInfo),this.chartOptions=(0,rt.Z)({},D.E6,this.showInfo?{}:{localization:{priceFormatter:e=>"  *****  "}}),this.legendSeries=[this.activatedLegends],yield this.tradeService.setSelectedTime("time-select-all"),(yield this.userService.isLogin())?(this.isLoading=!0,yield this.addActivatedLine(),this.isLoading=!1,this.startTimer()):yield this.addNotLoginData()})}startTimer(){this.timerSub=(0,Yt.F)(1===this.selectedTimeType?6e4:864e5).subscribe(()=>(0,r.mG)(this,void 0,void 0,function*(){this.getChartData()}))}stopTimer(){var e;null===(e=this.timerSub)||void 0===e||e.unsubscribe()}ngOnChanges(e){var o,n,a,c,p,f,m;(null===(o=e.showInfo)||void 0===o?void 0:o.currentValue)!==(null===(n=e.showInfo)||void 0===n?void 0:n.previousValue)&&(null!==(a=e.showInfo)&&void 0!==a&&a.currentValue?null===(m=null===(f=this.basechart)||void 0===f?void 0:f.chart)||void 0===m||m.applyOptions(D.E6):null===(p=null===(c=this.basechart)||void 0===c?void 0:c.chart)||void 0===p||p.applyOptions((0,rt.Z)({},D.E6,{localization:{priceFormatter:P=>"  *****  "}})))}ngOnDestroy(){var e,o,n;super.ngOnDestroy(),this.stopTimer(),null===(n=null===(o=null===(e=this.basechart)||void 0===e?void 0:e.chart)||void 0===o?void 0:o.timeScale())||void 0===n||n.unsubscribeVisibleLogicalRangeChange(this.handleChartChange)}handleChartReady(){var e,o,n;return(0,r.mG)(this,void 0,void 0,function*(){this.activatedLegends.series=this.basechart.series,this.legendSeries=[this.activatedLegends],null===(n=null===(o=null===(e=this.basechart)||void 0===e?void 0:e.chart)||void 0===o?void 0:o.timeScale())||void 0===n||n.subscribeVisibleLogicalRangeChange(this.handleChartChange),setTimeout(()=>{this.handleChartChange()},200)})}findIndex(e){var o;const n=this.activatedLineData.find(a=>a.time===e);if(n)return(null===(o=n.totalProfitAmount)||void 0===o?void 0:o.toFixed(4))||0}getSeriesOptions(e,o={}){return(0,r.mG)(this,void 0,void 0,function*(){const n=yield this.userService.isLogin();return Object.assign(Object.assign({topColor:`rgba(${e}, 0.2)`,bottomColor:`rgba(${e}, 0)`,lineColor:`rgba(${e}, 1)`,color:`rgba(${e}, 1)`,lastPriceAnimation:n?1:0,lastValueVisible:!0,lineWidth:2},o),{visible:n})})}handleResize(){setTimeout(()=>{this.handleChartChange()},100)}getCurrentValueOfSeries(e,o){var n;if(!o)return null;const a=null===(n=e.seriesData)||void 0===n?void 0:n.get(o);return a?{currentValue:void 0!==a.value?a.value:a.close}:null}handleTimeTypeSelect(e){return(0,r.mG)(this,void 0,void 0,function*(){this.isLoading||this.selectedTimeType!==e.type&&(this.lastDate=void 0,this.selectedTimeType=e.type,this.stopTimer(),this.isLoading=!0,yield this.getChartData(),this.isLoading=!1,this.startTimer(),setTimeout(()=>{var o,n,a;this.basechart.chart.timeScale().fitContent(),1===this.selectedTimeType&&(null===(a=null===(n=null===(o=this.basechart)||void 0===o?void 0:o.chart)||void 0===n?void 0:n.timeScale())||void 0===a||a.scrollToPosition(2,!1))},0))})}formatDateForServer(e){const o=e,n=o.getUTCFullYear(),a=o.getUTCMonth()+1,c=o.getUTCDate(),p=o.getUTCHours(),f=o.getUTCMinutes(),m=o.getUTCSeconds();return`${n}-${a<10?"0"+a:a}-${c<10?"0"+c:c} ${p<10?"0"+p:p}:${f<10?"0"+f:f}:${m<10?"0"+m:m}`}getChartData(){var e,o,n;return(0,r.mG)(this,void 0,void 0,function*(){let a;if(!(null===(e=this.subInfo)||void 0===e)&&e.subRunId&&(a=yield(0,S.n)(this.strategyService.getRealStrategyIndexProfitLine({runId:this.subInfo.subRunId,sellId:"20",type:this.selectedTimeType,limit:this.lastDate?2:1440,startDate:this.lastDate?this.formatDateForServer(new Date(this.lastDate)):void 0}))),this.lastDate||(this.activatedLineData=[]),a&&null!==(o=a.list)&&void 0!==o&&o.length){this.lastDate=a.list[0].date,this.activatedLineData||(this.activatedLineData=[]);for(let c=a.list.length-1;c>=0;c--){const p=a.list[c],f=new Date(p.date),m=f.getTime()/1e3;(!this.activatedLineData.length||m>this.activatedLineData[this.activatedLineData.length-1].time)&&this.activatedLineData.push({time:m,_internal_originalTime:f.getTime()/1e3,value:Number((100*p.pr).toFixed(6)),totalProfitAmount:p.totalProfitAmount}),this.activatedLineData=[...this.activatedLineData]}}else this.activatedLineData=this.generateFakeData().reverse();this.activatedLineDataSnapshot=[...this.activatedLineData],this.activatedStrategy.yield=(null===(n=this.activatedLineData[this.activatedLineData.length-1])||void 0===n?void 0:n.value)||0,this.activatedStrategy.color=this.activatedColor,this.seriesOptions=yield this.getSeriesOptions(this.activatedStrategy.color,{lineWidth:3}),this.cdr.markForCheck()})}addActivatedLine(){return(0,r.mG)(this,void 0,void 0,function*(){this.activatedColor=(yield this.storage.get($))||J.F[0],this.activatedStrategy.color=this.activatedColor,this.activatedLegends.background=`rgb(${this.activatedColor})`,yield this.getChartData(),setTimeout(()=>{this.handleChartChange(),this.basechart.chart.timeScale().scrollToPosition(2,!1)},250)})}addNotLoginData(){return(0,r.mG)(this,void 0,void 0,function*(){this.activatedColor=(yield this.storage.get($))||J.F[0],this.activatedStrategy.color=this.activatedColor,this.activatedLegends.background=`rgb(${this.activatedColor})`,this.activatedLineData=this.generateFakeData().reverse(),this.activatedLineDataSnapshot=[...this.activatedLineData],this.activatedStrategy.yield=this.activatedLineData[this.activatedLineData.length-1].value,this.activatedStrategy.color=this.activatedColor,this.seriesOptions=yield this.getSeriesOptions(this.activatedStrategy.color,{lineWidth:3})})}handleColorChange(e){var o,n,a;return(0,r.mG)(this,void 0,void 0,function*(){this.activatedColor=e,yield this.storage.set($,e),null===(n=null===(o=this.basechart)||void 0===o?void 0:o.series)||void 0===n||n.applyOptions(yield this.getSeriesOptions(this.activatedColor,{lineWidth:3})),null===(a=this.activatedStrategy.series)||void 0===a||a.setMarkers([]),this.activatedLegends.background=`rgb(${this.activatedColor})`,this.activatedStrategy.color=this.activatedColor})}hideSeries(e){null==e||e.applyOptions({visible:!1,lastPriceAnimation:0})}showSeries(e){null==e||e.applyOptions({visible:!0,lastPriceAnimation:1})}handleColorInput(e){}onResize(){var e,o;setTimeout(()=>{this.handleChartChange()},100),window.innerWidth<640&&(null===(o=null===(e=this.basechart)||void 0===e?void 0:e.chart)||void 0===o||o.applyOptions({rightPriceScale:{scaleMargins:{top:window.innerWidth<640?.4:.2,bottom:.05}}}))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.sBO),t.Y36(I.X),t.Y36(ot.V),t.Y36(E.K),t.Y36(k.k),t.Y36(_.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-activated-chart"]],viewQuery:function(e,o){if(1&e&&(t.Gf(G.e,5),t.Gf(jt,5),t.Gf(Bt,5)),2&e){let n;t.iGM(n=t.CRH())&&(o.basechart=n.first),t.iGM(n=t.CRH())&&(o.container=n.first),t.iGM(n=t.CRH())&&(o.overlay=n.first)}},hostBindings:function(e,o){1&e&&t.NdJ("resize",function(){return o.onResize()},!1,t.Jf7)},inputs:{isLoadingDetail:"isLoadingDetail",realDetail:"realDetail",showInfo:"showInfo",subInfo:"subInfo"},outputs:{ready:"ready"},features:[t.qOj,t.TTD],decls:4,vars:3,consts:[["class","h-full relative flex flex-col overflow-hidden",3,"resize",4,"ngLet"],["tooltip",""],[1,"h-full","relative","flex","flex-col","overflow-hidden",3,"resize"],["container",""],["class","overlay-chart overflow-hidden play-animation",3,"right","bottom",4,"ngIf"],[1,"flex-1","relative"],[1,"absolute","inset-0"],["class","btn-blue rounded-md px-10 py-3 left-1/2 top-1/2 absolute transform -translate-x-1/2 -translate-y-1/2 whitespace-nowrap -ml-7",3,"click",4,"ngIf"],["seriesType","Area",3,"ngClass","enableHoverRestrictArea","seriesOptions","chartOptions","data","tooltipRef","ready",4,"ngIf"],[1,"border-main-border","border-b","sm:border-b-0"],["class","flex absolute items-center color-picker-container fade-in",4,"ngIf"],[1,"right-sticky","flex","sm:absolute","top-2","right-16","z-10","py-1","bg-main-bg","sm:py-0","fade-in","mr-1"],["class","cursor-pointer rounded text-sm capitalize px-3 sm:px-2 xl:px-3 py-0.5 select-none font-bold whitespace-nowrap",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"overlay-chart","overflow-hidden","play-animation"],["overlay",""],[1,"btn-blue","rounded-md","px-10","py-3","left-1/2","top-1/2","absolute","transform","-translate-x-1/2","-translate-y-1/2","whitespace-nowrap","-ml-7",3,"click"],["seriesType","Area",3,"ngClass","enableHoverRestrictArea","seriesOptions","chartOptions","data","tooltipRef","ready"],[1,"flex","absolute","items-center","color-picker-container","fade-in"],[1,"text-text-strong","capitalize"],[1,"block","pl-1",3,"color","colorChange"],[1,"cursor-pointer","rounded","text-sm","capitalize","px-3","sm:px-2","xl:px-3","py-0.5","select-none","font-bold","whitespace-nowrap",3,"ngClass","click"],[4,"ngIf"],[1,"dashboard-chart-tooltip"],[1,"mb-2","text-text-strong"],[1,"flex","items-center","mb-2","text-text-strong"],[1,"w-10","text-xs"],[1,"flex","items-center","mb-2"],[1,"w-3","h-3","rounded-full","flex-shrink-0","ml-2","mr-2"],[1,"tag-2"]],template:function(e,o){1&e&&(t.YNc(0,Wt,11,5,"div",0),t.ALo(1,"async"),t.YNc(2,Xt,1,1,"ng-template",null,1,t.W1O)),2&e&&t.Q6J("ngLet",t.lcZ(1,1,o.userService.loginStateChange))},dependencies:[d.mk,d.sg,d.O5,U.h,G.e,J.z,d.Ov,d.JJ,d.H9,_.X$,Qt.g],styles:['.tag[_ngcontent-%COMP%]{display:inline-block;z-index:1;text-align:center;color:#fff;height:20px;position:relative;border-left:none;background-color:var(--color);min-width:50px;margin-left:12px;border-radius:0 4px 4px 0;font-size:14px;line-height:20px;padding-right:2px}.tag[_ngcontent-%COMP%]:before{content:"";z-index:-1;position:absolute;top:3px;left:-7px;width:14px;height:14px;background-color:var(--color);border-right:none;border-top:none;transform:rotate(45deg)}.start-point-vertline[_ngcontent-%COMP%]{bottom:0px;top:40px;background-color:#00a2ff;transform:translate(-50%)}.start-point-vertline.yellow[_ngcontent-%COMP%]{z-index:8;top:60px;background-color:#fdb700}.simulate-start-point-badge[_ngcontent-%COMP%]{background-color:#00a2ff;width:80px;height:20px;line-height:20px;text-align:center;border-radius:.375rem;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity));transform:translate(-50%,-180%);position:absolute}.simulate-start-point-badge[_ngcontent-%COMP%]:after{--size: 10px;content:"";display:block;position:absolute;left:50%;top:100%;transform:translate(-50%);width:0px;height:0px;border-left:calc(var(--size) / 2) solid transparent;border-right:calc(var(--size) / 2) solid transparent;border-top:calc(.866 * var(--size)) solid rgb(0,162,255)}  .dark-mode{--bg-overlay-chart: var(--main-bg) }  .light-mode{--bg-overlay-chart: #F1F2FD}.overlay-chart[_ngcontent-%COMP%]{position:absolute;pointer-events:none;top:0;left:0px;right:44px;bottom:60px}@media (min-width: 640px){.overlay-chart[_ngcontent-%COMP%]{bottom:30px;right:51px}}.overlay-chart[_ngcontent-%COMP%]:after{content:"";top:0;width:200%;height:100%;position:absolute;background:linear-gradient(to right,transparent 44%,var(--bg-overlay-chart) 50%);z-index:9;transform:translate(-50%)}.overlay-chart.play-animation[_ngcontent-%COMP%]:after{animation:_ngcontent-%COMP%_shinebg 1.4s forwards;animation-delay:.6s;animation-timing-function:linear}.overlay-chart.play-animation.instant[_ngcontent-%COMP%]:after{animation-delay:0s}@keyframes _ngcontent-%COMP%_shinebg{0%{transform:translate(-50%)}to{transform:translate(100%)}}  .dark-mode .dashboard-chart-summary{background:rgba(26,24,45,.9)}  .light-mode .dashboard-chart-summary{background:rgba(255,255,255,.9)}.dashboard-chart-summary[_ngcontent-%COMP%]{box-shadow:0 2px 9px 1px rgba(0,0,0,.3)}.hover-change.is-hover[_ngcontent-%COMP%]{color:rgb(var(--color))!important;background-color:rgba(var(--color),.1)!important}.hover-purple.is-hover[_ngcontent-%COMP%]{color:#982bfb!important;background-color:rgba(152,43,251,.1)!important}.tag-2[_ngcontent-%COMP%]{display:inline-block;color:#fff;height:20px;position:relative;border-left:none;background-color:var(--color);min-width:50px;margin-left:8px;border-radius:6px;font-size:14px;line-height:20px;padding-left:4px;padding-right:4px;text-align:center}.tag-2[_ngcontent-%COMP%]:before{content:"";position:absolute;top:6px;left:-7px;width:0;height:0;border-top:4px solid transparent;border-right:8px solid var(--color);border-bottom:4px solid transparent}ion-popover[_ngcontent-%COMP%]{--width: 40px}ion-popover[_ngcontent-%COMP%]::part(content){border-radius:10px}.dashboard-chart-tooltip[_ngcontent-%COMP%]{width:125px}.dashboard-chart-tooltip-simulate[_ngcontent-%COMP%]{width:170px}@media (min-width: 640px){.dashboard-chart-tooltip-simulate[_ngcontent-%COMP%]{width:190px}}.color-picker-container[_ngcontent-%COMP%]{left:.5rem;top:.5rem;z-index:10}@media (min-width: 640px){.color-picker-container[_ngcontent-%COMP%]{left:1.25rem}}']}),i})();const ee=function(i){return{"transform rotate-180":i}};function ie(i,s){if(1&i&&t._UZ(0,"ion-icon",16),2&i){const e=t.oxw();t.Q6J("ngClass",t.VKq(1,ee,e.historicalAverageYield<0))}}const oe=function(i,s){return[i,s]};let ne=(()=>{class i{constructor(){this.showInfo=!0,this.totalProfitAmount=0,this.historicalAverageYield=0,this.startingAssets=0,this.currentAssets=0,this.abs=Math.abs}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-robot-summary"]],inputs:{showInfo:"showInfo",totalProfitAmount:"totalProfitAmount",historicalAverageYield:"historicalAverageYield",startingAssets:"startingAssets",currentAssets:"currentAssets"},decls:37,vars:30,consts:[[1,"bg-grey-4","rounded-xl","border","border-main-border","p-2","font-medium"],[1,"grid","grid-cols-12","mb-4"],[1,"col-span-7"],[1,"text-2xl","text-text-strong"],[1,"capitalize","text-xs"],[1,"col-span-5"],[1,"flex","items-center","font-medium","text-2xl",3,"ngClass"],["name","triangle","class","w-2 h-2 mr-0.5","size","large",3,"ngClass",4,"ngIf"],[1,"grid","grid-cols-12"],[1,"bg-text-contrast","border","border-main-border","px-1","rounded-md","w-28"],[1,"text-xs"],[1,"capitalize","text-text-strong","text-base"],[1,"col-span-2","self-center"],[1,"w-7","h-7","ml-1","border","border-main-border","flex","items-center","justify-center","rounded-full"],["name","arrow-forward-outline",1,"text-text-strong","w-6","h-6"],[1,"capitalize","text-base","text-text-strong"],["name","triangle","size","large",1,"w-2","h-2","mr-0.5",3,"ngClass"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4),t.ALo(5,"currency"),t.qZA(),t.TgZ(6,"div",4),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"div",5)(10,"div",6),t.YNc(11,ie,1,3,"ion-icon",7),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"div",4),t._uU(15),t.ALo(16,"translate"),t.qZA()()(),t.TgZ(17,"div",8)(18,"div",5)(19,"div",9)(20,"div",10),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"div",11),t._uU(24),t.ALo(25,"currency"),t.qZA()()(),t.TgZ(26,"div",12)(27,"div",13),t._UZ(28,"ion-icon",14),t.qZA()(),t.TgZ(29,"div",5)(30,"div",9)(31,"div",10),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"div",15),t._uU(35),t.ALo(36,"currency"),t.qZA()()()()()),2&e&&(t.xp6(4),t.Oqu(o.showInfo?(o.totalProfitAmount>0?"+":"")+t.lcZ(5,10,o.totalProfitAmount):"***"),t.xp6(3),t.Oqu(t.lcZ(8,12,"total-return")),t.xp6(3),t.Q6J("ngClass",t.WLB(27,oe,o.historicalAverageYield<0?"text-main-red":"text-main-green",o.showInfo?"":"!text-text-strong")),t.xp6(1),t.Q6J("ngIf",o.showInfo),t.xp6(1),t.hij(" ",o.showInfo?t.xi3(13,14,o.abs(100*o.historicalAverageYield),"0.2-2")+"%":"***"," "),t.xp6(3),t.Oqu(t.lcZ(16,17,"total-yield")),t.xp6(6),t.Oqu(t.lcZ(22,19,"starting-assets")),t.xp6(3),t.hij(" ",o.showInfo?t.lcZ(25,21,o.startingAssets):"***"," "),t.xp6(8),t.Oqu(t.lcZ(33,23,"current-assets")),t.xp6(3),t.hij(" ",o.showInfo?t.lcZ(36,25,o.currentAssets):"***"," "))},dependencies:[d.mk,d.O5,g.gu,d.JJ,d.H9,_.X$],styles:[".portfolio-overview[_ngcontent-%COMP%]{grid-template-rows:minmax(0,auto) 1fr}.portfolio-overview[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--grey-1);font-size:13px}.starting-assets[_ngcontent-%COMP%]   .current-assets[_ngcontent-%COMP%]{width:37.5%}.arrow-icon[_ngcontent-%COMP%]{width:25%}"]}),i})();function se(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",23)(1,"button",24),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.saveImage())}),t._UZ(2,"ion-icon",25),t._uU(3),t.ALo(4,"translate"),t.qZA()()}2&i&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"screenshot")," "))}const re=function(i){return[i]};function ae(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button")(1,"i",26),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.toggleShow())}),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.VKq(1,re,e.showInfo?"icon-eyenormal":"icon-eyeslash"))}}function le(i,s){1&i&&t._UZ(0,"app-dashboard-yield-table",31)}const ce=function(i){return{hidden:i}};function de(i,s){if(1&i&&t._UZ(0,"app-activated-chart",32),2&i){const e=t.oxw(3);t.Q6J("subInfo",e.subInfo)("showInfo",e.showInfo)("ngClass",t.VKq(3,ce,e.showTable))}}function he(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",33)(1,"app-dashboard-switch",34),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.showTable=!n.showTable)}),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("showTable",e.showTable)}}function pe(i,s){if(1&i&&(t.TgZ(0,"div")(1,"div",27),t.YNc(2,le,1,0,"app-dashboard-yield-table",28),t.YNc(3,de,1,5,"app-activated-chart",29),t.YNc(4,he,2,1,"div",30),t.qZA(),t.GkF(5,21),t.qZA()),2&i){const e=s.ngLet,o=t.oxw(2),n=t.MAs(11);t.xp6(2),t.Q6J("ngIf",o.showTable),t.xp6(1),t.Q6J("ngIf",o.isInit),t.xp6(1),t.Q6J("ngIf",e),t.xp6(1),t.Q6J("ngTemplateOutlet",n)}}function ge(i,s){if(1&i&&(t.TgZ(0,"div",8)(1,"div",9),t.YNc(2,se,5,3,"div",10),t.ALo(3,"async"),t.qZA(),t.TgZ(4,"div",11)(5,"div",12)(6,"div",13)(7,"h1",14),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.YNc(10,ae,2,3,"button",15),t.qZA(),t.TgZ(11,"a",16),t._UZ(12,"i",17),t.TgZ(13,"div",18),t._uU(14),t.ALo(15,"translate"),t.qZA()()(),t.YNc(16,pe,6,4,"div",19),t.ALo(17,"async"),t.qZA(),t.TgZ(18,"div",20),t.GkF(19,21),t._UZ(20,"div",22),t.qZA()()),2&i){const e=s.ngLet,o=t.oxw(),n=t.MAs(7);t.xp6(2),t.Q6J("ngIf",t.lcZ(3,6,o.userService.userInfo$)),t.xp6(6),t.hij(" ",t.lcZ(9,8,"portfolio")," "),t.xp6(2),t.Q6J("ngIf",e),t.xp6(4),t.Oqu(t.lcZ(15,10,"my-wallet")),t.xp6(2),t.Q6J("ngLet",t.lcZ(17,12,o.userService.userInfo$)),t.xp6(3),t.Q6J("ngTemplateOutlet",n)}}function fe(i,s){1&i&&t._UZ(0,"div",36)}function ue(i,s){if(1&i&&t.YNc(0,fe,1,0,"div",35),2&i){const e=t.oxw();t.Q6J("ngIf",e.userService._userInfo)}}function me(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",37)(1,"button",38),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.userService.toggleLoginModal(!0))}),t._uU(2),t.ALo(3,"translate"),t.qZA()()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"top-nav-login-register")," "))}function _e(i,s){if(1&i&&(t.TgZ(0,"div",49),t._UZ(1,"app-robot-summary",50)(2,"app-portfolio-algorithm-list",51),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("showInfo",e.showInfo)("totalProfitAmount",e.totalProfitAmount)("historicalAverageYield",e.historicalAverageYield)("startingAssets",e.startingAssets)("currentAssets",e.currentAssets)}}function ve(i,s){if(1&i&&(t.TgZ(0,"div",49),t._UZ(1,"app-exchanges-portfolio",52)(2,"app-assets-list",53),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("showInfo",e.showInfo)}}const at=function(i){return{active:i}};function xe(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",39)(1,"div",40)(2,"div",41)(3,"div",42)(4,"div",43),t.NdJ("click",function(n){t.CHM(e);const a=t.MAs(13),c=t.oxw();return t.KtG(c.handleTabClick(n,0,a))}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",43),t.NdJ("click",function(n){t.CHM(e);const a=t.MAs(13),c=t.oxw();return t.KtG(c.handleTabClick(n,1,a))}),t._uU(8),t.ALo(9,"translate"),t.qZA()()()(),t.TgZ(10,"div",44)(11,"div",45)(12,"swiper",46,47),t.YNc(14,_e,3,5,"ng-template",48),t.YNc(15,ve,3,1,"ng-template",48),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngClass",t.VKq(9,at,0===e.activeTab)),t.xp6(1),t.hij(" ",t.lcZ(6,5,"my-robots")," "),t.xp6(2),t.Q6J("ngClass",t.VKq(11,at,1===e.activeTab)),t.xp6(1),t.hij(" ",t.lcZ(9,7,"my-assets")," "),t.xp6(4),t.Q6J("config",e.slideOpts)}}const be=[{path:"",component:(()=>{class i extends C.H{constructor(e,o,n,a){super(),this.userService=e,this.tradeService=o,this.strategyService=n,this.storage=a,this.startingAssets=0,this.currentAssets=0,this.connectedExchanges=0,this.activeStragiesCount=0,this.isRightOpen=!0,this.isFullScreen=!1,this.showInfo=!1,this.itemList=[],this.isDataVisible=!1,this.historicalAverageYield=0,this.totalProfitAmount=0,this.totalYield=0,this.isInit=!1,this.stategyInfo=null,this.isComingSoonMode="comingSoonMode"in et.N&&et.N.comingSoonMode,this.showKey="portforlio_show",this.slideOpts={slidesPerView:"auto",allowTouchMove:!1,loop:!1},this.activeTab=0,this.showTable=!1}ngOnInit(){var e,o,n,a;return(0,r.mG)(this,void 0,void 0,function*(){try{if(yield this.userService.isLogin()){this.showInfo=yield this.storage.get(this.showKey);const c=yield(0,S.n)(this.strategyService.queryMyRealStrategy({page:0,rows:1e3,isLike:!1,isSub:!0,sortOrder:"asc",sortBy:"earnings"}));if(this.historicalAverageYield=c.rows.historicalAverageYield,this.totalProfitAmount=c.rows.totalProfitAmount,null!==(o=null===(e=c.rows)||void 0===e?void 0:e.myStrategy)&&void 0!==o&&o[0]){this.stategyInfo=null===(a=null===(n=c.rows)||void 0===n?void 0:n.myStrategy)||void 0===a?void 0:a[0];const p=yield(0,S.n)(this.strategyService.getSubInfo(c.rows.myStrategy[0].id));this.subInfo=p.data,this.subInfo&&(this.startingAssets=this.subInfo.totalFund,this.currentAssets=this.subInfo.ec)}}else this.showInfo=!1;this.isInit=!0}catch(c){this.isInit=!0}this.isInit=!0})}toggleShow(){return(0,r.mG)(this,void 0,void 0,function*(){this.showInfo=!this.showInfo,yield this.storage.set(this.showKey,this.showInfo)})}getAssetsInfo(e){this.currentAssets=Number.parseFloat(e.currentAssets),this.connectedExchanges=Number.parseFloat(e.connectedExchanges)}handleTabClick(e,o,n){null==e||e.preventDefault(),null==e||e.stopPropagation(),n.swiperRef.slideTo(o),this.activeTab=o}saveImage(){return(0,r.mG)(this,void 0,void 0,function*(){try{setTimeout(()=>{const e=o=>!["exclude-me"].some(a=>o.classList&&o.classList.contains(a));(0,it.Z)({htmlToImage:"https://cdnjs.cloudflare.com/ajax/libs/html-to-image/1.10.8/html-to-image.js"}).htmlToImage.onLoad(()=>{const o=document.getElementById("sdfsdfgdg");o&&window.htmlToImage.toPng(o,{filter:e}).then(n=>{(0,Mt.S)(n,`My portfolio ${(new Date).toISOString()}.png`)})})},100)}catch(e){}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(E.K),t.Y36(I.X),t.Y36(k.k),t.Y36(ot.V))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-my-portfolio"]],features:[t.qOj],decls:12,vars:6,consts:[["id","sdfsdfgdg",3,"fullscreen","scrollEvents"],["ionContent",""],[1,"hidden","sm:block"],[1,"block","sm:hidden","w-full","z-20",3,"hideMobileHeader"],["id","abcdef-zhs","class","portfolio-page-container flex flex-1 flex-col lg:flex-row pt-2 sm:pt-0 md:pb-0 font-medium text-sm sm:text-base",4,"ngLet"],["portfolioRight",""],["logoutTemplate",""],["tabs",""],["id","abcdef-zhs",1,"portfolio-page-container","flex","flex-1","flex-col","lg:flex-row","pt-2","sm:pt-0","md:pb-0","font-medium","text-sm","sm:text-base"],[1,"portfolio-left","border-r","border-main-border"],["class","hidden lg:flex items-end h-full pb-2 pl-2 w-full sticky top-0",4,"ngIf"],[1,"portfolio-center","flex","flex-col","pb-4","mb-40","lg:mb-0"],[1,"px-2","pt-2","pb-3","sm:px-5","sm:py-3","text-text-strong","text-3xl","flex","justify-between","items-center","flex-wrap"],[1,"flex","items-center","flex-1"],[1,"mr-2"],[4,"ngIf"],["routerLink","/settings/my-wallet",1,"flex","items-center","justify-center","rounded","px-3","bg-grey-4","hover:bg-grey-3","text-lg","border","border-main-border",2,"height","34px"],[1,"icon-wallet","mr-3","text-xl"],[1,"sm:mr-4"],[4,"ngLet"],[1,"portfolio-right","mx-auto","lg:border-l","border-main-border","px-2","pt-2","fade-in","hidden","2xl:block",2,"--delay","0.8s"],[3,"ngTemplateOutlet"],[1,"side-bar","border-l","border-main-border","relative","z-20"],[1,"hidden","lg:flex","items-end","h-full","pb-2","pl-2","w-full","sticky","top-0"],[1,"border","border-solid","border-main-border","rounded-xl","flex","pl-2","pr-4","py-2","text-xl","items-center","sticky","bottom-12","left-2","bg-text-contrast","ml-2","mb-10",2,"min-width","106px",3,"click"],["name","camera-outline",1,"w-6","h-6","mr-2"],[1,"text-xl","text-grey-2","scale-x-full",3,"ngClass","click"],[1,"w-full","border-t","border-b","border-main-border","relative",2,"height","300px"],["class","block h-full mb-2",4,"ngIf"],["class","block h-full",3,"subInfo","showInfo","ngClass",4,"ngIf"],["class","absolute bottom-16 sm:bottom-9 left-2 z-10 fade-in","style","--delay: 0.4s",4,"ngIf"],[1,"block","h-full","mb-2"],[1,"block","h-full",3,"subInfo","showInfo","ngClass"],[1,"absolute","bottom-16","sm:bottom-9","left-2","z-10","fade-in",2,"--delay","0.4s"],[1,"inline-block","mb-2",3,"showTable","click"],["class","sticky top-2",4,"ngIf"],[1,"sticky","top-2"],[1,"fade-in","flex","items-center","justify-center","w-full","h-full","flex-1",2,"--delay","0.2s"],[1,"btn-blue","rounded-md","px-10","py-3",3,"click"],[1,""],[1,"flex","cursor-pointer","border-b","border-main-border","items-center","sidebar-header","relative","overflow-hidden",2,"height","50px"],[1,"overflow-x-auto","sm:overflow-x-hidden","overflow-y-hidden","relative","h-full","hide-scroll"],[1,"tabs","flex","items-center","flex-1","capitalize","text-lg","h-full"],[1,"tab-item",3,"ngClass","click"],[1,"tab-body","realtive","flex","flex-col","justify-center","flex-1","relative","z-10"],[1,"flex","flex-col","flex-1","w-full","text-left"],[1,"flex-1","w-full","text-left","mb-36",3,"config"],["swiper",""],["swiperSlide",""],[1,"w-full","text-left","p-2","md:p-4","slide-item-wrapper"],[1,"block","mb-4",3,"showInfo","totalProfitAmount","historicalAverageYield","startingAssets","currentAssets"],[1,"block","rounded-xl","border","border-main-border"],[1,"block","mb-4",3,"showInfo"],[1,"block"]],template:function(e,o){if(1&e&&(t.TgZ(0,"ion-content",0,1),t._UZ(2,"app-header",2)(3,"app-settings-top-nav",3),t.YNc(4,ge,21,14,"div",4),t.ALo(5,"async"),t.qZA(),t.YNc(6,ue,1,1,"ng-template",null,5,t.W1O),t.YNc(8,me,4,3,"ng-template",null,6,t.W1O),t.YNc(10,xe,16,13,"ng-template",null,7,t.W1O)),2&e){const n=t.MAs(1);t.Q6J("fullscreen",!0)("scrollEvents",!0),t.xp6(3),t.Q6J("hideMobileHeader",n),t.xp6(1),t.Q6J("ngLet",t.lcZ(5,4,o.userService.loginStateChange))}},dependencies:[d.mk,d.O5,d.tP,y.rH,g.W2,g.gu,g.Fo,U.h,Ot.G,St.I,M.X,Y,tt,q.nF,q.YC,nt.B,st.J,Ft,te,ne,d.Ov,_.X$],styles:['[_nghost-%COMP%]{--left-sidebar-width: 260px;--right-sidebar-width: 260px}@media (min-width: 1280px){[_nghost-%COMP%]{--left-sidebar-width: 300px;--right-sidebar-width: 300px}}@media (min-width: 1600px){[_nghost-%COMP%]{--left-sidebar-width: 360px;--right-sidebar-width: 260px}}@media (min-width: 1850px){[_nghost-%COMP%]{--right-sidebar-width: 360px}}.portfolio-page-container[_ngcontent-%COMP%]{min-height:calc(100% - 71px);padding-right:0}.portfolio-left[_ngcontent-%COMP%]{width:var(--left-sidebar-width);min-width:var(--left-sidebar-width)}.portfolio-left[_ngcontent-%COMP%]   app-referrals-list[_ngcontent-%COMP%]     .referral-scroll-host .ng-scroll-content{max-width:var(--left-sidebar-width)}.portfolio-center[_ngcontent-%COMP%]{width:auto;flex:1}@media (min-width: 1024px){.portfolio-center[_ngcontent-%COMP%]{flex:none;width:calc(100% - var(--left-sidebar-width) - var(--right-sidebar-width));flex-grow:1;flex-shrink:0}}.portfolio-right[_ngcontent-%COMP%]{width:var(--right-sidebar-width)}@media (min-width: 640px){.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-50%;right:-50%;bottom:-50%;left:-50%;background:linear-gradient(to bottom,rgba(229,172,142,0),rgba(255,255,255,.3) 50%,rgba(229,172,142,0));transform:rotate(60deg) translate(-5em,15em)}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:after{animation:sheen 1.2s forwards}@keyframes sheen{to{transform:rotate(60deg) translate(1em,-20em)}}}@media (min-width: 1280px){.event-item[_ngcontent-%COMP%]{height:270px}}.missions-button[_ngcontent-%COMP%]{width:70px;height:70px;border:3px solid rgb(168,5,255);background-color:#4a1d86;bottom:85px;left:20px;box-shadow:2.6px 5.1px 5.1px rgba(0,0,0,.3);transition:all .3s ease-in-out}@media (min-width: 640px){.missions-button[_ngcontent-%COMP%]{bottom:30px;left:30px;width:87px;height:87px}}@media (min-width: 1024px){.missions-button[_ngcontent-%COMP%]{left:calc(var(--left-sidebar-width) - 180px)}}@media (min-width: 1280px){.missions-button[_ngcontent-%COMP%]{left:calc(var(--left-sidebar-width) - 125px)}}@media (min-width: 1600px){.missions-button[_ngcontent-%COMP%]{left:calc(var(--left-sidebar-width) - 275px)}}@media (min-width: 1850px){.missions-button[_ngcontent-%COMP%]{left:calc(var(--left-sidebar-width) - 125px)}}.missions-button[_ngcontent-%COMP%]   .pending-missions[_ngcontent-%COMP%]{background-color:#fe002b}.missions-button[_ngcontent-%COMP%]:hover{filter:brightness(120%)}ng-scrollbar[_ngcontent-%COMP%]     .ng-scroll-content{max-width:100%;height:100%;display:flex!important;flex-direction:column}  .dark-mode{--right-sidebar-active: var(--main-blue-transparent);--right-sidebar-bg: #222231;--tab-handler-background-color: #373747;--tab-handler-border-color: #5b5b6c;--tab-handler-color: white}  .light-mode{--right-sidebar-active: linear-gradient(to left,#4b21ff,#0564ff);--right-sidebar-bg: white;--tab-handler-background-color: #f0f0f9;--tab-handler-border-color: var(--main-border);--tab-handler-color: var(--grey-2)}.tabs[_ngcontent-%COMP%]   .tab-item[_ngcontent-%COMP%]{height:50px;line-height:50px;white-space:nowrap;border-right-width:1px;border-color:var(--main-border);padding-left:.625rem;padding-right:.625rem;text-align:center;font-weight:500;min-width:140px}.tabs[_ngcontent-%COMP%]   .tab-item.active[_ngcontent-%COMP%]{background:var(--right-sidebar-active);position:relative;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.tabs[_ngcontent-%COMP%]   .tab-item.active[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;height:3px;bottom:0px;left:0px;width:100%;background-color:var(--main-blue)}.tab-handler[_ngcontent-%COMP%]{min-width:inherit;background:var(--tab-handler-background-color);border-color:var(--tab-handler-border-color);color:var(--tab-handler-color);display:flex}.tab-handler[_ngcontent-%COMP%]:not(.end){box-shadow:rgba(0,0,0,.97) 0 0 28px}@media (min-width: 310px){.tab-handler[_ngcontent-%COMP%]{display:none}}.hide-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.hide-scroll[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}swiper[_ngcontent-%COMP%]     .swiper-slide{width:100%;height:0;display:block}swiper[_ngcontent-%COMP%]     .swiper-slide.swiper-slide-active{height:auto}@media (min-width: 640px){swiper[_ngcontent-%COMP%]     .swiper-slide.swiper-slide-active{min-height:unset}.slide-item-wrapper[_ngcontent-%COMP%]{max-width:360px}}  .light-mode app-portfolio-algorithm-list{background-color:#fff}'],data:{animation:[(0,T.X$)("staggerList",[(0,T.eR)("* => *",[(0,T.IO)(":enter",[(0,T.oB)({opacity:0,transform:"{{scale}} {{translateY}}"}),(0,T.EY)(50,[(0,T.jt)("{{time}}",(0,T.oB)({opacity:1,transform:"scale(1) translateY(0)"}))])],{optional:!0})],{params:{scale:"scale(0.6)",time:"0.5s",translateY:"translateY(-.8rem)"}})])]}}),i})()}];let ye=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[y.Bz.forChild(be),y.Bz]}),i})();var we=l(8512),Ce=l(8241),Ae=l(4260);let Te=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.ez,y.Bz,g.Pc,_.aw,x.kb,ye,A.T,b.x,Z.Q,M.X,Zt.g,Y,tt,we.Z,Ce.X,Ae.k,G.e,J.z,q.kz,nt.B,st.J]}),i})()},1836:(V,L,l)=>{l.d(L,{X:()=>K});var d=l(6895),y=l(3709),g=l(8008),_=l(2722),x=l(7154),A=l(9116),b=l(8854),Z=l(560),M=l(4912),r=l(4650),t=l(5939),O=l(6396),C=l(8201),N=l(364),Q=l(7139),S=l(3284);function j(h,v){1&h&&r._UZ(0,"app-theme-toggle",11)}function I(h,v){1&h&&r._UZ(0,"app-language-dropdown",12),2&h&&r.Q6J("showText",!1)("showIcon",!0)}function k(h,v){1&h&&r._UZ(0,"app-membership",13)}function E(h,v){1&h&&r._UZ(0,"app-hash-power",13)}const B=function(h){return{originUrl:h}};function U(h,v){if(1&h&&r._UZ(0,"app-animated-bell",14),2&h){const u=r.oxw();r.Q6J("queryParams",r.VKq(2,B,u.router.url))("count",u.count||0)}}const F=function(h){return{back:h}};function z(h,v){if(1&h&&(r.TgZ(0,"a",15)(1,"div",16),r._UZ(2,"img",17),r.qZA()()),2&h){const u=v.ngIf,w=r.oxw();r.Q6J("queryParams",r.VKq(2,F,w.router.url)),r.xp6(2),r.Q6J("src",u.headImgUrl,r.LSH)}}function R(h,v){if(1&h&&(r.TgZ(0,"a",15)(1,"div",18),r._UZ(2,"app-profile-icon"),r.qZA()()),2&h){const u=r.oxw();r.Q6J("queryParams",r.VKq(1,F,u.router.url))}}const H=["*"];let K=(()=>{class h extends x.H{constructor(u,w){super(),this.userService=u,this.notificationService=w,this.isLogin=!1,this.count=0}ngOnInit(){this.userService.loginStateChange.pipe((0,_.R)(this.onDestroy$)).subscribe(u=>{this.isLogin=u}),this.notificationService.count$.subscribe(u=>{this.count=u})}}return h.\u0275fac=function(u){return new(u||h)(r.Y36(t.K),r.Y36(O.g))},h.\u0275cmp=r.Xpm({type:h,selectors:[["app-settings-top-nav"]],standalone:!0,features:[r.qOj,r.jDz],ngContentSelectors:H,decls:22,vars:20,consts:[[1,"header","flex","justify-between","px-2","py-3"],[1,"flex","items-center",3,"routerLink"],["src","assets/logo-dark.png","alt","Logo for ottogo, a all-in-one blockchain platform",1,"h-7","xs:h-8","2xs:h-9","ml-2","cursor-pointer","dark-element"],["src","assets/logo-light.png","alt","Logo for ottogo, a all-in-one blockchain platform",1,"h-7","xs:h-8","2xs:h-9","ml-2","cursor-pointer","light-element"],[1,"flex","items-center"],["class","flex items-center mr-2 2xs:mr-4",4,"ngIf"],["class","flex items-center mr-2 2xs:mr-4",3,"showText","showIcon",4,"ngIf"],["class","mr-2.5 flex items-center",4,"ngIf"],["routerLink","/notifications","class","cursor-pointer mr-2.5",3,"queryParams","count",4,"ngIf"],["routerLink","/settings",3,"queryParams",4,"ngIf","ngIfElse"],["loginTemplate",""],[1,"flex","items-center","mr-2","2xs:mr-4"],[1,"flex","items-center","mr-2","2xs:mr-4",3,"showText","showIcon"],[1,"mr-2.5","flex","items-center"],["routerLink","/notifications",1,"cursor-pointer","mr-2.5",3,"queryParams","count"],["routerLink","/settings",3,"queryParams"],[1,"w-8","h-8","2xs:w-9","2xs:h-9","flex","flex-none","justify-center","items-center"],["alt","Avatar","width","36px","height","36px",1,"rounded-full","overflow-hidden","exclude-me",3,"src"],[1,"w-8","h-8","rounded-full","overflow-hidden"]],template:function(u,w){if(1&u&&(r.F$t(),r.TgZ(0,"ion-header")(1,"div",0)(2,"div",1),r._UZ(3,"img",2)(4,"img",3),r.qZA(),r.TgZ(5,"div",4),r.YNc(6,j,1,0,"app-theme-toggle",5),r.ALo(7,"async"),r.YNc(8,I,1,2,"app-language-dropdown",6),r.ALo(9,"async"),r.YNc(10,k,1,0,"app-membership",7),r.ALo(11,"async"),r.YNc(12,E,1,0,"app-hash-power",7),r.ALo(13,"async"),r.YNc(14,U,1,4,"app-animated-bell",8),r.ALo(15,"async"),r.YNc(16,z,3,4,"a",9),r.ALo(17,"async"),r.YNc(18,R,3,3,"ng-template",null,10,r.W1O),r.qZA()(),r.TgZ(20,"div"),r.Hsn(21),r.qZA()()),2&u){const Y=r.MAs(19);r.xp6(2),r.Q6J("routerLink","/"),r.xp6(4),r.Q6J("ngIf",!r.lcZ(7,8,w.userService.userInfo$)),r.xp6(2),r.Q6J("ngIf",!r.lcZ(9,10,w.userService.userInfo$)),r.xp6(2),r.Q6J("ngIf",r.lcZ(11,12,w.userService.userInfo$)),r.xp6(2),r.Q6J("ngIf",r.lcZ(13,14,w.userService.userInfo$)),r.xp6(2),r.Q6J("ngIf",r.lcZ(15,16,w.userService.userInfo$)),r.xp6(2),r.Q6J("ngIf",r.lcZ(17,18,w.userService.userInfo$))("ngIfElse",Y)}},dependencies:[d.ez,d.O5,d.Ov,y.Bz,y.rH,g.Pc,g.Gu,g.YI,g.Fo,A.Q,C.m,N.g,b.T,Q.q,S.T,M.E,Z.B],styles:["[_nghost-%COMP%]{position:sticky;top:0;transition:transform .3s}.hide-header[_nghost-%COMP%]{transform:translateY(-65px)}.header[_ngcontent-%COMP%]{position:sticky;top:0;transition:transform .3s;z-index:50;box-shadow:0 0 14px rgba(0,0,0,.3)}  .light-mode .header{background-color:#f7f7f7;border-bottom-width:1px;border-color:var(--main-border)}  .dark-mode .header{background-color:#232342;border-bottom:1px solid #4b4c79}"]}),h})()},2472:(V,L,l)=>{l.d(L,{O:()=>_});var d=l(2340),y=l(4650),g=l(529);let _=(()=>{class x{constructor(b){this.http=b}exchangeQuery(){return this.http.get(`${d.N.BASE_URL}/user/exchange/query`)}queryBinding(b,Z,M,r){return this.http.get(`${d.N.BASE_URL}/user/exchange/queryBinding?page=${b}&rows=${Z}&exchange=${M}&kind=${r}`)}bindingExchange(b){return this.http.post(`${d.N.BASE_URL}/user/exchange/binding`,b)}unbinding(b){return this.http.post(`${d.N.BASE_URL}/user/exchange/unbinding`,b)}}return x.\u0275fac=function(b){return new(b||x)(y.LFG(g.eN))},x.\u0275prov=y.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})()}}]);