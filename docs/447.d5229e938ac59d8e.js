"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[447],{447:(T,m,n)=>{n.d(m,{m:()=>V});var d=n(655),_=n(6895),t=n(4650),h=n(4006),c=n(8008),p=n(3416),u=n(5433),y=n(8854),f=n(9116),v=n(7154),a=n(6511),x=n(7645),A=n(2722),C=n(9808),M=n(293),E=n(2343),O=n(529),b=n(3709),S=n(225),w=n(7011),k=n(6832),Z=n(302),D=n(9177),I=n(8222),U=n(9787),R=n(8798),B=n(5116);function K(r,l){if(1&r&&(t.TgZ(0,"h2",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,e.title)," (",e.realStrategyPageList.length,") ")}}function J(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"div",30),t.NdJ("click",function(){t.CHM(e),t.oxw();const s=t.MAs(7),o=t.oxw();return t.KtG(o.clearSearch(s))}),t._UZ(1,"i",31),t.qZA()}}function W(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"div",22)(1,"button",23),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.isOpenFilterModal=!0)}),t._UZ(2,"app-filter-icon",24),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",25)(6,"ion-input",26,27),t.NdJ("keydown.enter",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.init())})("ngModelChange",function(s){t.CHM(e);const o=t.oxw();return t.KtG(o.searchText=s)}),t.ALo(8,"translate"),t.qZA(),t.YNc(9,J,2,0,"div",28),t.TgZ(10,"i",29),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.init())}),t.qZA()()()}if(2&r){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,4,"filter")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(8,6,"input-placeholder-search")),t.Q6J("ngModel",e.searchText),t.xp6(3),t.Q6J("ngIf",e.searchText)}}const F=function(r){return{"text-main-blue":r}};function N(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"div",32)(1,"div",33),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.handleLike())}),t._UZ(2,"social-like-icon",34),t.qZA(),t._UZ(3,"div",35),t.TgZ(4,"app-check-circle",36),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.handleSub())}),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(2),t.Q6J("active",!!e.isLike),t.xp6(2),t.Q6J("ngClass",t.VKq(2,F,e.isSub))}}function Q(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"app-strategy-item",41),t.NdJ("click",function(){const o=t.CHM(e).$implicit,g=t.oxw(2);return t.KtG(g.selectReal(o.id))})("notifyParentEvent",function(s){t.CHM(e);const o=t.oxw(2);return t.KtG(o.handleNotifyParent(s))}),t.qZA()}if(2&r){const e=l.$implicit,i=l.index,s=t.oxw().ngLet,o=t.oxw();t.Q6J("customClass",i<s.length-1?"border-b border-main-border":"")("active",o.selectId===e.id||o.routePushFirstList==e.id)("data",e)}}function j(r,l){1&r&&t._UZ(0,"app-loading-spinner",42)}function G(r,l){1&r&&(t.TgZ(0,"div",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"no-data-found")))}function H(r,l){1&r&&(t.TgZ(0,"div",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"no-more-results")))}function Y(r,l){if(1&r&&(t.TgZ(0,"ng-scrollbar",37),t.YNc(1,Q,1,3,"app-strategy-item",38),t.YNc(2,j,1,0,"app-loading-spinner",39),t.YNc(3,G,3,3,"div",40),t.YNc(4,H,3,3,"div",40),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.realStrategyPageList),t.xp6(1),t.Q6J("ngIf",e.scrollConfig.loading),t.xp6(1),t.Q6J("ngIf",!(e.scrollConfig.loading||null!=e.realStrategyPageList&&e.realStrategyPageList.length)),t.xp6(1),t.Q6J("ngIf",!e.scrollConfig.loading&&e.showNomoreResultLabel&&(null==e.realStrategyPageList?null:e.realStrategyPageList.length))}}const z=function(r){return{"min-height.px":r}},L=function(r,l){return{active:r,desc:l}},$=function(r,l,e){return{isShowingAutomated:r,isShowingCopyTrade:l,showOnlyActivated:e}};let V=(()=>{class r extends v.H{constructor(e,i,s,o,g,P){super(),this.activatedRoute=e,this.tradeService=i,this.strategyService=s,this.cdr=o,this.i18n=g,this.loadingController=P,this.isOpenFilterModal=!1,this.itemList=[],this.selectMode=!0,this.filterMode=!0,this.showOnlyActivated=!1,this.showTitle=!1,this.showBorder=!1,this.activeMode=!1,this.notifyParentEvent=new t.vpe,this.isShowingCopyTrade=!0,this.isShowingAutomated=!0,this.realStrategyPageList=[],this.strategyId="",this.sortType="earnings",this.sortBy="desc",this.replaceStrategyList=E.y,this.showNomoreResultLabel=!1,this.isLike=!1,this.isSub=!1,this.selectedItem=0,this.scrollConfig={noMore:!1,loading:!1,distance:1,throttle:300,page:0,rows:50},this.filter={field:"yield",order:-1},this.searchText="",this.incomeDay="",this.baseCurrency="",this.incomeRatio="",this.isFavorite=!1}ngAfterViewInit(){var e;null===(e=this.scroll)||void 0===e||e.updated.pipe((0,A.R)(this.onDestroy$)).subscribe(()=>{const i=this.scroll.nativeElement.querySelector(".ng-scroll-viewport");this.showNomoreResultLabel=i.scrollHeight>i.offsetHeight})}handleNotifyParent(e){this.notifyParentEvent.emit(e)}get isMobile(){return window.innerWidth<640}get title(){return this.showOnlyActivated?"my-active-strategies":"strategies"}ngOnInit(){return(0,d.mG)(this,void 0,void 0,function*(){this.activatedRoute.queryParams.subscribe(e=>(0,d.mG)(this,void 0,void 0,function*(){let i=e.id;i&&(this.defaultId=i,this.selectId=i,this.redirectParams=new O.LE({fromObject:e}))})),this.updateStrategyList(),this.getRealStrategyPage(),this.i18n.onLangChange.pipe().subscribe(e=>{this.init()})})}addLike(e,i){const s=this.realStrategyPageList.find(o=>o.id===i);s.isLike=!s.isLike,e?s.likeNum+=1:s.likeNum-=1}updateStrategyList(){return(0,d.mG)(this,void 0,void 0,function*(){this.itemList=yield(0,C.n)(yield this.tradeService.getAllStrategies())})}clearSearch(e){this.searchText="",e.setFocus(),this.init()}handleFilter(e,i){switch(this.filter.field===e?this.filter.order=-this.filter.order:(this.filter.field=e,this.filter.order=-1),console.log(this.filter.order),console.log(e),e){case"rank":this.sortType="ranking";break;case"yield":this.sortType="earnings";break;case"date":this.sortType="launchTime";break;default:this.sortType=""}switch(this.filter.order){case-1:this.sortBy="desc";break;case 1:this.sortBy="asc";break;default:this.sortType="asc"}this.filter=Object.assign({},this.filter),this.init()}handleLike(){this.isLike=!this.isLike,this.init(this.isLike,!1)}handleSub(){this.isSub=!this.isSub,this.init(!1,this.isSub)}init(e,i){this.scrollConfig.noMore=!1,this.scrollConfig.loading=!1,this.scrollConfig.page=0,this.realStrategyPageList=[],this.getRealStrategyPage(e,i)}selectReal(e){this.selectId=e}handleAutomatedClick(){this.isShowingAutomated=!this.isShowingAutomated,!this.isShowingAutomated&&!this.isShowingCopyTrade&&(this.isShowingCopyTrade=!0)}handleCopyTradeClick(){this.isShowingCopyTrade=!this.isShowingCopyTrade,!this.isShowingAutomated&&!this.isShowingCopyTrade&&(this.isShowingAutomated=!0)}handleModalApply(e){this.isShowingAutomated=e.isShowingAutomated,this.isShowingCopyTrade=e.isShowingCopyTrade,this.incomeDay=e.yieldTime,this.baseCurrency=e.asset,this.incomeRatio=e.yieldPercent>0?e.yieldPercent/100:"",this.init()}getRealStrategyPage(e,i){return(0,d.mG)(this,void 0,void 0,function*(){this.scrollConfig.loading||(this.scrollConfig.loading=!0,this.strategyService.getRealStrategyPageListV2({page:this.scrollConfig.page,rows:this.scrollConfig.rows,isLike:this.isLike,isSub:this.isSub,sortOrder:this.sortBy,sortBy:this.sortType,language:this.i18n.currentLang,strategyName:this.searchText,incomeDay:this.incomeDay,baseCurrency:this.baseCurrency,incomeRatio:this.incomeRatio},!0).subscribe({next:s=>{if(s.rows){if(this.scrollConfig.page++,0!==this.realStrategyPageList.length&&(this.realStrategyPageList=[]),s.rows.forEach(o=>{let g=[];o.accounts&&JSON.parse(o.accounts).forEach(X=>{g.push(X.symbolIcon)}),this.realStrategyPageList.push(Object.assign(Object.assign({},o),{icons:g,isActivated:o.isSub,type:"automated"}))}),this.realStrategyPageList.length>0&&1===this.scrollConfig.page){if(this.routePushFirstList&&0!==this.routePushFirstList)this.selectId=this.routePushFirstList,this.redirectParams.set("id",this.selectId),this.router.navigateByUrl(`/dashboard?${this.redirectParams.toString()}`);else if(this.defaultId)this.redirectParams.set("id",this.defaultId),this.router.navigateByUrl(`/dashboard?${this.redirectParams.toString()}`);else{if(this.isMobile)return;this.selectId=this.realStrategyPageList[0].id,this.redirectParams.set("id",this.selectId),this.router.navigateByUrl(`/dashboard?${this.redirectParams.toString()}`)}this.cdr.detectChanges()}this.scrollConfig.noMore=s.rows.length<this.scrollConfig.rows}else this.scrollConfig.noMore=!0},error:s=>{console.error(s)}}).add(()=>{this.scrollConfig.loading=!1}))})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(b.gz),t.Y36(S.X),t.Y36(w.k),t.Y36(t.sBO),t.Y36(p.sK),t.Y36(c.HT))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-algorithm-list"]],viewQuery:function(e,i){if(1&e&&(t.Gf(u.KC,5),t.Gf(a.V,5)),2&e){let s;t.iGM(s=t.CRH())&&(i.scroll=s.first),t.iGM(s=t.CRH())&&(i.StrategyItem=s)}},inputs:{selectMode:"selectMode",filterMode:"filterMode",showOnlyActivated:"showOnlyActivated",showTitle:"showTitle",showBorder:"showBorder",activeMode:"activeMode",routePushFirstList:"routePushFirstList"},outputs:{notifyParentEvent:"notifyParentEvent"},standalone:!0,features:[t.qOj,t.jDz],decls:37,vars:45,consts:[[1,"h-full","flex","flex-col","pt-2","sm:px-2","kkkkaaaa"],["class","text-text-strong text-xl mb-2",4,"ngIf"],[3,"ngStyle"],["class","flex items-center mb-0.5 -mx-1",4,"ngIf"],[1,"flex","items-center","font-medium","tracking-tight","relative","z-10"],["filterContainer",""],["class","flex items-center",4,"ngIf"],[1,"filter-item","px-1","py-1","rounded","mr-1",3,"ngClass","click"],[1,"flex","items-center","text-xs","font-medium","tracking-tight","pr-3","relative","pointer-events-none"],["name","caret-up-outline",1,"absolute","-right-0.5"],["yieldFilter",""],[1,"flex","items-center","text-xs","font-medium","tracking-tight","pr-3","relative","whitespace-nowrap","pointer-events-none"],[1,"flex-1"],[1,"border-main-border","border-b","-mx-2"],[1,"flex","text-sm","mt-0.5","font-medium"],[1,"flex-1","whitespace-nowrap"],[1,"w-16","text-right","whitespace-nowrap"],[1,"border-main-border","border-b","-mx-2","mt-0.5"],[1,"flex-1","-mx-2"],["visibility","hover","scrollShadow","","backToTopBtn","","class","h-full w-full",4,"ngLet"],[3,"isShowingAutomated","isShowingCopyTrade","isOpen","apply","isOpenChange"],[1,"text-text-strong","text-xl","mb-2"],[1,"flex","items-center","mb-0.5","-mx-1"],[1,"rounded-md","border","border-solid","border-main-border","px-2","text-text-strong","flex","items-center","text-xl",3,"click"],[1,"w-5","mr-1.5","fill-grey-2"],[1,"ml-2","flex-1","rounded-full","border-border-input","border","flex","items-center","bg-bg-input","px-2"],[1,"text-text-strong","theme-input",3,"ngModel","placeholder","keydown.enter","ngModelChange"],["input",""],["style","background: #7e7e962e; width: 17px; height: 17px","class","rounded-full mr-1 flex items-center justify-center",3,"click",4,"ngIf"],[1,"icon-searchsimple",3,"click"],[1,"rounded-full","mr-1","flex","items-center","justify-center",2,"background","#7e7e962e","width","17px","height","17px",3,"click"],[1,"icon-close","cursor-pointer"],[1,"flex","items-center"],[1,"-ml-2","cursor-pointer","p-1",2,"width","40px",3,"click"],[1,"block","cursor-pointer","w-full",3,"active"],[1,"h-4","border-l","border-main-border","mr-0.5"],[1,"p-1.5","mr-2","cursor-pointer",3,"ngClass","click"],["visibility","hover","scrollShadow","","backToTopBtn","",1,"h-full","w-full"],[3,"customClass","active","data","click","notifyParentEvent",4,"ngFor","ngForOf"],["class","text-grey-2 absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2","size","30px","thick","3px",4,"ngIf"],["class","py-12 text-center",4,"ngIf"],[3,"customClass","active","data","click","notifyParentEvent"],["size","30px","thick","3px",1,"text-grey-2","absolute","left-1/2","top-1/2","transform","-translate-x-1/2","-translate-y-1/2"],[1,"py-12","text-center"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,K,3,4,"h2",1),t.TgZ(2,"div",2),t.YNc(3,W,11,8,"div",3),t.TgZ(4,"div",4,5),t.YNc(6,N,5,4,"div",6),t.TgZ(7,"button",7),t.NdJ("click",function(o){return i.handleFilter("rank",o)}),t.TgZ(8,"div",8),t._uU(9),t.ALo(10,"translate"),t._UZ(11,"ion-icon",9),t.qZA()(),t.TgZ(12,"button",7,10),t.NdJ("click",function(o){return i.handleFilter("yield",o)}),t.TgZ(14,"div",8),t._uU(15),t.ALo(16,"translate"),t._UZ(17,"ion-icon",9),t.qZA()(),t.TgZ(18,"button",7),t.NdJ("click",function(o){return i.handleFilter("date",o)}),t.TgZ(19,"div",11),t._uU(20),t.ALo(21,"translate"),t._UZ(22,"ion-icon",9),t.qZA()(),t._UZ(23,"div",12),t.qZA()(),t._UZ(24,"div",13),t.TgZ(25,"div",14)(26,"div",15),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"div",16),t._uU(30),t.ALo(31,"translate"),t.qZA()(),t._UZ(32,"div",17),t.TgZ(33,"div",18),t.YNc(34,Y,5,4,"ng-scrollbar",19),t.ALo(35,"filterStrategy"),t.qZA()(),t.TgZ(36,"app-filter-modal",20),t.NdJ("apply",function(o){return i.handleModalApply(o)})("isOpenChange",function(o){return i.isOpenFilterModal=o}),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.showTitle),t.xp6(1),t.Q6J("ngStyle",t.VKq(30,z,i.filterMode?72:32)),t.xp6(1),t.Q6J("ngIf",i.filterMode),t.xp6(3),t.Q6J("ngIf",!i.activeMode),t.xp6(1),t.Q6J("ngClass",t.WLB(32,L,"rank"===i.filter.field,-1===i.filter.order)),t.xp6(2),t.hij(" ",t.lcZ(10,16,"dashboard-filter-rank")," "),t.xp6(3),t.Q6J("ngClass",t.WLB(35,L,"yield"===i.filter.field,-1===i.filter.order)),t.xp6(3),t.hij(" ",t.lcZ(16,18,"Annualized-Revenue")," "),t.xp6(3),t.Q6J("ngClass",t.WLB(38,L,"date"===i.filter.field,-1===i.filter.order)),t.xp6(2),t.hij(" ",t.lcZ(21,20,"dashboard-filter-date")," "),t.xp6(7),t.hij(" ",t.lcZ(28,22,"dashboard-side-menu-header-pair")," "),t.xp6(3),t.hij(" ",t.lcZ(31,24,"yield-alls")," "),t.xp6(4),t.Q6J("ngLet",t.Dn7(35,26,i.itemList,t.kEZ(41,$,i.isShowingAutomated,i.isShowingCopyTrade,i.showOnlyActivated),i.filter)),t.xp6(2),t.Q6J("isShowingAutomated",i.isShowingAutomated)("isShowingCopyTrade",i.isShowingCopyTrade)("isOpen",i.isOpenFilterModal))},dependencies:[_.ez,_.mk,_.sg,_.O5,_.PC,h.u5,h.JJ,h.On,h.UX,c.Pc,c.gu,c.pK,c.j9,p.aw,p.X$,f.Q,k.r,Z.p,D.k,I.T,u.kb,u.KC,y.T,U.E,R.B,B.h,a.V,x.D,M.t],styles:["app-check-circle[_ngcontent-%COMP%]     svg, app-gear-icon[_ngcontent-%COMP%]     svg{width:20px}.filter-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{display:none}.filter-item.active[_ngcontent-%COMP%]{background-color:var(--main-blue-transparent);color:var(--main-blue)}.filter-item.active[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{display:block;transition:transform .3s}.filter-item.active.desc[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{transform:rotate(180deg)}ion-input[_ngcontent-%COMP%]{--padding-start: 4px;--padding-end: 4px;--padding-top: 2px;--padding-bottom: 2px}.icon-close[_ngcontent-%COMP%]{font-size:9px}"]}),r})()},293:(T,m,n)=>{n.d(m,{t:()=>_});var d=n(4650);let _=(()=>{class t{transform(c,{isShowingCopyTrade:p=!1,isShowingAutomated:u=!1,showOnlyActivated:y=!0},{field:f="rank",order:v=-1}){return c.filter(a=>(!y||(null==a?void 0:a.isActivated))&&"automated"===a.type&&u||"copy"===a.type&&p).sort((a,x)=>(a[f]-x[f])*v)}}return t.\u0275fac=function(c){return new(c||t)},t.\u0275pipe=d.Yjl({name:"filterStrategy",type:t,pure:!0,standalone:!0}),t})()}}]);