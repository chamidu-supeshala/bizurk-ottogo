"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2657],{2657:(Ce,k,a)=>{a.r(k),a.d(k,{AuthModule:()=>xe});var g=a(6895),d=a(4006),p=a(8008),C=a(3416),Y=a(8854),w=a(1169),c=a(3709),z=a(1597),E=a(9300),h=a(7154),e=a(4650);const D=function(r){return{register:r}},B=function(r){return{"hidden sm:block":r}};let H=(()=>{class r extends h.H{constructor(o){super(),this.changeDetectorRef=o,this.bgNum=1,this.isMobile=!1,this.isRegisterPage=!1,this.isMobile=window.innerWidth<992,this.router.events.pipe((0,E.h)(t=>t instanceof c.m2)).subscribe(t=>{this.isRegisterPage="/auth/register"===t.url.slice(0,14)})}onResize(){this.isMobile=window.innerWidth<992}ngOnInit(){this.bgNum=this.getRandomInt(1,7)}getRandomInt(o,t){return o=Math.ceil(o),t=Math.floor(t),Math.floor(Math.random()*(t-o+1))+o}prepareRoute(o){return o&&o.activatedRouteData&&o.activatedRouteData.animation?(setTimeout(()=>{this.changeDetectorRef.detectChanges()},0),`${o.activatedRouteData.animation}-${this.isMobile?"m":"d"}`):""}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-auth"]],hostBindings:function(o,t){1&o&&e.NdJ("resize",function(){return t.onResize()},!1,e.Jf7)},features:[e.qOj],decls:8,vars:10,consts:[[1,"auth-page",3,"ngClass","fullscreen"],[1,"auth-wrapper","w-full","min-h-screen","xl:w-10/12","px-5","m-auto","2md:h-full","flex","flex-col","2md:flex-row","items-center","2md:justify-between","overflow-hidden"],[1,"auth-logo-wrapper","w-full","2md:w-1/2","my-10","2md:my-0","mx-auto",3,"ngClass"],["src","assets/logo-light.png","alt","",1,"m-auto","light-element",3,"routerLink"],["src","assets/logo-dark.png","alt","",1,"m-auto","dark-element",3,"routerLink"],[1,"auth-container","relative","min-w-full","sm:min-w-[450px]"],["outlet","outlet"]],template:function(o,t){if(1&o&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3)(4,"img",4),e.qZA(),e.TgZ(5,"div",5),e._UZ(6,"router-outlet",null,6),e.qZA()()()),2&o){const n=e.MAs(7);e.Q6J("ngClass",e.VKq(6,D,t.isRegisterPage))("fullscreen",!0),e.xp6(2),e.Q6J("ngClass",e.VKq(8,B,t.isRegisterPage)),e.xp6(1),e.Q6J("routerLink","/"),e.xp6(1),e.Q6J("routerLink","/"),e.xp6(1),e.Q6J("@slideInOutVertical",t.prepareRoute(n))}},dependencies:[g.mk,c.lC,c.rH,p.W2,p.YI],styles:[".auth-container.ng-animating[_ngcontent-%COMP%]{position:absolute}.auth-logo-wrapper[_ngcontent-%COMP%]{max-width:75%}@media (min-width: 375px){.auth-logo-wrapper[_ngcontent-%COMP%]{max-width:60%}}@media (min-width: 640px){.auth-logo-wrapper[_ngcontent-%COMP%]{max-width:616px}}  .light-mode ion-content.auth-page{--background: url(/assets/login-bg/login-bg-new-light-min.png) top center / cover no-repeat;position:relative}  .light-mode ion-content.auth-page .auth-logo-wrapper img{filter:drop-shadow(0px 0px 15px #ffffff)}@media (min-width: 640px){  .light-mode ion-content.auth-page{--background: url(/assets/login-bg/login-bg-new-light-min.png) top left / cover no-repeat}  .light-mode ion-content.auth-page .auth-logo-wrapper img{filter:none}}  .dark-mode ion-content.auth-page{--background: url(/assets/login-bg/login-bg-new-dark-min.png) top left / cover no-repeat}  input:-webkit-autofill,   input:-webkit-autofill:hover,   input:-webkit-autofill:focus,   textarea:-webkit-autofill,   textarea:-webkit-autofill:hover,   textarea:-webkit-autofill:focus,   select:-webkit-autofill,   select:-webkit-autofill:hover,   select:-webkit-autofill:focus{border:0;-webkit-text-fill-color:var(--text-input);-webkit-box-shadow:0 0 0px 1000px transparent inset;-webkit-transition:background-color 50000s ease-in-out 0s;transition:background-color 50000s ease-in-out 0s}"],data:{animation:[z.DY]},changeDetection:0}),r})();var b=a(8764),_=a(7312);function v(r){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var t in o)r[t]=o[t]}return r}var G=function Z(r,i){function o(n,s,l){if(!(typeof document>"u")){"number"==typeof(l=v({},i,l)).expires&&(l.expires=new Date(Date.now()+864e5*l.expires)),l.expires&&(l.expires=l.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var u="";for(var m in l)l[m]&&(u+="; "+m,!0!==l[m]&&(u+="="+l[m].split(";")[0]));return document.cookie=n+"="+r.write(s,n)+u}}return Object.create({set:o,get:function t(n){if(!(typeof document>"u"||arguments.length&&!n)){for(var s=document.cookie?document.cookie.split("; "):[],l={},u=0;u<s.length;u++){var m=s[u].split("="),x=m.slice(1).join("=");try{var f=decodeURIComponent(m[0]);if(l[f]=r.read(x,f),n===f)break}catch(A){}}return n?l[n]:l}},remove:function(n,s){o(n,"",v({},s,{expires:-1}))},withAttributes:function(n){return Z(this.converter,v({},this.attributes,n))},withConverter:function(n){return Z(v({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(r)}})}({read:function(r){return'"'===r[0]&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),I=a(9769),X=a.n(I),S=a(8505),R=a(5939),$=a(4107),J=a(6540),U=a(7139),O=a(6948),L=a(3284),q=a(6065),j=a(8222);function W(r,i){if(1&r&&(e.TgZ(0,"div",39),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r){const o=e.oxw();let t;e.xp6(1),e.hij(" ",e.lcZ(2,1,null==(t=o.form.get("username"))||null==t.errors?null:t.errors.label)," ")}}function ee(r,i){if(1&r&&(e.TgZ(0,"div",39),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r){const o=e.oxw();let t;e.xp6(1),e.hij(" ",e.lcZ(2,1,null==(t=o.form.get("password"))||null==t.errors?null:t.errors.label)," ")}}function te(r,i){if(1&r&&(e.TgZ(0,"div",39),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r){const o=e.oxw();let t;e.xp6(1),e.hij(" ",e.lcZ(2,1,null==(t=o.form.get("confirmPassword"))||null==t.errors?null:t.errors.label)," ")}}function oe(r,i){if(1&r&&(e.TgZ(0,"div",39),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r){const o=e.oxw();let t;e.xp6(1),e.hij(" ",e.lcZ(2,1,null==(t=o.form.get("mobile"))||null==t.errors?null:t.errors.label)," ")}}function re(r,i){if(1&r&&(e.TgZ(0,"div",39),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r){const o=e.oxw();let t;e.xp6(1),e.hij(" ",e.lcZ(2,1,null==(t=o.form.get("email"))||null==t.errors?null:t.errors.label)," ")}}function ne(r,i){1&r&&(e.TgZ(0,"div",39),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"verification-code-required")," "))}function ie(r,i){1&r&&e._UZ(0,"app-loading-spinner",40)}const ae=function(r){return{failed:r}},y=function(r){return{"!border-red-1":r}},le=function(r){return{"has-inviter":r}};let se=(()=>{class r extends h.H{constructor(o,t,n,s,l,u){super(),this.fb=o,this.userService=t,this.referralService=n,this.cdr=s,this.activatedRoute=l,this.authService=u,this.type="1",this.smsTimeRemaining=0,this.registerFailed=!1,this.isSubmitted=!1,this.isLoading=!1,this.confirmationValidator=m=>m.value?Object.is(m.value,this.form.controls.password.value)?{}:{error:!0,label:"confirm-password-validation-dismatch"}:{error:!0,label:"confirm-password-validation-required"},this.initForm()}ngOnInit(){this.getVerifyCode()}validate(){this.form.valid?this.submit():Object.values(this.form.controls).forEach(o=>{o.invalid&&(o.markAsDirty(),o.updateValueAndValidity({onlySelf:!0}))})}getVerifyCode(){this.verifyCode=null}onSelectPhoneCountry(o){var t;o&&(null===(t=this.form.get("mobileArea"))||void 0===t||t.patchValue(o))}onPhoneNumberChange(o){var t;null===(t=this.form.get("mobile"))||void 0===t||t.patchValue(o)}getSmsCode(){const{mobile:o,mobileArea:t}=this.form.value;this.authService.sendSmsCode({type:_.eo.Register,mobileArea:t,mobile:o.toString()}).subscribe({next:n=>{7001012!==n.code?8!==n.code?(this.toast.toastSuccess("\u53d1\u9001\u6210\u529f"),G.set(_._h,(Date.now()+6e4).toString()),this.smsTimeRemaining=60,this.startTimeInterval()):this.toast.toastError("\u83b7\u53d6\u9a8c\u8bc1\u7801\u5931\u8d25,\u8bf7\u68c0\u67e5\u683c\u5f0f"):this.toast.toastError("\u624b\u673a\u53f7\u5df2\u5b58\u5728")},error:n=>{this.toast.toastError("\u624b\u673a\u53f7\u5df2\u5b58\u5728"),console.error(n)}}),this.type="2"}startTimeInterval(){this.timeInterval=setInterval(()=>{this.smsTimeRemaining-=1,this.smsTimeRemaining<1&&clearInterval(this.timeInterval)},1e3)}getEmailCode(){if(!this.form.controls.email.valid)return this.form.controls.email.markAsDirty(),void this.form.controls.email.updateValueAndValidity({onlySelf:!0});this.authService.SendEmailVerifyCodeParam({email:this.form.value.email,type:"register"}).subscribe(o=>{console.log(o),1001006!==o.code?(this.toast.toastSuccess("\u90ae\u4ef6\u5df2\u53d1\u9001"),this.smsTimeRemaining=60):this.toast.toastError("\u90ae\u7bb1\u5df2\u5b58\u5728")}),this.type="1"}submit(){const o=Object.assign({},this.form.value);this.isLoading=this.isSubmitted=!0,delete o.confirmPassword,console.log(o),this.authService.registerV2(Object.assign(Object.assign({},o),{registerType:this.type,account:o.username,areaCode:o.mobileArea,mobile:o.mobile?o.mobile.toString():null,email:o.email?o.email:null,password:X()(o.password).toString()})).pipe((0,S.b)(()=>{this.isLoading=!1})).subscribe(t=>{if(0!==t.code)return this.toast.toastError(t.message),void this.registerHasFailed();this.toast.toastSuccess("\u6ce8\u518c\u6210\u529f"),this.router.navigateByUrl("/auth/login")},t=>{console.log(t),this.toast.toastError(t.message),this.getVerifyCode()})}initForm(){var o;console.log("initForm"),this.inviterId=null,this.referralService.inviterId&&(this.inviterId=this.referralService.inviterId),this.form=this.fb.group({username:[null,[b.d.userName]],password:[null,[b.d.password]],confirmPassword:[null,[d.kI.required,this.confirmationValidator]],mobileArea:["+86"],mobile:[null,[d.kI.required]],email:[null,b.d.email],verifyCode:[null,[d.kI.required]],inviterId:[this.inviterId],isProfessionalTrader:[!1,[d.kI.required]]}),this.inviterId&&(null===(o=this.form.get("inviterId"))||void 0===o||o.disable())}registerHasFailed(){this.registerFailed=!0,setTimeout(()=>{this.registerFailed=!1},800)}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(d.qu),e.Y36(R.K),e.Y36($.C),e.Y36(e.sBO),e.Y36(c.gz),e.Y36(J.e))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-register"]],features:[e.qOj],decls:69,vars:66,consts:[[1,"auth-box","register-component","rounded-2xl","border-main-border","border-2","bg-main-bg","px-2","py-8","font-medium","mt-8","sm:mt-0",3,"ngClass"],[1,"flex","items-center","mb-8","pr-2","sm:pr-4"],["routerLink","/auth/login",1,"cursor-pointer","w-8","h-8","mr-1"],["name","chevron-back-outline",1,"w-8","h-8"],[1,"active","tab","relative","text-lg","cursor-pointer","rounded-t","py-3","font-medium","whitespace-nowrap","flex-auto","text-center","mr-1"],[1,"hidden","sm:flex","items-center","ml-4"],[1,"w-full","px-2","sm:px-6",3,"formGroup"],[1,"form-field"],[1,"rounded-md","border-border-input","border","flex","items-center","bg-bg-input","px-2",3,"ngClass"],[1,"icon-person","text-text-strong","text-xl"],["formControlName","username",3,"placeholder"],["class","mt-1 text-sm text-red-1",4,"ngIf"],["formControlName","password","customInvalidClass","border-red-1",3,"placeholder","isInvalid"],["formControlName","confirmPassword","customInvalidClass","border-red-1",3,"placeholder","isInvalid"],[1,"form-field","relative"],["customInvalidClass","!border-red-1",3,"isInvalid","onSelectPhoneCountry","onPhoneNumberChange"],[1,"icon-letter","text-text-strong","text-xl"],["formControlName","email",1,"",3,"placeholder"],[1,"sms-field","flex","w-full","gap-x-2"],[1,"flex","flex-auto","items-center","bg-bg-input","rounded-lg","border","border-border-input","text-text-strong",3,"ngClass"],["formControlName","verifyCode",1,"sms-code",3,"placeholder"],["appRippleEffect","",1,"btn-blue","sms-btn","border","border-border-input","rounded-lg","font-medium","text-text-strong","px-3","whitespace-nowrap",3,"disabled","click"],[1,"flex","flex-col"],[1,"icon-phone_1","text-xl"],[1,"text-sm","leading-none"],[1,"icon-letter","text-xl"],[1,"form-field","inviter-input","rounded-md","border-border-input","border","flex","items-center","bg-bg-input","px-2",3,"ngClass"],[1,"icon-chaine","text-text-strong","text-xl"],["formControlName","inviterId",3,"placeholder"],["for","professionalTrader",1,"flex","items-center","mb-5","cursor-pointer"],["name","professionalTrader","mode","md","formControlName","isProfessionalTrader",1,"m-0","mr-1.5"],[1,"text-text-strong"],["type","submit","appRippleEffect","",1,"btn-blue","font-medium","border-solid","border-2","text-center","block","w-full","rounded-lg","py-3","uppercase","text-2xl",3,"click"],["class","text-white absolute top-1/2 left-1/2 transfrom -translate-x-1/2 -translate-y-1/2","size","30px","thick","3px",4,"ngIf"],[1,"flex","items-center","justify-between","sm:justify-center","my-5"],[1,"flex","items-center","justify-center","bg-main-bg","p-1.5","rounded-md"],["interface","modal",3,"showText"],["name","chevron-forward-outline"],[1,"mr-2","sm:hidden"],[1,"mt-1","text-sm","text-red-1"],["size","30px","thick","3px",1,"text-white","absolute","top-1/2","left-1/2","transfrom","-translate-x-1/2","-translate-y-1/2"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"a",2),e._UZ(3,"ion-icon",3),e.qZA(),e.TgZ(4,"div",4),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"app-theme-toggle",5),e.qZA(),e.TgZ(8,"form",6)(9,"div",7)(10,"div",8),e._UZ(11,"i",9)(12,"ion-input",10),e.ALo(13,"translate"),e.qZA(),e.YNc(14,W,3,3,"div",11),e.qZA(),e.TgZ(15,"div",7),e._UZ(16,"app-password-field",12),e.ALo(17,"translate"),e.YNc(18,ee,3,3,"div",11),e.qZA(),e.TgZ(19,"div",7),e._UZ(20,"app-password-field",13),e.ALo(21,"translate"),e.YNc(22,te,3,3,"div",11),e.qZA(),e.TgZ(23,"div",14)(24,"app-phone-control",15),e.NdJ("onSelectPhoneCountry",function(s){return t.onSelectPhoneCountry(s)})("onPhoneNumberChange",function(s){return t.onPhoneNumberChange(s)}),e.qZA(),e.YNc(25,oe,3,3,"div",11),e.qZA(),e.TgZ(26,"div",7)(27,"div",8),e._UZ(28,"i",16)(29,"ion-input",17),e.ALo(30,"translate"),e.qZA(),e.YNc(31,re,3,3,"div",11),e.qZA(),e.TgZ(32,"div",7)(33,"div",18)(34,"div",19),e._UZ(35,"ion-input",20),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"button",21),e.NdJ("click",function(){return t.getSmsCode()}),e.TgZ(38,"div",22),e._UZ(39,"i",23),e.TgZ(40,"span",24),e._uU(41),e.ALo(42,"translate"),e.qZA()()(),e.TgZ(43,"button",21),e.NdJ("click",function(){return t.getEmailCode()}),e.TgZ(44,"div",22),e._UZ(45,"i",25),e.TgZ(46,"span",24),e._uU(47),e.ALo(48,"translate"),e.qZA()()()(),e.YNc(49,ne,3,3,"div",11),e.qZA(),e.TgZ(50,"div",26),e._UZ(51,"i",27)(52,"ion-input",28),e.ALo(53,"translate"),e.qZA(),e.TgZ(54,"label",29),e._UZ(55,"ion-checkbox",30),e.TgZ(56,"ion-label",31),e._uU(57),e.ALo(58,"translate"),e.qZA()(),e.TgZ(59,"button",32),e.NdJ("click",function(){return t.submit()}),e.TgZ(60,"span"),e._uU(61),e.ALo(62,"translate"),e.qZA(),e.YNc(63,ie,1,0,"app-loading-spinner",33),e.qZA()()(),e.TgZ(64,"div",34)(65,"div",35),e._UZ(66,"app-language-dropdown",36)(67,"ion-icon",37),e.qZA(),e._UZ(68,"app-theme-toggle",38),e.qZA()),2&o){let n,s,l,u,m,x,f,A,M,N,Q,T,P,V;e.Q6J("ngClass",e.VKq(56,ae,t.registerFailed)),e.xp6(5),e.hij(" ",e.lcZ(6,34,"register")," "),e.xp6(3),e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("ngClass",e.VKq(58,y,(null==(n=t.form.get("username"))?null:n.errors)&&t.isSubmitted)),e.xp6(2),e.s9C("placeholder",e.lcZ(13,36,"username")),e.xp6(2),e.Q6J("ngIf",(null==(s=t.form.get("username"))?null:s.errors)&&t.isSubmitted),e.xp6(2),e.s9C("placeholder",e.lcZ(17,38,"password")),e.Q6J("isInvalid",(null==(l=t.form.get("password"))?null:l.errors)&&t.isSubmitted),e.xp6(2),e.Q6J("ngIf",(null==(u=t.form.get("password"))?null:u.errors)&&t.isSubmitted),e.xp6(2),e.s9C("placeholder",e.lcZ(21,40,"confirm-password")),e.Q6J("isInvalid",(null==(m=t.form.get("confirmPassword"))?null:m.errors)&&t.isSubmitted),e.xp6(2),e.Q6J("ngIf",(null==(x=t.form.get("confirmPassword"))?null:x.errors)&&t.isSubmitted),e.xp6(2),e.Q6J("isInvalid",(null==(f=t.form.get("mobile"))?null:f.errors)&&t.isSubmitted),e.xp6(1),e.Q6J("ngIf",(null==(A=t.form.get("mobile"))?null:A.errors)&&t.isSubmitted),e.xp6(2),e.Q6J("ngClass",e.VKq(60,y,(null==(M=t.form.get("email"))?null:M.errors)&&t.isSubmitted)),e.xp6(2),e.s9C("placeholder",e.lcZ(30,42,"email")),e.xp6(2),e.Q6J("ngIf",(null==(N=t.form.get("email"))?null:N.errors)&&t.isSubmitted),e.xp6(3),e.Q6J("ngClass",e.VKq(62,y,(null==(Q=t.form.get("verifyCode"))?null:Q.errors)&&t.isSubmitted)),e.xp6(1),e.Q6J("placeholder",e.lcZ(36,44,"verification-code")),e.xp6(2),e.Q6J("disabled",!0===(null==(T=t.form.get("mobile"))||null==T.errors?null:T.errors.error)),e.xp6(4),e.hij(" ",e.lcZ(42,46,"sms")," "),e.xp6(2),e.Q6J("disabled",!0===(null==(P=t.form.get("email"))||null==P.errors?null:P.errors.error)),e.xp6(4),e.hij(" ",e.lcZ(48,48,"email")," "),e.xp6(2),e.Q6J("ngIf",(null==(V=t.form.get("verifyCode"))?null:V.errors)&&t.isSubmitted),e.xp6(1),e.Q6J("ngClass",e.VKq(64,le,t.inviterId)),e.xp6(2),e.s9C("placeholder",e.lcZ(53,50,"fill-inviter")),e.xp6(5),e.hij(" ",e.lcZ(58,52,"professional-trader-question")," "),e.xp6(2),e.ekj("btn-disabled",t.form.invalid),e.xp6(1),e.ekj("invisible",t.isLoading),e.xp6(1),e.Oqu(e.lcZ(62,54,"register")),e.xp6(2),e.Q6J("ngIf",t.isLoading),e.xp6(3),e.Q6J("showText",!0)}},dependencies:[g.mk,g.O5,c.rH,p.nz,p.gu,p.pK,p.Q$,p.w,p.j9,p.Fo,d._Y,d.JJ,d.JL,d.sg,d.u,U.q,O.b,L.T,q.R,w.b,j.T,C.X$],styles:["[_nghost-%COMP%]{max-width:100%;margin-left:auto;margin-right:auto}ion-input[_ngcontent-%COMP%]{--padding-start: 8px;--padding-top: 11px;--padding-bottom: 11px;--placeholder-opacity: 1;--placeholder-color: var(--input-placeholder);--placeholder-weight: 500;font-size:1.1rem;line-height:24px;color:var(--text-strong)}ion-checkbox[_ngcontent-%COMP%]{--background: var(--main-bg);--border-color: var(--main-border)}.auth-box[_ngcontent-%COMP%]{max-width:100%;width:100%;box-shadow:0 0 10px 10px rgba(0,0,0,.3)}@media (min-width: 640px){.auth-box[_ngcontent-%COMP%]{width:450px;min-width:450px}}.auth-box.failed[_ngcontent-%COMP%]{animation:angry-shake .4s}.auth-box.failed[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:var(--main-red);border-color:var(--main-red);color:#fff;opacity:1}.tab[_ngcontent-%COMP%]{font-size:1.35rem;line-height:1.75rem}.form-field[_ngcontent-%COMP%]{margin-bottom:1.1rem}@media (min-width: 640px){.form-field[_ngcontent-%COMP%]{margin-bottom:.75rem}}  .dark-mode app-auth .tab{border-bottom-width:2px;border-style:solid;border-color:transparent;color:var(--text-strong);background-color:#21213a}  .dark-mode app-auth .tab.active{background-color:#181f42;border-color:var(--main-blue)}  .dark-mode app-auth .tab-body{background-color:#232232}  .dark-mode app-auth .inviter-input.has-inviter{background-color:#302d4b}  .dark-mode app-auth .inviter-input.has-inviter ion-input{color:#7c78a1!important}  .dark-mode app-auth .inviter-input.has-inviter i{color:#7c78a1!important}  .dark-mode app-auth .inviter-input.has-inviter   input{opacity:1!important}  .light-mode app-auth .tab{border-bottom-width:2px;border-style:solid;border-color:transparent;color:var(--text-strong);background-color:#f0f0f0}  .light-mode app-auth .tab.active{border-color:var(--main-blue);color:var(--main-blue);background:#dee8f8}  .light-mode app-auth .tab.active app-globe-icon svg *{fill:#fff}  .light-mode app-auth .tab-body{background-color:#fff}"]}),r})();var de=a(655);function ue(r,i){if(1&r&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r){const o=e.oxw();let t;e.xp6(1),e.hij(" ",e.lcZ(2,1,null==(t=o.form.get("mobile"))||null==t.errors?null:t.errors.label)," ")}}function me(r,i){1&r&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"verification-code-required")," "))}function pe(r,i){1&r&&e._UZ(0,"app-loading-spinner",28)}const ce=function(r){return{failed:r}},ge=function(r){return{"!border-red-1":r}};let fe=(()=>{class r extends h.H{constructor(o,t,n,s,l){super(),this.fb=o,this.userService=t,this.cdr=n,this.activatedRoute=s,this.authService=l,this.type="register",this.smsTimeRemaining=0,this.forgotPasswordFailed=!1,this.isSubmitted=!1,this.isLoading=!1,this.initForm()}ngOnInit(){this.getVerifyCode()}validate(){this.form.valid?this.submit():Object.values(this.form.controls).forEach(o=>{o.invalid&&(console.log("control",o.errors),o.markAsDirty(),o.updateValueAndValidity({onlySelf:!0}))})}getVerifyCode(){this.verifyCode=null}onSelectPhoneCountry(o){var t;o&&(null===(t=this.form.get("mobileArea"))||void 0===t||t.patchValue(o))}onPhoneNumberChange(o){var t;null===(t=this.form.get("mobile"))||void 0===t||t.patchValue(o)}getSmsCode(){const o=this.form.getRawValue();console.log("onSendVerificationCode",o),this.authService.sendSmsCode({type:_.eo.ResetPassword,mobileArea:o.countryCode?o.countryCode:"+86",mobile:o.mobile}).pipe().subscribe(t=>{0===t.code?this.toast.toastSuccess("\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001"):this.toast.toastError(t.message)})}startTimeInterval(){this.timeInterval=setInterval(()=>{this.smsTimeRemaining-=1,this.smsTimeRemaining<1&&clearInterval(this.timeInterval)},1e3)}getEmailCode(){if(!this.form.controls.email.valid)return this.form.controls.email.markAsDirty(),void this.form.controls.email.updateValueAndValidity({onlySelf:!0});this.type="email"}submit(){const o=Object.assign(Object.assign({},this.form.value),{type:this.type});this.isSubmitted=!0,this.form.invalid?this.forgotPasswordHasFailed():(console.log(o),this.isLoading=!0,this.authService.forgetPassword({codeType:"sms_code",code:o.verifyCode,newPassword:I(o.newPassword).toString(),mobileArea:o.mobileArea,mobile:o.mobile}).pipe((0,S.b)(()=>{this.isLoading=!1})).subscribe(t=>(0,de.mG)(this,void 0,void 0,function*(){0===t.code?(yield this.userService.updateUserInfo(),this.toast.toastSuccess("\u4fee\u6539\u6210\u529f")):this.toast.toastError(t.message)})))}initForm(){this.form=this.fb.group({mobileArea:["+86"],mobile:[null,[d.kI.required,b.d.phone]],verifyCode:[null,[d.kI.required]],newPassword:[null,[d.kI.required]]})}forgotPasswordHasFailed(){this.forgotPasswordFailed=!0,setTimeout(()=>{this.forgotPasswordFailed=!1},800)}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(d.qu),e.Y36(R.K),e.Y36(e.sBO),e.Y36(c.gz),e.Y36(J.e))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-forgot-password"]],features:[e.qOj],decls:38,vars:30,consts:[[1,"auth-box","register-component","rounded-2xl","border-main-border","border-2","bg-main-bg","px-2","py-8","font-medium",3,"ngClass"],[1,"flex","items-center","mb-8","pr-2","sm:pr-4"],["routerLink","/auth/login",1,"cursor-pointer","w-8","h-8","mr-1"],["name","chevron-back-outline",1,"w-8","h-8"],[1,"active","tab","cursor-pointer","rounded-t","py-3","font-medium","whitespace-nowrap","flex-auto","text-center","mr-1"],[1,"hidden","sm:flex","items-center","ml-4"],[1,"w-full","px-2","sm:px-6",3,"formGroup"],[1,"relative"],["customInvalidClass","!border-red-1",3,"isInvalid","onSelectPhoneCountry","onPhoneNumberChange"],["class","mt-1 text-sm text-red-1",4,"ngIf"],[1,"my-3"],[1,"sms-field","flex","w-full","gap-x-2"],[1,"flex","flex-auto","items-center","bg-bg-input","rounded-lg","border","border-border-input","text-text-strong",3,"ngClass"],["formControlName","verifyCode",1,"sms-code",3,"placeholder"],["type","button","appRippleEffect","",1,"btn-blue","sms-btn","border","border-border-input","rounded-lg","font-medium","text-text-strong","px-3","whitespace-nowrap",3,"disabled","click"],[1,"flex","flex-col"],[1,"icon-phone_1","text-xl"],[1,"text-sm","leading-none"],[1,"flex","flex-auto","items-center","bg-bg-input","rounded-l-lg","border","border-border-input","text-text-strong","text-xl"],["formControlName","newPassword",1,"w-full",3,"placeholder"],["type","submit","appRippleEffect","",1,"btn-blue","font-medium","border-solid","border-2","text-center","block","w-full","rounded-lg","py-3","uppercase","text-2xl",3,"click"],["class","text-white absolute top-1/2 left-1/2 transfrom -translate-x-1/2 -translate-y-1/2","size","30px","thick","3px",4,"ngIf"],[1,"flex","items-center","justify-between","sm:justify-center","my-5"],[1,"flex","items-center","justify-center","bg-main-bg","p-1.5","rounded-md"],["interface","modal",3,"showText"],["name","chevron-forward-outline"],[1,"mr-2","sm:hidden"],[1,"mt-1","text-sm","text-red-1"],["size","30px","thick","3px",1,"text-white","absolute","top-1/2","left-1/2","transfrom","-translate-x-1/2","-translate-y-1/2"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"a",2),e._UZ(3,"ion-icon",3),e.qZA(),e.TgZ(4,"div",4),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"app-theme-toggle",5),e.qZA(),e.TgZ(8,"form",6)(9,"div",7)(10,"app-phone-control",8),e.NdJ("onSelectPhoneCountry",function(s){return t.onSelectPhoneCountry(s)})("onPhoneNumberChange",function(s){return t.onPhoneNumberChange(s)}),e.qZA(),e.YNc(11,ue,3,3,"div",9),e.qZA(),e.TgZ(12,"div",10)(13,"div",11)(14,"div",12),e._UZ(15,"ion-input",13),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"button",14),e.NdJ("click",function(){return t.getSmsCode()}),e.TgZ(18,"div",15),e._UZ(19,"i",16),e.TgZ(20,"span",17),e._uU(21),e.ALo(22,"translate"),e.qZA()()()(),e.YNc(23,me,3,3,"div",9),e.qZA(),e.TgZ(24,"div",10)(25,"div",18),e._UZ(26,"app-password-field",19),e.ALo(27,"translate"),e.qZA()(),e.TgZ(28,"button",20),e.NdJ("click",function(){return t.submit()}),e.TgZ(29,"span"),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.YNc(32,pe,1,0,"app-loading-spinner",21),e.qZA()()(),e.TgZ(33,"div",22)(34,"div",23),e._UZ(35,"app-language-dropdown",24)(36,"ion-icon",25),e.qZA(),e._UZ(37,"app-theme-toggle",26),e.qZA()),2&o){let n,s,l,u,m;e.Q6J("ngClass",e.VKq(26,ce,t.forgotPasswordFailed)),e.xp6(5),e.hij(" ",e.lcZ(6,16,"forgot-password")," "),e.xp6(3),e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("isInvalid",(null==(n=t.form.get("mobile"))?null:n.errors)&&t.isSubmitted),e.xp6(1),e.Q6J("ngIf",(null==(s=t.form.get("mobile"))?null:s.errors)&&t.isSubmitted),e.xp6(3),e.Q6J("ngClass",e.VKq(28,ge,(null==(l=t.form.get("verifyCode"))?null:l.errors)&&t.isSubmitted)),e.xp6(1),e.Q6J("placeholder",e.lcZ(16,18,"verification-code")),e.xp6(2),e.Q6J("disabled",!0===(null==(u=t.form.get("mobile"))||null==u.errors?null:u.errors.error)),e.xp6(4),e.hij(" ",e.lcZ(22,20,"sms")," "),e.xp6(2),e.Q6J("ngIf",(null==(m=t.form.get("verifyCode"))?null:m.errors)&&t.isSubmitted),e.xp6(3),e.s9C("placeholder",e.lcZ(27,22,"new-password")),e.xp6(3),e.ekj("invisible",t.isLoading),e.xp6(1),e.Oqu(e.lcZ(31,24,"submit")),e.xp6(2),e.Q6J("ngIf",t.isLoading),e.xp6(3),e.Q6J("showText",!0)}},dependencies:[g.mk,g.O5,c.rH,p.gu,p.pK,p.j9,p.Fo,d._Y,d.JJ,d.JL,d.sg,d.u,U.q,O.b,L.T,q.R,w.b,j.T,C.X$],styles:["[_nghost-%COMP%]{max-width:100%;margin-left:auto;margin-right:auto}ion-input[_ngcontent-%COMP%]{--padding-start: 8px;--padding-top: 11px;--padding-bottom: 11px;--placeholder-opacity: 1;--placeholder-color: var(--input-placeholder);--placeholder-weight: 500;font-size:1.1rem;line-height:24px;color:var(--text-strong)}ion-checkbox[_ngcontent-%COMP%]{--background: var(--main-bg);--border-color: var(--main-border)}.auth-box[_ngcontent-%COMP%]{max-width:100%;width:100%;box-shadow:0 0 10px 10px rgba(0,0,0,.3)}@media (min-width: 640px){.auth-box[_ngcontent-%COMP%]{width:450px;min-width:450px}}.auth-box.failed[_ngcontent-%COMP%]{animation:angry-shake .4s}.auth-box.failed[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:var(--main-red);border-color:var(--main-red);color:#fff;opacity:1}.tab[_ngcontent-%COMP%]{font-size:1.35rem;line-height:1.75rem}  .dark-mode app-auth .tab{border-bottom-width:2px;border-style:solid;border-color:transparent;color:var(--text-strong);background-color:#21213a}  .dark-mode app-auth .tab.active{background-color:#181f42;border-color:var(--main-blue)}  .dark-mode app-auth .tab-body{background-color:#232232}  .dark-mode app-auth .inviter-input.has-inviter{background-color:#302d4b}  .dark-mode app-auth .inviter-input.has-inviter ion-input{color:#7c78a1!important}  .dark-mode app-auth .inviter-input.has-inviter i{color:#7c78a1!important}  .dark-mode app-auth .inviter-input.has-inviter   input{opacity:1!important}  .light-mode app-auth .tab{border-bottom-width:2px;border-style:solid;border-color:transparent;color:var(--text-strong);background-color:#f0f0f0}  .light-mode app-auth .tab.active{border-color:var(--main-blue);color:var(--main-blue);background:#dee8f8}  .light-mode app-auth .tab.active app-globe-icon svg *{fill:#fff}  .light-mode app-auth .tab-body{background-color:#fff}"]}),r})();var F=a(8146);const he=[{path:"",component:H,children:[{path:"login",component:(()=>{class r extends h.H{}return r.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(r)))(t||r)}}(),r.\u0275cmp=e.Xpm({type:r,selectors:[["app-login-page"]],features:[e.qOj],decls:1,vars:0,template:function(o,t){1&o&&e._UZ(0,"app-login")},dependencies:[F.G]}),r})(),data:{animation:"Login"}},{path:"register",component:se,data:{animation:"Register"}},{path:"forgot-password",component:fe,data:{animation:"Register"}}]}];let be=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[c.Bz.forChild(he),c.Bz]}),r})();var ve=a(9116);let xe=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[g.ez,F.G,be,p.Pc,C.aw,d.u5,d.UX,Y.T,w.b,ve.Q]}),r})()}}]);