"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4574],{4574:(L,C,r)=>{r.r(C),r.d(C,{MyAccountModule:()=>te});var _=r(6895),m=r(8008),t=r(3416),v=r(5433),g=r(8854),M=r(1896),h=r(3709),P=r(7154),e=r(4650),O=r(5939),w=r(6065),y=r(413),A=r(5915),b=r(655),Z=r(4006),T=r(8746),k=r(9808),I=r(9116),z=r(7341),p=r(7312),f=r(4392);const o=function(){return{minSize:"50px",maxSize:"1000px"}};let l=(()=>{class a{constructor(){this.onLoadImg=new e.vpe,this.onRemove=new e.vpe,this.isEditing=!1,this.cropImg=null,this.data=""}ngOnInit(){return(0,b.mG)(this,void 0,void 0,function*(){yield this.loadScript();const{profilePicture:n}=window;this.cropImg=new n(".drop-img-container",null,{onLoad:i=>{this.onLoadImg.emit()},onChange:i=>{},onRemove:i=>{this.onRemove.emit()},onError:function(i){console.error("Error type: "+i)},dropZone:!1}),this.file&&(yield this.readFile(this.file))})}getAsDataUrl(n="image/png",i=1){return this.cropImg?this.cropImg.getAsDataURL(n,i):null}readFile(n){return(0,b.mG)(this,void 0,void 0,function*(){if(yield this.loadScript(),this.cropImg)return this.cropImg.removeImage(),this.cropImg.readFile(n)})}loadScript(){return new Promise(n=>{(0,f.Z)({jquery:"assets/script/jquery.min.js"}).jquery.onLoad(()=>{(0,f.Z)({cropImage:"assets/script/crop-image.js?v=1.0.1"}).cropImage.onLoad(()=>{n(!0)})})})}abcd(){this.data=this.getAsDataUrl()}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-crop-image"]],inputs:{initUrl:"initUrl",file:"file"},outputs:{onLoadImg:"onLoadImg",onRemove:"onRemove"},standalone:!0,features:[e.jDz],decls:30,vars:17,consts:[[1,"drop-img-container","m-auto"],[1,"photo"],["type","file","accept","image/*"],[1,"photo__helper"],[1,"photo__frame","photo__frame--circle"],[1,"photo__canvas"],[1,"message","is-empty"],[1,"message--desktop"],[1,"message--mobile"],[1,"message","is-loading"],[1,"fa","fa-2x","fa-spin","fa-spinner"],[1,"message","is-dragover"],[1,"message","is-wrong-file-type","!text-red-500"],[1,"message","is-wrong-image-size","!text-red-500"],[1,"photo__options","hide","flex","items-center","mt-3"],[1,"photo__zoom"],["type","range",1,"zoom-handler"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"input",2),e.TgZ(3,"div",3)(4,"div",4),e._UZ(5,"canvas",5),e.TgZ(6,"div",6)(7,"p",7),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"p",8),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"div",9),e._UZ(14,"i",10),e.qZA(),e.TgZ(15,"div",11)(16,"p"),e._uU(17),e.ALo(18,"translate"),e.qZA()(),e.TgZ(19,"div",12)(20,"p"),e._uU(21),e.ALo(22,"translate"),e.qZA()(),e.TgZ(23,"div",13)(24,"p"),e._uU(25),e.ALo(26,"translate"),e.qZA()()()(),e.TgZ(27,"div",14)(28,"div",15),e._UZ(29,"input",16),e.qZA()()()()),2&n&&(e.xp6(8),e.hij(" ",e.lcZ(9,5,"profile-drag-and-drop-avatar")," "),e.xp6(3),e.hij(" ",e.lcZ(12,7,"profile-drag-and-drop-avatar")," "),e.xp6(6),e.Oqu(e.lcZ(18,9,"profile-drag-and-drop-avatar")),e.xp6(4),e.Oqu(e.lcZ(22,11,"image-upload-error-filetype")),e.xp6(4),e.hij(" ",e.xi3(26,13,"profile-avatar-size-error",e.DdM(16,o))," "))},dependencies:[_.ez,m.Pc,t.aw,t.X$],styles:["[_nghost-%COMP%]     canvas{image-rendering:optimizeSpeed;image-rendering:-moz-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:-o-crisp-edges;image-rendering:crisp-edges;-ms-interpolation-mode:nearest-neighbor}[_nghost-%COMP%]     .hide{display:none!important}[_nghost-%COMP%]     *{box-sizing:border-box}[_nghost-%COMP%]     .photo__zoom{position:relative;padding-left:22px;padding-right:22px}[_nghost-%COMP%]     .photo__zoom input[type=range]{-webkit-appearance:none;width:100%;background:transparent;height:18px}[_nghost-%COMP%]     .photo__zoom input[type=range]::-webkit-slider-thumb{-webkit-appearance:none}[_nghost-%COMP%]     .photo__zoom input[type=range]:focus{outline:none}[_nghost-%COMP%]     .photo__zoom input[type=range]::-ms-track{width:100%;cursor:pointer;background:transparent;border-color:transparent;color:transparent}[_nghost-%COMP%]     .photo__zoom input[type=range]:focus::-ms-thumb{border-color:var(--main-blue);background:var(--main-blue);box-shadow:0 0 1px 0 var(--main-blue)}[_nghost-%COMP%]     .photo__zoom input[type=range]:focus::-moz-range-thumb{border-color:var(--main-blue);background:var(--main-blue);box-shadow:0 0 1px 0 var(--main-blue)}[_nghost-%COMP%]     .photo__zoom input[type=range]:focus::-webkit-slider-thumb{border-color:var(--main-blue);background:var(--main-blue);box-shadow:0 0 1px 0 var(--main-blue)}[_nghost-%COMP%]     .photo__zoom input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;margin-top:-9px;box-sizing:border-box;cursor:pointer;width:18px;height:18px;display:block;border-radius:50%;background:var(--main-blue);border:1px solid var(--accent-blue)}[_nghost-%COMP%]     .photo__zoom input[type=range]::-webkit-slider-thumb:hover{border-color:#c1c1c1}[_nghost-%COMP%]     .photo__zoom input[type=range]::-ms-thumb{margin-top:0;box-sizing:border-box;cursor:pointer;width:18px;height:18px;display:block;border-radius:50%;background:#eee;border:1px solid var(--accent-blue)}[_nghost-%COMP%]     .photo__zoom input[type=range]::-ms-thumb:hover{border-color:#c1c1c1}[_nghost-%COMP%]     .photo__zoom input[type=range]::-moz-range-thumb{margin-top:0;box-sizing:border-box;cursor:pointer;width:18px;height:18px;display:block;border-radius:50%;background:#363770;border:1px solid var(--accent-blue)}[_nghost-%COMP%]     .photo__zoom input[type=range]::-moz-range-thumb:hover{border-color:#c1c1c1}[_nghost-%COMP%]     .photo__zoom input[type=range]::-webkit-slider-runnable-track{width:100%;height:2px;cursor:pointer;background:#363770;border:0}[_nghost-%COMP%]     .photo__zoom input[type=range]::-moz-range-track{width:100%;height:2px;cursor:pointer;background:#363770;border:0}[_nghost-%COMP%]     .photo__zoom input[type=range]::-ms-track{width:100%;height:2px;cursor:pointer;background:#363770;border:0}[_nghost-%COMP%]     .photo__zoom input[type=range].zoom--minValue:before, [_nghost-%COMP%]     .photo__zoom input[type=range].zoom--maxValue:after{color:#f8f8f8}[_nghost-%COMP%]     .photo__zoom input[type=range]:before{font-size:14px;left:4px;top:4px}[_nghost-%COMP%]     .photo__frame--circle{border:1px solid #e2e2e2;border-radius:50%}[_nghost-%COMP%]     .photo__helper{position:relative;background-repeat:no-repeat;background-color:transparent;padding:15px 0}[_nghost-%COMP%]     .photo__helper .canvas--helper{position:absolute;top:0;left:0}[_nghost-%COMP%]     .photo__frame img, [_nghost-%COMP%]     .photo__helper{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}[_nghost-%COMP%]     .drop-img-container{position:relative;font-size:85%;width:400px}[_nghost-%COMP%]     .photo{text-align:center}[_nghost-%COMP%]     .photo input[type=file]{display:none}[_nghost-%COMP%]     .photo__options{position:relative;text-align:left}[_nghost-%COMP%]     .photo__zoom{vertical-align:middle;width:80%;display:inline-block}[_nghost-%COMP%]     .photo__frame{cursor:move;overflow:hidden;position:relative;display:inline-block;width:240px;height:240px}[_nghost-%COMP%]     .photo__frame img, [_nghost-%COMP%]     .photo__helper img{position:relative}[_nghost-%COMP%]     .photo__frame .message{position:absolute;left:5px;right:5px;top:50%;transform:translateY(-50%);display:inline-block;color:var(--main-blue);z-index:3}[_nghost-%COMP%]     .photo__frame .is-dragover{display:none}[_nghost-%COMP%]     .message p{font-size:.9em}[_nghost-%COMP%]     .photo__options{list-style:none}[_nghost-%COMP%]     .photo__options li{display:inline-block;text-align:center;width:50%}[_nghost-%COMP%]     .photo--empty .photo__frame{cursor:pointer}[_nghost-%COMP%]     .drop-img-container.is-dragover .photo__frame img, [_nghost-%COMP%]     .photo--empty img, [_nghost-%COMP%]     .photo--error img, [_nghost-%COMP%]     .photo--error--file-type img, [_nghost-%COMP%]     .photo--error--image-size img, [_nghost-%COMP%]     .photo--loading img{display:none}[_nghost-%COMP%]     .message--desktop, [_nghost-%COMP%]     .message--mobile{display:none}[_nghost-%COMP%]     .is-mobile .message--mobile{display:inline-block}[_nghost-%COMP%]     .is-mobile .message--desktop{display:none}[_nghost-%COMP%]     .is-desktop .message--desktop{display:inline-block}[_nghost-%COMP%]     .is-desktop .message--mobile{display:none}[_nghost-%COMP%]     .message.is-empty, [_nghost-%COMP%]     .message.is-loading, [_nghost-%COMP%]     .message.is-wrong-file-type, [_nghost-%COMP%]     .message.is-wrong-image-size, [_nghost-%COMP%]     .message.is-something-wrong, [_nghost-%COMP%]     .message.is-dragover{display:none}[_nghost-%COMP%]     .photo--empty .photo__options{display:none}[_nghost-%COMP%]     .photo--empty .message.is-empty{display:inline-block}[_nghost-%COMP%]     .photo--empty .photo__frame:hover{background:var(--main-blue)}[_nghost-%COMP%]     .photo--empty .photo__frame:hover .message{color:#fff}[_nghost-%COMP%]     .photo--loading .message.is-loading{display:inline-block}[_nghost-%COMP%]     .photo--loading .message.is-empty, [_nghost-%COMP%]     .photo--loading .message.is-wrong-file-type, [_nghost-%COMP%]     .photo--loading .message.is-dragover, [_nghost-%COMP%]     .photo--loading .message.is-wrong-image-size, [_nghost-%COMP%]     .photo--loading .photo__options{display:none}[_nghost-%COMP%]     .photo--error .message.is-empty, [_nghost-%COMP%]     .photo--error .message.is-loading, [_nghost-%COMP%]     .photo--error .message.is-dragover, [_nghost-%COMP%]     .photo--error .message.is-wrong-image-size, [_nghost-%COMP%]     .photo--error .photo__options{display:none}[_nghost-%COMP%]     .photo--error .message.is-something-wrong{display:inline-block}[_nghost-%COMP%]     .photo--error--file-type .message.is-empty, [_nghost-%COMP%]     .photo--error--file-type .message.is-loading, [_nghost-%COMP%]     .photo--error--file-type .message.is-dragover, [_nghost-%COMP%]     .photo--error--file-type .message.is-wrong-image-size, [_nghost-%COMP%]     .photo--error--file-type .photo__options{display:none}[_nghost-%COMP%]     .photo--error--file-type .message.is-wrong-file-type{display:inline-block}[_nghost-%COMP%]     .photo--error--image-size .message.is-empty, [_nghost-%COMP%]     .photo--error--image-size .message.is-loading, [_nghost-%COMP%]     .photo--error--image-size .message.is-dragover, [_nghost-%COMP%]     .photo--error--image-size .message.is-wrong-file-type, [_nghost-%COMP%]     .photo--error--image-size .photo__options{display:none}[_nghost-%COMP%]     .photo--error--image-size .message.is-wrong-image-size{display:inline-block}[_nghost-%COMP%]     .drop-img-container.is-dragover .photo__frame{background-color:var(--main-blue);color:#fff!important}[_nghost-%COMP%]     .drop-img-container.is-dragover .message{color:#fff!important}[_nghost-%COMP%]     .drop-img-container.is-dragover .photo__frame .is-dragover{display:inline-block}[_nghost-%COMP%]     .drop-img-container.is-dragover .message.is-empty, [_nghost-%COMP%]     .drop-img-container.is-dragover .message.is-loading, [_nghost-%COMP%]     .drop-img-container.is-dragover .message.is-wrong-file-type, [_nghost-%COMP%]     .drop-img-container.is-dragover .message.is-wrong-image-size{display:none}"]}),a})();var c=r(7363),x=r(8201),U=r(8222),j=r(6190);function S(a,d){if(1&a){const n=e.EpF();e.TgZ(0,"app-crop-image",19),e.NdJ("onLoadImg",function(){e.CHM(n);const s=e.oxw(2);return e.KtG(s.handleLoadImg())})("onRemove",function(){e.CHM(n);const s=e.oxw(2);return e.KtG(s.handleRemoveImg())}),e.qZA()}if(2&a){const n=e.oxw(2);e.Q6J("file",n.fileToCrop)}}function q(a,d){if(1&a&&e._UZ(0,"img",30),2&a){const n=e.oxw(3);e.Q6J("src",(null==n.userInfo?null:n.userInfo.headImgUrl)||"/assets/images/sign-up-user.svg",e.LSH)}}function Q(a,d){1&a&&e._UZ(0,"app-profile-icon")}function G(a,d){1&a&&e._UZ(0,"app-loading-spinner",31)}function F(a,d){if(1&a){const n=e.EpF();e.TgZ(0,"div",20)(1,"input",21,22),e.NdJ("change",function(s){e.CHM(n);const u=e.oxw(2);return e.KtG(u.fileBrowseHandler(s))}),e.qZA(),e.TgZ(3,"label",23)(4,"div",24),e.YNc(5,q,1,1,"img",25),e.qZA(),e.YNc(6,Q,1,0,"app-profile-icon",26),e.qZA(),e.YNc(7,G,1,0,"app-loading-spinner",27),e.TgZ(8,"ion-fab-button",28),e.NdJ("click",function(){e.CHM(n);const s=e.MAs(2);return e.KtG(s.click())}),e._UZ(9,"ion-icon",29),e.qZA()()}if(2&a){const n=e.oxw(2);e.xp6(5),e.Q6J("ngIf",null==n.userInfo?null:n.userInfo.headImgUrl),e.xp6(1),e.Q6J("ngIf",!(null!=n.userInfo&&n.userInfo.headImgUrl)),e.xp6(1),e.Q6J("ngIf",n.uploadProgress||n.isLoadingInfo),e.xp6(1),e.Q6J("disabled",n.isLoadingInfo)}}function R(a,d){if(1&a){const n=e.EpF();e.TgZ(0,"div",32)(1,"button",33),e.NdJ("click",function(){e.CHM(n);const s=e.oxw(2);return e.KtG(s.cancelProfilePicture())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",34),e.NdJ("click",function(){e.CHM(n);const s=e.oxw(2);return e.KtG(s.saveProfilePicture())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(2&a){const n=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,3,"cancel")," "),e.xp6(2),e.Q6J("disabled",!n.isLoadedImg),e.xp6(1),e.hij(" ",e.lcZ(6,5,"save")," ")}}const H=function(a){return{"h-48 lg:h-56 w-48 lg:w-56":a}};function B(a,d){if(1&a){const n=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2",4),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"ion-icon",5),e.NdJ("click",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.handleDismiss())}),e.qZA()(),e.TgZ(7,"div",6)(8,"div",7),e.NdJ("fileDropped",function(s){e.CHM(n);const u=e.oxw();return e.KtG(u.onFileDropped(s))}),e.TgZ(9,"div",8),e.YNc(10,S,1,1,"app-crop-image",9),e.YNc(11,F,10,4,"div",10),e.TgZ(12,"div",11)(13,"div",12),e._UZ(14,"app-upload-anim-icon",13),e.TgZ(15,"p",14),e._uU(16),e.ALo(17,"translate"),e.qZA()()()(),e.YNc(18,R,7,7,"div",15),e.qZA()(),e.TgZ(19,"div",16)(20,"button",17),e.NdJ("click",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.handleDismiss())}),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"button",18),e.NdJ("click",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.confirmAvatar())}),e._uU(24),e.ALo(25,"translate"),e.qZA()()()}if(2&a){const n=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,9,"edit-profile-picture")," "),e.xp6(5),e.Q6J("ngClass",e.VKq(17,H,!n.isEditingPhoto)),e.xp6(1),e.Q6J("ngIf",n.isEditingPhoto&&n.userInfo),e.xp6(1),e.Q6J("ngIf",!n.isEditingPhoto),e.xp6(5),e.hij(" ",e.lcZ(17,11,"profile-drag-and-drop-avatar")," "),e.xp6(2),e.Q6J("ngIf",n.isEditingPhoto),e.xp6(3),e.hij(" ",e.lcZ(22,13,"close")," "),e.xp6(2),e.Q6J("disabled",!n.isAvatarUpdated),e.xp6(1),e.hij(" ",e.lcZ(25,15,"confirm")," ")}}let J=(()=>{class a extends z.u{constructor(n){super(),this._userService=n,this.userInfo=null,this.isEditingPhoto=!1,this.isLoadedImg=!1,this.isAvatarUpdated=!1,this.isLoadingInfo=!1,this.subscriptions.add(this._userService.userInfo$.subscribe(i=>{i&&(this.userInfo=i)}))}ngOnInit(){}onFileDropped(n){var i;return(0,b.mG)(this,void 0,void 0,function*(){this.isEditingPhoto=!0,this.fileToCrop=n,yield null===(i=this.cropImg)||void 0===i?void 0:i.readFile(n)})}fileBrowseHandler(n){var i;return(0,b.mG)(this,void 0,void 0,function*(){n.target.files.length&&(console.log("avatar.size1",n.target.files[0].size),this.isEditingPhoto=!0,this.fileToCrop=n.target.files[0],yield null===(i=this.cropImg)||void 0===i?void 0:i.readFile(n.target.files[0]))})}cancelProfilePicture(){this.isEditingPhoto=!1,this.isAvatarUpdated=!1}saveProfilePicture(){return(0,b.mG)(this,void 0,void 0,function*(){if(!this.isLoadedImg)return;let n=this.cropImg.getAsDataUrl("image/jpeg",.5);if(!n)return;const i=this.dataURLtoBlob(n);if(!i)return;console.log(i);const s=new File([i],"avatar.png",{type:"image/png",lastModified:Date.now()});this.blobFile=s,this.isAvatarUpdated=!0})}dataURLtoBlob(n){var i;let s=n.split(",");if(!s||!s[0])return null;let u=null===(i=s[0].match(/:(.*?);/))||void 0===i?void 0:i[1],K=atob(s[1]),E=K.length,N=new Uint8Array(E);for(;E--;)N[E]=K.charCodeAt(E);return new Blob([N],{type:u})}uploadAvatar(n){this.uploadError="",this.isEditingPhoto=!1,this.isLoadingInfo=!0,this.uploadProgress=0,this.uploadSub=this._userService.uploadAvatar(n,p.gc.avatar).pipe((0,T.x)(()=>this.uploadFinished())).subscribe(i=>(0,b.mG)(this,void 0,void 0,function*(){0===i.body.code?(yield this.uploadFina(i.body.data[0]),this.toast.toastSuccess("\u4e0a\u4f20\u6210\u529f"),yield this._userService.updateUserInfo()):this.toast.toastError(i.body.message)}))}uploadFina(n){return(0,b.mG)(this,void 0,void 0,function*(){yield(0,k.n)(this._userService.uploadAvatarUrlFinal(n))})}uploadFinished(){this.uploadProgress=null,this.uploadSub=null,this.isLoadingInfo=!1,this.isLoadedImg=!1}handleLoadImg(){this.isLoadedImg=!0}handleRemoveImg(){this.isLoadedImg=!1}confirmAvatar(){if(console.log(this.blobFile.size),this.blobFile.size/1024>=300)return this.uploadError="filesize",void this.toast.toastError("\u4e0a\u4f20\u56fe\u7247\u4e0d\u80fd\u8d85\u8fc7300kb");this.uploadAvatar(this.blobFile),this.isAvatarUpdated=!1,this.isEditingPhoto=!1}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(O.K))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-edit-avatar-modal"]],viewQuery:function(n,i){if(1&n&&e.Gf(l,5),2&n){let s;e.iGM(s=e.CRH())&&(i.cropImg=s.first)}},standalone:!0,features:[e.qOj,e.jDz],decls:2,vars:1,consts:[[1,"theme-modal","settings-modal",3,"isOpen","didDismiss"],[1,"flex","flex-col","p-2","h-full"],[1,"modal-header","flex","items-center"],[1,"flex-1","text-text-strong","font-medium"],[1,"text-2xl","sm:text-3xl"],["name","close-outline",1,"w-8","h-8","sm:w-10","sm:h-10","cursor-pointer","sm:m-1",3,"click"],[1,"modal-content","flex","flex-col","flex-auto","items-center","w-full"],["appDragAndDrop","",1,"group","relative","w-full","flex","flex-col","lg:mb-0","rounded-xl",3,"fileDropped"],[1,"profile-avatar","relative","flex","flex-col","items-center","justify-center","mx-auto",3,"ngClass"],[3,"file","onLoadImg","onRemove",4,"ngIf"],["class","relative group-[.fileover]:hidden z-40 h-full",4,"ngIf"],[1,"invisible","opacity-0","drop-zone-container","absolute","flex","items-center","justify-center","flex-none","group-[.fileover]:visible","group-[.fileover]:opacity-100","w-full","h-full","rounded-md","z-50","pointer-events-none"],[1,"drop-zone","w-full","h-full","flex","flex-col","items-center","justify-center","rounded-md"],[1,"stroke-accent-blue","w-32","stroke-[4px]"],[1,"mx-4","text-center","text-text-strong","text-2xl","font-medium"],["class","flex justify-center mr-2 mb-4 text-lg font-medium",4,"ngIf"],[1,"modal-footer","flex","justify-between","px-3"],[1,"btn-medium",3,"click"],[1,"btn-blue","w-full","text-3xl","font-medium","rounded-md","h-20",3,"disabled","click"],[3,"file","onLoadImg","onRemove"],[1,"relative","group-[.fileover]:hidden","z-40","h-full"],["id","upload-avatar","type","file","accept","image/*","multiple","false",1,"hidden",3,"change"],["file",""],["for","upload-avatar",1,"upload","flex","w-full","h-full","rounded-full","cursor-pointer","z-40","m-0"],[1,"headImg"],["class","object-cover object-center !w-full !h-full rounded-full overflow-hidden","width","100%","height","100%","alt","User avatar",3,"src",4,"ngIf"],[4,"ngIf"],["class","absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2","text","loading",4,"ngIf"],["size","small",1,"absolute","top-1","right-0","lg:top-4","m-0","z-40",3,"disabled","click"],["name","pencil-sharp"],["width","100%","height","100%","alt","User avatar",1,"object-cover","object-center","!w-full","!h-full","rounded-full","overflow-hidden",3,"src"],["text","loading",1,"absolute","left-1/2","top-1/2","-translate-x-1/2","-translate-y-1/2"],[1,"flex","justify-center","mr-2","mb-4","text-lg","font-medium"],[1,"py-2","text-text-strong","capitalize","mr-2",3,"click"],[1,"btn-blue","py-2","ml-2","rounded-lg","px-3","capitalize",3,"disabled","click"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-modal",0),e.NdJ("didDismiss",function(){return i.handleDismiss()}),e.YNc(1,B,26,19,"ng-template"),e.qZA()),2&n&&e.Q6J("isOpen",i.isOpen)},dependencies:[_.ez,_.mk,_.O5,Z.UX,Z.u5,t.aw,t.X$,m.Pc,m.W4,m.gu,m.ki,I.Q,x.m,U.T,g.T,j.z,l,c.t],styles:['ion-modal[_ngcontent-%COMP%]{--height: auto}ion-modal[_ngcontent-%COMP%]   .account-balance[_ngcontent-%COMP%], ion-modal[_ngcontent-%COMP%]   .otto-points[_ngcontent-%COMP%]{background:var(--bg-balance-box);width:45%;max-width:260px}@media (min-width: 640px){ion-modal[_ngcontent-%COMP%]   .account-balance[_ngcontent-%COMP%], ion-modal[_ngcontent-%COMP%]   .otto-points[_ngcontent-%COMP%]{width:40%}}ion-range[_ngcontent-%COMP%]{--bar-background-active: var(--main-blue);--bar-height: 8px;--bar-border-radius: 8px;--knob-background: var(--main-blue);--knob-size: 32px}ion-range[_ngcontent-%COMP%]::part(knob){border:1px solid var(--light-blue)}.modal-header[_ngcontent-%COMP%]{margin-bottom:.85rem}.modal-content[_ngcontent-%COMP%]{margin-bottom:1.1rem}@media (min-width: 640px){.modal-content[_ngcontent-%COMP%]{margin-bottom:1.6rem}}.modal-footer[_ngcontent-%COMP%]{margin-bottom:.35rem}@media (min-width: 640px){.modal-footer[_ngcontent-%COMP%]{margin-bottom:.85rem}}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:3rem;width:8rem;border-radius:.375rem;border-width:1px;border-style:solid;font-size:1.25rem;line-height:1.75rem}@media (min-width: 640px){.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:3.5rem;width:11rem;font-size:1.5rem;line-height:2rem}}div[appDragAndDrop][_ngcontent-%COMP%]:before{position:fixed;inset:0;z-index:50;background-color:rgba(0,0,0,.082);opacity:0;content:"";transition-duration:.2s;pointer-events:none}div[appDragAndDrop].fileover[_ngcontent-%COMP%]:before{opacity:1}div.drop-zone-container[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--accent-blue) 50%,transparent 0) repeat-x,linear-gradient(90deg,var(--accent-blue) 50%,transparent 0) repeat-x,linear-gradient(0deg,var(--accent-blue) 50%,transparent 0) repeat-y,linear-gradient(0deg,var(--accent-blue) 50%,transparent 0) repeat-y;background-size:16px 3px,16px 3px,3px 16px,3px 16px;background-position:0 0,0 100%,0 0,100% 0;animation:_ngcontent-%COMP%_linearGradientMove .3s infinite linear}div.drop-zone-container[_ngcontent-%COMP%]   div.drop-zone[_ngcontent-%COMP%]{width:calc(100% - 6px);height:calc(100% - 6px)}div.drop-zone-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:none}@keyframes _ngcontent-%COMP%_linearGradientMove{to{background-position:16px 0,-16px 100%,0 -16px,100% 16px}}  .light-mode .arrow{background-color:#a9b5c7}  .light-mode ion-range{--bar-background: rgb(0, 0, 0, .1)}  .light-mode .drop-zone{background-color:#fff}  .dark-mode .arrow{background-color:#132d5e}  .dark-mode ion-range{--bar-background: #363770}  .dark-mode .drop-zone{background-color:var(--bg-btn-disabled)}.headImg[_ngcontent-%COMP%]{width:200px;height:200px}']}),a})();var D=r(2738);function Y(a,d){if(1&a){const n=e.EpF();e.TgZ(0,"div",12)(1,"div",13)(2,"img",14),e.NdJ("click",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.isOpenEditAvatarModal=!0)}),e.qZA(),e.TgZ(3,"button",15),e.NdJ("click",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.isOpenEditAvatarModal=!0)}),e._UZ(4,"ion-icon",16),e.qZA()(),e.TgZ(5,"div",17)(6,"h2",18),e._uU(7),e.qZA()()()}if(2&a){const n=d.ngIf;e.xp6(2),e.Q6J("src",n.headImgUrl,e.LSH)("alt",n.name),e.xp6(5),e.hij(" ",n.account," ")}}function $(a,d){if(1&a&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&a){const n=e.oxw().ngIf;e.xp6(1),e.hij(" ",n.email," ")}}function W(a,d){if(1&a){const n=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(n);const s=e.oxw(2);return e.KtG(s.isOpenEditEmailModal=!0)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"bind-now")," "))}function X(a,d){if(1&a){const n=e.EpF();e.TgZ(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",23),e._uU(7),e.qZA()(),e.TgZ(8,"div",21)(9,"div",22),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.YNc(12,$,2,1,"div",24),e.YNc(13,W,3,3,"ng-template",null,25,e.W1O),e.qZA(),e.TgZ(15,"div",21)(16,"div",22),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"div",26)(20,"button",27),e.NdJ("click",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.isOpenChangePasswordModal=!0)}),e._uU(21),e.ALo(22,"translate"),e.qZA()()(),e.TgZ(23,"div",21)(24,"div",22),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"div",23),e._uU(28),e.ALo(29,"translate"),e.qZA()()()()}if(2&a){const n=d.ngIf,i=e.MAs(14);e.xp6(4),e.hij(" ",e.lcZ(5,10,"username")," "),e.xp6(3),e.Oqu(n.name),e.xp6(3),e.Oqu(e.lcZ(11,12,"email")),e.xp6(2),e.Q6J("ngIf",n.email)("ngIfElse",i),e.xp6(5),e.hij(" ",e.lcZ(18,14,"login-password")," "),e.xp6(4),e.hij(" ",e.lcZ(22,16,"change-password")," "),e.xp6(4),e.hij(" ",e.lcZ(26,18,"connected-exchanges")," "),e.xp6(3),e.AsE(" ",n.bindExchange,"\xa0",e.lcZ(29,20,"accounts")," ")}}const V=[{path:"",component:(()=>{class a extends P.H{constructor(n){super(),this.userService=n,this.isOpenConnectExchangeModal=!1,this.isOpenEditPhoneModal=!1,this.isOpenChangePasswordModal=!1,this.isOpenEditAvatarModal=!1,this.isOpenEditEmailModal=!1}ngOnInit(){}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(O.K))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-my-account"]],features:[e.qOj],decls:23,vars:18,consts:[[1,"flex","flex-col","w-full","sm:px-5","py-4"],[1,"flex","flex-auto","items-center","sm:justify-between","w-full"],[1,"block","sm:hidden","mr-1","cursor-pointer","w-8","h-8",3,"routerLink"],["name","chevron-back-outline",1,"w-8","h-8"],[1,"text-lg","xs:text-2xl","text-text-strong","font-medium"],[1,"profile"],[1,"profile__image-uploader"],["class","flex flex-row items-center gap-2",4,"ngIf"],[1,"profile__buttons"],["appRippleEffect","",1,"edit-profile","hidden","2xs:block",3,"click"],["class","profile__info px-2 sm:px-0 sm:table sm:table-auto sm:w-max font-medium",4,"ngIf"],[3,"isOpen","isOpenChange"],[1,"flex","flex-row","items-center","gap-2"],[1,"w-14","h-14","relative"],[1,"!h-full","!w-full","object-cover","object-center","overflow-hidden","rounded-full",3,"src","alt","click"],["size","small",1,"flex","2xs:hidden","btn-blue","w-6","h-6","absolute","-top-1","-right-1","rounded-full","items-center","justify-center",3,"click"],["name","pencil",1,"w-4","h-4"],[1,"flex","flex-col"],[1,"text-2xl","text-text-strong","font-medium"],[1,"profile__info","px-2","sm:px-0","sm:table","sm:table-auto","sm:w-max","font-medium"],[1,"flex","flex-col","gap-y-3","w-full","sm:table-row-group","text-base"],[1,"block","sm:table-row","mb-4","sm:mb-0","border-b","border-main-border"],[1,"account-info-key-cell"],[1,"account-info-value-cell"],["class","account-info-value-cell",4,"ngIf","ngIfElse"],["noEmail",""],[1,"account-info-value-cell","align-middle"],["appRippleEffect","",1,"primary-btn","w-full",3,"click"]],template:function(n,i){1&n&&(e.TgZ(0,"ng-scrollbar")(1,"div",0)(2,"div",1)(3,"div",2),e._UZ(4,"ion-icon",3),e.qZA(),e.TgZ(5,"h1",4),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"div",5)(9,"div",6),e.YNc(10,Y,8,3,"div",7),e.ALo(11,"async"),e.TgZ(12,"div",8)(13,"button",9),e.NdJ("click",function(){return i.isOpenEditAvatarModal=!0}),e._uU(14),e.ALo(15,"translate"),e.qZA()()(),e.YNc(16,X,30,22,"div",10),e.ALo(17,"async"),e.qZA()(),e.TgZ(18,"app-connect-exchange-modal",11),e.NdJ("isOpenChange",function(u){return i.isOpenConnectExchangeModal=u}),e.qZA(),e.TgZ(19,"app-edit-phone-modal",11),e.NdJ("isOpenChange",function(u){return i.isOpenEditPhoneModal=u}),e.qZA(),e.TgZ(20,"app-change-password-modal",11),e.NdJ("isOpenChange",function(u){return i.isOpenChangePasswordModal=u}),e.qZA(),e.TgZ(21,"app-edit-avatar-modal",11),e.NdJ("isOpenChange",function(u){return i.isOpenEditAvatarModal=u}),e.qZA(),e.TgZ(22,"app-edit-email-modal",11),e.NdJ("isOpenChange",function(u){return i.isOpenEditEmailModal=u}),e.qZA()()),2&n&&(e.xp6(3),e.Q6J("routerLink","/settings"),e.xp6(3),e.hij(" ",e.lcZ(7,10,"my-account")," "),e.xp6(4),e.Q6J("ngIf",e.lcZ(11,12,i.userService.userInfo$)),e.xp6(4),e.hij(" ",e.lcZ(15,14,"edit-profile-picture")," "),e.xp6(2),e.Q6J("ngIf",e.lcZ(17,16,i.userService.userInfo$)),e.xp6(2),e.Q6J("isOpen",i.isOpenConnectExchangeModal),e.xp6(1),e.Q6J("isOpen",i.isOpenEditPhoneModal),e.xp6(1),e.Q6J("isOpen",i.isOpenChangePasswordModal),e.xp6(1),e.Q6J("isOpen",i.isOpenEditAvatarModal),e.xp6(1),e.Q6J("isOpen",i.isOpenEditEmailModal))},dependencies:[_.O5,m.gu,m.YI,v.KC,h.rH,w.R,M.m,y.N,A.q,J,D.T,_.Ov,t.X$],styles:['ion-content[_ngcontent-%COMP%]{--overflow: hidden}ion-button.connect-exchange[_ngcontent-%COMP%]{--background: var(--main-bg);--border-radius: 7px;--padding-start: .5rem;--padding-end: .5rem;height:28px}ion-fab-button[_ngcontent-%COMP%]{margin:0}ion-fab-button.view-profile-mobile[_ngcontent-%COMP%]{--background: var(--main-blue)}.profile[_ngcontent-%COMP%]{margin-top:.25rem;display:flex;flex-direction:column;padding-left:.625rem;padding-right:.625rem}@media (min-width: 640px){.profile[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}.profile__image-uploader[_ngcontent-%COMP%]{margin-top:.75rem;margin-bottom:.75rem;display:flex;flex-direction:row;justify-content:space-between;border-radius:.375rem;padding:1.75rem .5rem}@media (min-width: 340px){.profile__image-uploader[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}}.profile__buttons[_ngcontent-%COMP%]{display:flex;align-items:center}.profile__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:2.75rem;border-radius:.375rem;padding-left:1rem;padding-right:1rem;font-size:1rem;line-height:1.5rem;font-weight:500;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}@media (min-width: 640px){.profile__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:1.5rem}}.profile__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{max-width:200px}@media (min-width: 340px){.profile__buttons[_ngcontent-%COMP%]   button.edit-profile[_ngcontent-%COMP%]{color:var(--text-strong)}}@media (min-width: 640px){.profile__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{max-width:none}.profile__buttons[_ngcontent-%COMP%]   button.edit-profile[_ngcontent-%COMP%], .profile__buttons[_ngcontent-%COMP%]   button.view-profile[_ngcontent-%COMP%]{width:initial}}.gradient-border-wrapper[_ngcontent-%COMP%]{z-index:1}.gradient-border-wrapper[_ngcontent-%COMP%]:after{content:"";background:linear-gradient(.25turn,#29abe9,#e01ae1,#29abe9);position:absolute;z-index:-1;inset:0;border-radius:.5rem}  .dark-mode .profile__image-uploader{background-color:rgba(41,42,63,.59);border:2px solid rgba(70,70,97,.231372549)}  .dark-mode .profile button.edit-profile{background-color:var(--main-bg);background-image:var(--main-bg)}  .light-mode .profile__image-uploader{border-width:2px;border-color:var(--grey-3);--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}  .light-mode .profile button.edit-profile{background-color:#f0f0fd}.account-info-key-cell[_ngcontent-%COMP%]{display:block;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;text-align:right;font-size:1.25rem;line-height:1.75rem;font-weight:500}@media (min-width: 640px){.account-info-key-cell[_ngcontent-%COMP%]{display:table-cell;padding:1rem 1.5rem;font-size:1rem;line-height:1.5rem}}@media (min-width: 1280px){.account-info-key-cell[_ngcontent-%COMP%]{padding-top:1.25rem;padding-bottom:1.25rem}}.account-info-value-cell[_ngcontent-%COMP%]{display:block;padding-top:.5rem;padding-bottom:.5rem;color:var(--text-strong)}@media (min-width: 640px){.account-info-value-cell[_ngcontent-%COMP%]{display:table-cell}}']}),a})()}];let ee=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[h.Bz.forChild(V),h.Bz]}),a})(),te=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[_.ez,m.Pc,t.aw,v.kb,ee,g.T,M.m,y.N,A.q,J,D.T]}),a})()},1896:(L,C,r)=>{r.d(C,{m:()=>z});var _=r(655),m=r(6895),t=r(4650),v=r(4006),g=r(8008),M=r(3416),h=r(7341),P=r(9116),e=r(8854),O=r(5379),w=r(2472);const y=["popover"];function A(p,f){if(1&p){const o=t.EpF();t.TgZ(0,"div")(1,"div",9)(2,"div"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"div",13)(6,"ion-input",14),t.NdJ("ngModelChange",function(c){t.CHM(o);const x=t.oxw(2);return t.KtG(x.accountOptKey.passphrase=c)})("ionChange",function(){t.CHM(o);const c=t.oxw(2);return t.KtG(c.verifyInfo())}),t.ALo(7,"translate"),t.qZA()()()}if(2&p){const o=f.$implicit,l=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,3,o.i18n)),t.xp6(3),t.Q6J("placeholder",t.lcZ(7,5,o.i18n))("ngModel",l.accountOptKey.passphrase)}}function b(p,f){if(1&p){const o=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"div",6),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"ion-icon",7),t.NdJ("click",function(){t.CHM(o),t.oxw();const c=t.MAs(1);return t.KtG(c.dismiss())}),t.qZA()(),t.TgZ(6,"div",8)(7,"div",9),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"button",10),t.NdJ("click",function(c){t.CHM(o);const x=t.oxw();return t.KtG(x.handleSelectOpen(c))}),t._UZ(11,"img",11),t.TgZ(12,"span",9),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"ion-icon",12),t.qZA(),t.TgZ(16,"div",9)(17,"div"),t._uU(18),t.ALo(19,"translate"),t.qZA()(),t.TgZ(20,"div",13)(21,"ion-input",14),t.NdJ("ngModelChange",function(c){t.CHM(o);const x=t.oxw();return t.KtG(x.params.nickName=c)})("ionChange",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.verifyInfo())}),t.ALo(22,"translate"),t.qZA()(),t.TgZ(23,"div",15)(24,"div"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"div",16),t._uU(28),t.ALo(29,"translate"),t._UZ(30,"ion-icon",17),t.qZA()(),t.TgZ(31,"div",13)(32,"ion-input",14),t.NdJ("ngModelChange",function(c){t.CHM(o);const x=t.oxw();return t.KtG(x.params.apiKey=c)})("ionChange",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.verifyInfo())}),t.ALo(33,"translate"),t.qZA(),t._UZ(34,"ion-icon",18),t.qZA(),t.TgZ(35,"div",9)(36,"div"),t._uU(37),t.ALo(38,"translate"),t.qZA()(),t.TgZ(39,"div",13)(40,"ion-input",14),t.NdJ("ngModelChange",function(c){t.CHM(o);const x=t.oxw();return t.KtG(x.params.apiSecret=c)})("ionChange",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.verifyInfo())}),t.ALo(41,"translate"),t.qZA(),t._UZ(42,"ion-icon",18),t.qZA(),t.YNc(43,A,8,7,"div",19),t.TgZ(44,"div",20)(45,"button",21),t.NdJ("click",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.handleDismiss())}),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.TgZ(48,"button",22),t.NdJ("click",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.connectExchange())}),t._uU(49),t.ALo(50,"translate"),t.qZA()()()()}if(2&p){const o=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,21,"exchange-connection")," "),t.xp6(5),t.Oqu(t.lcZ(9,23,"select-exchange")),t.xp6(3),t.Tol("okx"===o.exchanges[o.selectedExchange].exchange&&"dark"!==o.theme?"h-6 filter":"h-6"),t.Q6J("src",o.exchanges[o.selectedExchange].logo,t.LSH)("alt",o.exchanges[o.selectedExchange].name),t.xp6(2),t.Oqu(t.lcZ(14,25,o.exchanges[o.selectedExchange].name)),t.xp6(5),t.Oqu(t.lcZ(19,27,"nickname")),t.xp6(3),t.Q6J("placeholder",t.lcZ(22,29,"name-this-account"))("ngModel",o.params.nickName),t.xp6(4),t.Oqu(t.lcZ(26,31,"api-key")),t.xp6(3),t.hij(" ",t.lcZ(29,33,"how-to-find-api-key")," "),t.xp6(4),t.Q6J("placeholder",t.lcZ(33,35,"API Key"))("ngModel",o.params.apiKey),t.xp6(5),t.Oqu(t.lcZ(38,37,"api-secret")),t.xp6(3),t.Q6J("placeholder",t.lcZ(41,39,"api-secret"))("ngModel",o.params.apiSecret),t.xp6(3),t.Q6J("ngForOf",o.exchanges[o.selectedExchange].accountOptKey),t.xp6(3),t.hij(" ",t.lcZ(47,41,"cancel")," "),t.xp6(2),t.Q6J("disabled",o.invalid||o.isLoading),t.xp6(1),t.hij(" ",t.lcZ(50,43,"exchange-connection")," ")}}function Z(p,f){if(1&p&&t._UZ(0,"img",29),2&p){const o=t.oxw().$implicit,l=t.oxw(2);t.Tol("okx"===o.exchange&&"dark"!==l.theme?"h-7 filter":"h-7"),t.Q6J("src",o.logo,t.LSH)("alt",o.name)}}function T(p,f){1&p&&t._UZ(0,"div",30)}function k(p,f){if(1&p){const o=t.EpF();t.TgZ(0,"ion-item",25),t.NdJ("click",function(){const x=t.CHM(o).index,U=t.oxw(2);return t.KtG(U.changeValue(x))}),t.TgZ(1,"ion-label")(2,"div",26),t.YNc(3,Z,1,4,"img",27),t.YNc(4,T,1,0,"div",28),t.TgZ(5,"div",9),t._uU(6),t.qZA()()()()}if(2&p){const o=f.$implicit;t.xp6(3),t.Q6J("ngIf",o.isShow),t.xp6(1),t.Q6J("ngIf",!o.isShow),t.xp6(2),t.Oqu(o.name)}}function I(p,f){if(1&p&&(t.TgZ(0,"ion-list",23),t.YNc(1,k,7,3,"ion-item",24),t.qZA()),2&p){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.exchanges)}}let z=(()=>{class p extends h.u{constructor(o,l,c){super(),this.themeService=o,this.ExchangeService=l,this.loadingController=c,this.notifyParentEvent=new t.vpe,this.isMenuOpen=!1,this.selectedExchange=0,this.exchanges=[],this.accountOptKey={passphrase:""},this.params={nickName:"",apiKey:"",apiSecret:""},this.invalid=!0,this.isLoading=!1,this.getExchangeQuery()}get theme(){return this.themeService._theme}handleSelectOpen(o){this.popover.event=o,this.isMenuOpen=!0}hasAllValues(o){console.log(o);for(let l in o)if(""===o[l])return!1;return!0}getExchangeQuery(){this.ExchangeService.exchangeQuery().pipe().subscribe(o=>(0,_.mG)(this,void 0,void 0,function*(){if(0===o.code)return this.exchanges=[],void o.data.forEach(l=>{this.exchanges.push({logo:l.icon,name:l.name,kind:l.kind,exchange:l.exchange,accountOptKey:JSON.parse(l.accountOptKey),isShow:-1===this.exchanges.findIndex(c=>c.exchange===l.exchange)})})}))}changeValue(o){this.selectedExchange=o}verifyInfo(){this.invalid=!this.hasAllValues(this.params)||this.selectedExchange>1&&!this.hasAllValues(this.accountOptKey)}connectExchange(){return(0,_.mG)(this,void 0,void 0,function*(){this.isLoading||(this.isLoading=!0,yield(yield this.loadingController.create()).present(),this.ExchangeService.bindingExchange({exchange:this.exchanges[this.selectedExchange].exchange,kind:this.exchanges[this.selectedExchange].kind,nickname:this.params.nickName,apiKey:this.params.apiKey,apiSecret:this.params.apiSecret,optKey:JSON.stringify(this.accountOptKey)}).pipe().subscribe(l=>(0,_.mG)(this,void 0,void 0,function*(){0===l.code?(this.toast.toastSuccess("\u7ed1\u5b9a\u6210\u529f"),this.notifyParentEvent.emit(!0)):this.toast.toastError("\u7ed1\u5b9a\u5931\u8d25")})).add(()=>{this.isLoading=!1,this.loadingController.dismiss()}))})}}return p.\u0275fac=function(o){return new(o||p)(t.Y36(O.f),t.Y36(w.O),t.Y36(g.HT))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-connect-exchange-modal"]],viewQuery:function(o,l){if(1&o&&t.Gf(y,5),2&o){let c;t.iGM(c=t.CRH())&&(l.popover=c.first)}},outputs:{notifyParentEvent:"notifyParentEvent"},standalone:!0,features:[t.qOj,t.jDz],decls:6,vars:3,consts:[[1,"theme-modal",3,"isOpen","didDismiss"],["modal",""],["side","bottom","alignment","center",1,"theme-popover",3,"isOpen","dismissOnSelect","didDismiss"],["popover",""],[1,"p-4"],[1,"flex","items-center","mb-4"],[1,"flex-1","text-2xl","text-text-strong","font-medium"],["name","close-outline",1,"w-10","h-10","cursor-pointer",3,"click"],[1,"font-medium"],[1,"text-text-strong"],[1,"w-full","border-solid","cursor-pointer","h-10","rounded-md","border-border-input","border","flex","items-center","justify-between","bg-bg-input","px-2","mb-4",3,"click"],[1,"h-6","pointer-events-none",3,"src","alt"],["name","chevron-down-outline",1,"pointer-events-none"],[1,"h-10","rounded-md","border-border-input","border","flex","items-center","bg-bg-input","px-2","mb-4"],[1,"",3,"placeholder","ngModel","ngModelChange","ionChange"],[1,"text-text-strong","flex","justify-between"],[1,"text-main-blue","text-xs","items-center","flex"],["name","help-circle-outline",1,"fill-main-blue","ml-1","w-6","h-6"],["name","qr-code-outline","size","large",1,"text-grey-2"],[4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"border","border-solid","rounded","border-main-border","bg-grey-4","px-4","py-2","text-lg","text-text-strong",3,"click"],[1,"btn-blue","border","text-lg","font-medium","px-4","py-2","rounded",3,"disabled","click"],["lines","full"],["class","cursor-pointer","lines","none",3,"click",4,"ngFor","ngForOf"],["lines","none",1,"cursor-pointer",3,"click"],[1,"flex","items-center","justify-between"],[3,"class","src","alt",4,"ngIf"],["class","h-7",4,"ngIf"],[3,"src","alt"],[1,"h-7"]],template:function(o,l){1&o&&(t.TgZ(0,"ion-modal",0,1),t.NdJ("didDismiss",function(){return l.handleDismiss()}),t.YNc(2,b,51,45,"ng-template"),t.qZA(),t.TgZ(3,"ion-popover",2,3),t.NdJ("didDismiss",function(){return l.isMenuOpen=!1}),t.YNc(5,I,2,1,"ng-template"),t.qZA()),2&o&&(t.Q6J("isOpen",l.isOpen),t.xp6(3),t.Q6J("isOpen",l.isMenuOpen)("dismissOnSelect",!0))},dependencies:[m.ez,m.sg,m.O5,v.UX,v.JJ,v.u5,v.On,M.aw,M.X$,g.Pc,g.gu,g.pK,g.Ie,g.Q$,g.q_,g.ki,g.d8,g.j9,e.T,P.Q],styles:["ion-modal[_ngcontent-%COMP%]{--width: 400px;--height: auto;--padding-start: 8px;--padding-end: 8px}ion-item[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--inner-padding-start: 10px;--inner-padding-end: 10px}ion-input[_ngcontent-%COMP%]{--padding-top: 8px;--padding-bottom: 8px}.filter[_ngcontent-%COMP%]{filter:invert(100%)}ion-popover.theme-popover[_ngcontent-%COMP%]::part(content), ion-popover.select-popover[_ngcontent-%COMP%]::part(content){--width: 270px;border-radius:5px;border-width:1px;border-style:solid;border-color:var(--main-border)}"]}),p})()},2472:(L,C,r)=>{r.d(C,{O:()=>v});var _=r(2340),m=r(4650),t=r(529);let v=(()=>{class g{constructor(h){this.http=h}exchangeQuery(){return this.http.get(`${_.N.BASE_URL}/user/exchange/query`)}queryBinding(h,P,e,O){return this.http.get(`${_.N.BASE_URL}/user/exchange/queryBinding?page=${h}&rows=${P}&exchange=${e}&kind=${O}`)}bindingExchange(h){return this.http.post(`${_.N.BASE_URL}/user/exchange/binding`,h)}unbinding(h){return this.http.post(`${_.N.BASE_URL}/user/exchange/unbinding`,h)}}return g.\u0275fac=function(h){return new(h||g)(m.LFG(t.eN))},g.\u0275prov=m.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()}}]);